<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Capstone</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
}

.simple-table-header {
	background: rgb(247, 246, 243);
	color: black;
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="2df9c127-ccd8-4bf2-adba-834cf9560202" class="page sans"><header><h1 class="page-title">Capstone</h1><table class="properties"><tbody><tr class="property-row property-row-date"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesDate"><path d="M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"></path></svg></span>Date</th><td><time>@March 14, 2022 → March 24, 2022</time></td></tr><tr class="property-row property-row-select"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Project Type</th><td><span class="selected-value select-value-color-default">Technology Support Professional (TSP)</span></td></tr><tr class="property-row property-row-text"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>By</th><td>Aidan Waugh</td></tr></tbody></table></header><div class="page-body"><p id="b640556f-9e19-41fd-9eac-f0152df1ff37" class="">
</p><nav id="68438389-22c9-4b8a-9c6a-6a43bfb745d4" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#4a2afcbf-5900-4562-83af-27d608761d49">Overview</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#83a42324-1c1f-44bc-9c9d-1074ed038576">Deliverables</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9d0a1b3e-d90e-476e-aed1-7afb8d712726">Tables &amp; Diagrams</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#7c8b3fe9-ae48-4555-a825-aacd2b8f6c44">Network Diagram</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#f3ac04c4-57d1-4182-8986-6f1714fbec9f">Network &amp; IP Information</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#fdecf65e-34d1-437e-9a15-4ec53860b3da">cap.int Domain ADDS Diagram</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#8f7cfbeb-daff-43cb-92da-cf70be609278">Server File &amp; Storage Diagram</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#94673f1a-f10d-4137-8e25-36d355b29ae0">1.0 Setup</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3eeb072b-0e2e-44d6-a3b1-2a62238c50e4">1.0 Download ISO Files</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#96e3d83c-09e9-4183-b1b6-409b8929b68f">1.2 Sysprep Windows Server 2019 - Core</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#65be1230-4894-4069-856f-3b56a6167b09">1.3 Create Virtual Switches in Hyper-V</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#dc76e2a8-f4f9-4b5f-8f75-f5d379d9f326">1.4 Set IP Addressing Values on Home Router (Optional)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#4790010e-e043-4383-a384-27be85c54c10">2.0 pfSense NAT &amp; Firewall</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#8cf50525-b728-448d-b2df-c6bbffbc4339">2.1 Create the VM and Install pfSense</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#59f36fc7-2c76-4029-8e9d-d6fac7628159">2.2 Configure WAN and LAN Interfaces on pfSense</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#dd1f7c03-6ddc-4d7b-8669-9c644d1350ba">2.3 Test Networking</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bdff7a05-6909-4138-bc7c-618e72cadd88">2.4 Mange pfSense from the web GUI</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d2547431-a01f-4d84-912b-460c95385ad2">2.5 Configure Firewall Rules</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#36614f0e-c919-4a9d-a476-fd2c2fc8880d">3.0 Domain Controller</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#8f0f1a9c-558e-490c-bd17-01238ce83a6f">3.1 Create VM DC1</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0e79024a-4d04-4292-8f88-fc6ee519db12">3.2 Server Configuration with sconfig </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2f657255-2ffd-4cc9-a8a2-69593004566f">3.3 Configuration with PowerShell</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7aaaf97d-89d9-4e62-80ce-055485342d09">3.3 Add AD DS Role</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#fac31579-30e7-40f0-a612-16e31b29d044">3.4 Create Domain Administrator aidan@cap.int</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#abe0ac82-085b-4ae0-aec6-3f5f9764cfc2">4.0 Add Host Thinkpad to the Domain</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6b20dc7a-52db-4ae2-88ec-361f3cf6676c">4.1 Join Thinkpad to the cap.int Domain</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0a7e11cc-150a-4a1d-a3db-0fe3f31b2e95">4.2 Access DC1 from Server Manager on Thinkpad</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#1c2a6edf-9c14-4ff2-91f1-8b2565cd2de7">5.0 Configure DNS on DC1</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#aeff562d-a536-49f3-8ff3-f989ba9d1b3e">5.1 Forward and Reverse Lookup Zones</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#f66e1232-992d-43ca-beea-e33e2e5a05d3">6.0 Create an OU Structure and Create Users in ADUC</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7a77ae9f-a297-42e3-96c4-a693848b4d22">6.1 Organize Active Directory Users and Computers</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#921c2784-29ed-470e-9f04-e59cb73385a1">7.0 DHCP</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e3ad056a-b461-41e3-adc3-bf3448b92958">7.1 Create VM LinDHCP &amp; Install Linux CentOS 8</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#119c7550-fcd8-42cd-b1a4-a1c87c12eb38">7.2 Install and Configure DHCP</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e10064da-6fc6-43ca-b961-52af1acf2c20">7.3 Test DHCP on Thinkpad</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#135361da-30d7-4dfe-8148-e06c65c901b8">7.4 Join LinDHCP to cap.int Domain</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#f9ca38dd-36b6-4608-bc75-b961eaf16953">8.0 iSCSI SAN</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3dd92d18-9831-452d-8845-f4484d20aefa">8.1 Create the SAN VM with Server Core</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b2018e76-85bf-49b3-800b-2e87c5e072cc">8.2 Add a Non-Domain Member to Server Manager</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e051edb8-07d7-4897-81f4-6e94cfc39e7e">8.3 Setup the iSCSI SAN RAID 6 Hardware</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b319dd70-b0a8-45d1-ba2a-4c063d7b921d">8.4 Configure SAN’s Storage Pool, Virtual Disks, and Volumes</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#42922081-a4c5-4e46-8f6a-430135fa0a2b">8.5 Add the iSCSI Target Role on SAN </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#cf709f8f-afd8-44fe-bdec-14e742f27ed5">8.6 Create an iSCSI Virtual Disk</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b9e92195-6002-4a8c-b35e-a5f287c78996">8.7 Create a 2GB vDisk for the Quorum Witness </a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d009e9ed-09c4-482e-925d-4d464003bad6">9.0 Configure 2 Nested Hyper-V Failover Cluster Servers</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e7d28506-b7e1-4b7e-a4fd-d7e99e87341d">9.1 Create the Hyper-V VM &amp; Complete Post-Install Tasks</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0860d1ec-e5be-437a-9dd4-4b2f7ae83d9b">9.2 Complete Nested Hypervisor Hardware and Network Requirements</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#652abf57-e36d-4508-953f-3d2ca169684f">9.3 Connect HV1 to the iSCSI Target</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6843cb98-9598-4783-8ab5-0546e8879c68">9.4 Add the Hyper-V Role</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#edd8e9a2-fc19-4539-ba14-c0328eb92be2">9.5 Configure Hyper-V Failover Clustering</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ce9103a7-3e5d-4504-8896-a6c6c78c453b">9.6 Test Live Migration and Hyper-V Failover</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#69b9da8f-8cfa-47e6-a11f-6c5ed9d65669">10.0 File Server Cluster</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bd2d9eda-37c2-4022-a3f8-c3d9607a1055">10.1 Server Role, Hardware, and HB Network Setup</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2def2490-00ac-43e7-83de-6076d649325c">10.2 Create and Configure the Cluster</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0f3914fc-e77d-4dea-8e28-a2eaf599e816">10.3 Allow CNO FS-Cluster to Create Computer Objects in AD DS</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a9c91a80-d2ed-42a6-95a1-005a6e319afa">10.4 Add the File Server Role</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f9749a48-1acd-4dc8-bbd6-52975fb6870e">10.5 Create File Share</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#5d270490-75fc-43e9-835d-2a3331b6aa5a">11.0 Create AGLDP Structure and GPOs</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#c21415d9-48ef-4e95-bbb3-56e3cbc21b8f">11.1 Setup AGDLP File Permissions for the Share</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#4ac0f169-6f7f-4de7-b1ab-a7508071ed8c">11.2 Create a Mapped Drive GPO</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#17efd676-4945-4484-8b73-3968df023688">11.3 Create a Folder Redirection GPO</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6a3e2c83-3eb7-45b8-b136-c5133f8491a6">12.0 Create a secondary DC</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#cee3158c-3b05-4a88-95e8-37ce140bff58">12.1 Create VM &amp; Complete Post-Install Tasks</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e87a9934-b2e2-4ae7-b26b-fe201ad96f14">12.2 Promote DC2 to Domain Controller</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#3ae77f38-43a5-4814-bb45-f6b0e1ec885c">Appendices</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6fed7d96-c7fb-405a-8863-e40ef370b96d">Appendix A: Network &amp; IP Information</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#1eec80e9-a5c9-4b02-8d08-fcee52824a21">Appendix B: Network Diagram</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#fc17bbaf-05d6-4fd9-bc60-ad770737ffc5">Appendix C: CAP.INT Domain ADDS Diagram</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d822551c-8960-4404-898f-f69adfa58c6f">Appendix D: Server File and Storage Diagram</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#66a5c7ad-b87f-4a24-a2dd-15e996bbc624">Appendix E: VM Server 2019 Core Creation with Child Differencing Disk</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d57c4953-1ac4-46b2-b139-01201f33c469">Appendix F: Server Post-Install PS Script</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#aa9e3cba-fdbf-4cc1-ae12-9ce787bf70ec">Appendix G: Server Post-Install Verification Checklist</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#cd7c3e39-db8d-49b4-8504-fca29ffb300f">Appendix H: Final Setup Screenshots</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#302ee6c2-73da-4c6f-9c53-56ee70ccc8c6">Appendix I: References</a></div></nav><h1 id="4a2afcbf-5900-4562-83af-27d608761d49" class="">Overview</h1><h2 id="83a42324-1c1f-44bc-9c9d-1074ed038576" class="">Deliverables</h2><p id="e26bc621-60db-457a-9c91-593ad3f76a30" class="">From the laptop host <em>Thinkpad</em> complete the following:</p><ul id="71a519e2-7e58-4dca-91d6-e6407d2a2109" class="bulleted-list"><li style="list-style-type:disc">Configure a NAT/Firewall device</li></ul><ul id="3216e62f-d92c-45b8-9af2-7949031d44c7" class="bulleted-list"><li style="list-style-type:disc">Create and configure a DC</li></ul><ul id="a7942588-22e5-4de4-8c84-f6dbe97e2dc8" class="bulleted-list"><li style="list-style-type:disc">Name the domain “cap.int” </li></ul><ul id="f364a855-0be9-4310-a981-abb6ebcc28a9" class="bulleted-list"><li style="list-style-type:disc">Have a domain joined Linux DHCP Server</li></ul><ul id="7f405b66-5c1a-4e1e-abb7-10ae0ec223ac" class="bulleted-list"><li style="list-style-type:disc">Have an Active Directory OU Structure</li></ul><ul id="e774e3d0-f5f9-4920-9862-440dcf89390f" class="bulleted-list"><li style="list-style-type:disc">Create and configure a SAN and have a disk that can tolerate 2 disk failures</li></ul><ul id="272d412f-379c-4cd5-bcbc-0a6903394aa9" class="bulleted-list"><li style="list-style-type:disc">Configure 2 nested Hyper-V Servers that can Live Migrate VMs</li></ul><ul id="54c581ed-efb7-4439-8726-6de425d16fb1" class="bulleted-list"><li style="list-style-type:disc">Create a File Server failover cluster within the nested Hyper-V </li></ul><ul id="e502165c-ea29-4283-91f1-795dfca511a8" class="bulleted-list"><li style="list-style-type:disc">Configure a file share with NTFS permissions</li></ul><ul id="09cf0bbd-8c8b-46ef-866a-052841173603" class="bulleted-list"><li style="list-style-type:disc">Create Group Policies for mapped drives and folder redirection</li></ul><ul id="32ad34ed-0eda-4955-88f3-c48271770957" class="bulleted-list"><li style="list-style-type:disc">Create a secondary DC</li></ul><h2 id="9d0a1b3e-d90e-476e-aed1-7afb8d712726" class="">Tables &amp; Diagrams</h2><h3 id="7c8b3fe9-ae48-4555-a825-aacd2b8f6c44" class=""><details open=""><summary>Network Diagram</summary></details></h3><div class="indented"><figure id="54e857fc-c1d0-4c00-bd2b-e53fddcaf863" class="image"><a href="Capstone%2054e85/Cap-NetworkDiagramHD.jpg"><img style="width:816px" src="Capstone%2054e85/Cap-NetworkDiagramHD.jpg"/></a></figure></div><h3 id="f3ac04c4-57d1-4182-8986-6f1714fbec9f" class=""><details open=""><summary>Network &amp; IP Information</summary></details></h3><div class="indented"><div id="ef33bee8-bab6-4f3f-b91c-3736e7b80e57" class="collection-content"><h4 class="collection-title">Networks</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M7.73943662,8.6971831 C7.77640845,8.7834507 7.81338028,8.8943662 7.81338028,9.00528169 C7.81338028,9.49823944 7.40669014,9.89260563 6.91373239,9.89260563 C6.53169014,9.89260563 6.19894366,9.64612676 6.08802817,9.30105634 L5.75528169,8.33978873 L2.05809859,8.33978873 L1.72535211,9.30105634 C1.61443662,9.64612676 1.2693662,9.89260563 0.887323944,9.89260563 C0.394366197,9.89260563 0,9.49823944 0,9.00528169 C0,8.8943662 0.0246478873,8.7834507 0.0616197183,8.6971831 L2.46478873,2.48591549 C2.68661972,1.90669014 3.24119718,1.5 3.90669014,1.5 C4.55985915,1.5 5.12676056,1.90669014 5.34859155,2.48591549 L7.73943662,8.6971831 Z M2.60035211,6.82394366 L5.21302817,6.82394366 L3.90669014,3.10211268 L2.60035211,6.82394366 Z M11.3996479,3.70598592 C12.7552817,3.70598592 14,4.24823944 14,5.96126761 L14,9.07922535 C14,9.52288732 13.6549296,9.89260563 13.2112676,9.89260563 C12.8169014,9.89260563 12.471831,9.59683099 12.4225352,9.19014085 C12.028169,9.6584507 11.3257042,9.95422535 10.5492958,9.95422535 C9.60035211,9.95422535 8.47887324,9.31338028 8.47887324,7.98239437 C8.47887324,6.58978873 9.60035211,6.08450704 10.5492958,6.08450704 C11.3380282,6.08450704 12.040493,6.33098592 12.4348592,6.81161972 L12.4348592,5.98591549 C12.4348592,5.38204225 11.9172535,4.98767606 11.1285211,4.98767606 C10.6602113,4.98767606 10.2411972,5.11091549 9.80985915,5.38204225 C9.72359155,5.43133803 9.61267606,5.46830986 9.50176056,5.46830986 C9.18133803,5.46830986 8.91021127,5.1971831 8.91021127,4.86443662 C8.91021127,4.64260563 9.0334507,4.44542254 9.19366197,4.34683099 C9.87147887,3.90316901 10.6232394,3.70598592 11.3996479,3.70598592 Z M11.1778169,8.8943662 C11.6830986,8.8943662 12.1760563,8.72183099 12.4348592,8.37676056 L12.4348592,7.63732394 C12.1760563,7.29225352 11.6830986,7.11971831 11.1778169,7.11971831 C10.5616197,7.11971831 10.056338,7.45246479 10.056338,8.0193662 C10.056338,8.57394366 10.5616197,8.8943662 11.1778169,8.8943662 Z M0.65625,11.125 L13.34375,11.125 C13.7061869,11.125 14,11.4188131 14,11.78125 C14,12.1436869 13.7061869,12.4375 13.34375,12.4375 L0.65625,12.4375 C0.293813133,12.4375 4.43857149e-17,12.1436869 0,11.78125 C-4.43857149e-17,11.4188131 0.293813133,11.125 0.65625,11.125 Z"></path></svg></span>Name</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Network</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>Purpose</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Subnet</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>Host IP Range</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Switch Type</th></tr></thead><tbody><tr id="dd49bc2b-cbf9-41f0-91b1-ac527c7ef6ad"><td class="cell-title"><a href="https://www.notion.so/WAN-dd49bc2bcbf941f091b1ac527c7ef6ad">WAN</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-gray">192.168.1.0 /24</span></td><td class="cell-ENCD">Home Network</td><td class="cell-C&lt;~A"></td><td class="cell-Wf]E"></td><td class="cell-u}e@"><span class="selected-value select-value-color-pink">External</span></td></tr><tr id="4a99e195-fb5d-4212-bcf1-831128f4e067"><td class="cell-title"><a href="https://www.notion.so/LAN-4a99e195fb5d4212bcf1831128f4e067">LAN</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-blue">192.168.3.0 /28</span></td><td class="cell-ENCD">LAN</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-yellow">255.255.255.240 (/28)</span></td><td class="cell-Wf]E">192.168.3.1 - 192.168.3.14</td><td class="cell-u}e@"><span class="selected-value select-value-color-green">Internal</span></td></tr><tr id="bdccd096-71dd-42ee-b8b9-9cd18ada461b"><td class="cell-title"><a href="https://www.notion.so/iSCSI-bdccd09671dd42eeb8b99cd18ada461b">iSCSI</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-yellow">192.168.10.0 /29</span></td><td class="cell-ENCD">iSCSI SAN</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-brown">255.255.255.248 (/29)</span></td><td class="cell-Wf]E">192.168.10.1 - 192.168.10.6</td><td class="cell-u}e@"><span class="selected-value select-value-color-gray">Private</span></td></tr><tr id="cd684ffa-5ce2-450b-9f51-5139abda2464"><td class="cell-title"><a href="https://www.notion.so/HB-cd684ffa5ce2450b9f515139abda2464">HB</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-red">192.168.20.0 /29</span></td><td class="cell-ENCD">Heartbeat</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-brown">255.255.255.248 (/29)</span></td><td class="cell-Wf]E">192.168.20.1 - 192.168.20.6</td><td class="cell-u}e@"><span class="selected-value select-value-color-gray">Private</span></td></tr><tr id="c51f0c4d-53e3-4113-9136-f6aa9dc694ca"><td class="cell-title"><a href="https://www.notion.so/LM-c51f0c4d53e341139136f6aa9dc694ca">LM</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-green">192.168.30.0 /30</span></td><td class="cell-ENCD">Live Migration</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-gray">255.255.255.252 (/30)</span></td><td class="cell-Wf]E">192.168.30.1 - 192.168.30.2</td><td class="cell-u}e@"><span class="selected-value select-value-color-gray">Private</span></td></tr></tbody></table></div><div id="88dd5432-930d-4e22-b81e-4dd2a0b6ecc8" class="collection-content"><h4 class="collection-title">IP Addresses &amp; Info</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M7.73943662,8.6971831 C7.77640845,8.7834507 7.81338028,8.8943662 7.81338028,9.00528169 C7.81338028,9.49823944 7.40669014,9.89260563 6.91373239,9.89260563 C6.53169014,9.89260563 6.19894366,9.64612676 6.08802817,9.30105634 L5.75528169,8.33978873 L2.05809859,8.33978873 L1.72535211,9.30105634 C1.61443662,9.64612676 1.2693662,9.89260563 0.887323944,9.89260563 C0.394366197,9.89260563 0,9.49823944 0,9.00528169 C0,8.8943662 0.0246478873,8.7834507 0.0616197183,8.6971831 L2.46478873,2.48591549 C2.68661972,1.90669014 3.24119718,1.5 3.90669014,1.5 C4.55985915,1.5 5.12676056,1.90669014 5.34859155,2.48591549 L7.73943662,8.6971831 Z M2.60035211,6.82394366 L5.21302817,6.82394366 L3.90669014,3.10211268 L2.60035211,6.82394366 Z M11.3996479,3.70598592 C12.7552817,3.70598592 14,4.24823944 14,5.96126761 L14,9.07922535 C14,9.52288732 13.6549296,9.89260563 13.2112676,9.89260563 C12.8169014,9.89260563 12.471831,9.59683099 12.4225352,9.19014085 C12.028169,9.6584507 11.3257042,9.95422535 10.5492958,9.95422535 C9.60035211,9.95422535 8.47887324,9.31338028 8.47887324,7.98239437 C8.47887324,6.58978873 9.60035211,6.08450704 10.5492958,6.08450704 C11.3380282,6.08450704 12.040493,6.33098592 12.4348592,6.81161972 L12.4348592,5.98591549 C12.4348592,5.38204225 11.9172535,4.98767606 11.1285211,4.98767606 C10.6602113,4.98767606 10.2411972,5.11091549 9.80985915,5.38204225 C9.72359155,5.43133803 9.61267606,5.46830986 9.50176056,5.46830986 C9.18133803,5.46830986 8.91021127,5.1971831 8.91021127,4.86443662 C8.91021127,4.64260563 9.0334507,4.44542254 9.19366197,4.34683099 C9.87147887,3.90316901 10.6232394,3.70598592 11.3996479,3.70598592 Z M11.1778169,8.8943662 C11.6830986,8.8943662 12.1760563,8.72183099 12.4348592,8.37676056 L12.4348592,7.63732394 C12.1760563,7.29225352 11.6830986,7.11971831 11.1778169,7.11971831 C10.5616197,7.11971831 10.056338,7.45246479 10.056338,8.0193662 C10.056338,8.57394366 10.5616197,8.8943662 11.1778169,8.8943662 Z M0.65625,11.125 L13.34375,11.125 C13.7061869,11.125 14,11.4188131 14,11.78125 C14,12.1436869 13.7061869,12.4375 13.34375,12.4375 L0.65625,12.4375 C0.293813133,12.4375 4.43857149e-17,12.1436869 0,11.78125 C-4.43857149e-17,11.4188131 0.293813133,11.125 0.65625,11.125 Z"></path></svg></span>Name</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M4,3 C4,2.447715 4.447715,2 5,2 L12,2 C12.5523,2 13,2.447716 13,3 C13,3.55228 12.5523,4 12,4 L5,4 C4.447715,4 4,3.55228 4,3 Z M4,7 C4,6.447715 4.447715,6 5,6 L12,6 C12.5523,6 13,6.447716 13,7 C13,7.55228 12.5523,8 12,8 L5,8 C4.447715,8 4,7.55228 4,7 Z M4,11 C4,10.447715 4.447715,10 5,10 L12,10 C12.5523,10 13,10.447716 13,11 C13,11.55228 12.5523,12 12,12 L5,12 C4.447715,12 4,11.55228 4,11 Z M2,4 C1.44771525,4 1,3.55228475 1,3 C1,2.44771525 1.44771525,2 2,2 C2.55228475,2 3,2.44771525 3,3 C3,3.55228475 2.55228475,4 2,4 Z M2,8 C1.44771525,8 1,7.55228475 1,7 C1,6.44771525 1.44771525,6 2,6 C2.55228475,6 3,6.44771525 3,7 C3,7.55228475 2.55228475,8 2,8 Z M2,12 C1.44771525,12 1,11.5522847 1,11 C1,10.4477153 1.44771525,10 2,10 C2.55228475,10 3,10.4477153 3,11 C3,11.5522847 2.55228475,12 2,12 Z"></path></svg></span>IP</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>RAM</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>Notes</th></tr></thead><tbody><tr id="09196dd0-fcad-4eb3-ae7e-4ae20510dff4"><td class="cell-title"><a href="https://www.notion.so/DC1-09196dd0fcad4eb3ae7e4ae20510dff4">DC1</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.1 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="e6d699f3-2be6-445e-bdeb-2c526c9ad03c"><td class="cell-title"><a href="https://www.notion.so/DC2-e6d699f32be6445ebdeb2c526c9ad03c">DC2</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.2 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="8ce6a03b-34fc-4254-84b1-f82827a9eff2"><td class="cell-title"><a href="https://www.notion.so/LinDHCP-8ce6a03b34fc425484b1f82827a9eff2">LinDHCP</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.3 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="9b731544-ce29-4acd-9cf9-2cd58b7334c7"><td class="cell-title"><a href="https://www.notion.so/SAN-9b731544ce294acd9cf92cd58b7334c7">SAN</a></td><td class="cell-@cry"><span class="selected-value select-value-color-yellow">192.168.10.3 /29</span><span class="selected-value select-value-color-blue">192.168.3.4 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="fb2c28e6-d1f6-4d69-baf1-8ee5ace5d03b"><td class="cell-title"><a href="https://www.notion.so/HV1-fb2c28e6d1f64d69baf18ee5ace5d03b">HV1</a></td><td class="cell-@cry"><span class="selected-value select-value-color-yellow">192.168.10.1 /29</span><span class="selected-value select-value-color-red">192.168.20.1</span><span class="selected-value select-value-color-blue">192.168.3.5 /28</span><span class="selected-value select-value-color-green">192.168.30.1</span></td><td class="cell-]@DA"><span class="selected-value select-value-color-orange">4096</span></td><td class="cell-Ere|"><code>\\192.168.3.5\d$</code> (before CSV)
<code>\\192.168.3.5\c$\ClusterStorage\Volume1\</code></td></tr><tr id="27e64f14-d6fb-40f3-8cb7-403f2978955f"><td class="cell-title"><a href="https://www.notion.so/HV2-27e64f14d6fb40f38cb7403f2978955f">HV2</a></td><td class="cell-@cry"><span class="selected-value select-value-color-yellow">192.168.10.2 /29</span><span class="selected-value select-value-color-red">192.168.20.2</span><span class="selected-value select-value-color-blue">192.168.3.6 /28</span><span class="selected-value select-value-color-green">192.168.30.2</span></td><td class="cell-]@DA"><span class="selected-value select-value-color-orange">4096</span></td><td class="cell-Ere|"><code>\\192.168.3.6\d$</code> (before CSV)
<code>\\192.168.3.6\c$\ClusterStorage\Volume1\</code></td></tr><tr id="ad253182-2520-4a6f-a306-d6e60933ca3b"><td class="cell-title"><a href="https://www.notion.so/HV-Cluster-ad25318225204a6fa306d6e60933ca3b">HV-Cluster</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.7 /28</span></td><td class="cell-]@DA"></td><td class="cell-Ere|"></td></tr><tr id="76697d41-6ad0-4dfe-b149-55a1f6e2c424"><td class="cell-title"><a href="https://www.notion.so/FILE1-76697d416ad04dfeb14955a1f6e2c424">FILE1</a></td><td class="cell-@cry"><span class="selected-value select-value-color-red">192.168.20.3</span><span class="selected-value select-value-color-blue">192.168.3.8 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="cdbd0486-578b-427b-ad50-067733d76626"><td class="cell-title"><a href="https://www.notion.so/FILE2-cdbd0486578b427bad50067733d76626">FILE2</a></td><td class="cell-@cry"><span class="selected-value select-value-color-red">192.168.20.4</span><span class="selected-value select-value-color-blue">192.168.3.9 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="daed2436-951a-4fa0-be94-5a28a1356040"><td class="cell-title"><a href="https://www.notion.so/FS-Cluster-daed2436951a4fa0be945a28a1356040">FS-Cluster</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.10 /28</span></td><td class="cell-]@DA"></td><td class="cell-Ere|"></td></tr><tr id="d8047f80-0399-4e23-b6d3-6ac6e1037ce2"><td class="cell-title"><a href="https://www.notion.so/FS-d8047f8003994e23b6d36ac6e1037ce2">FS</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.11 /28</span></td><td class="cell-]@DA"></td><td class="cell-Ere|"><code>\\fs\Company_Data$</code> <code>\\fs\HomeDir$</code> </td></tr><tr id="84c23497-46be-4613-8495-605e5248731f"><td class="cell-title"><a href="https://www.notion.so/Thinkpad-Host-84c2349746be46138495605e5248731f">Thinkpad (Host)</a></td><td class="cell-@cry"><span class="selected-value select-value-color-gray">192.168.1.74 /24</span><span class="selected-value select-value-color-blue">192.168.3.13 /28</span></td><td class="cell-]@DA"><span class="selected-value select-value-color-green">16 GB (Host)</span></td><td class="cell-Ere|"></td></tr><tr id="487d2b5c-bf04-463f-9aa8-8b2fb0efd135"><td class="cell-title"><a href="https://www.notion.so/pfSense-487d2b5cbf04463f9aa88b2fb0efd135">pfSense</a></td><td class="cell-@cry"><span class="selected-value select-value-color-gray">192.168.1.10 /24</span><span class="selected-value select-value-color-blue">192.168.3.14 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr></tbody></table></div></div><h3 id="fdecf65e-34d1-437e-9a15-4ec53860b3da" class=""><details open=""><summary>cap.int Domain ADDS Diagram</summary></details></h3><div class="indented"><figure id="8663881f-0f1a-4ada-bb94-1bcba2b910e3" class="image"><a href="Capstone%2054e85/Cap-ActiveDirectoryHD.jpg"><img style="width:816px" src="Capstone%2054e85/Cap-ActiveDirectoryHD.jpg"/></a></figure></div><h3 id="8f7cfbeb-daff-43cb-92da-cf70be609278" class=""><details open=""><summary>Server File &amp; Storage Diagram</summary></details></h3><div class="indented"><figure id="abb43a1a-6dea-4968-bfba-c7f89249b1a3" class="image"><a href="Capstone%2054e85/Cap-StorageHD.jpg"><img style="width:816px" src="Capstone%2054e85/Cap-StorageHD.jpg"/></a></figure></div><h1 id="94673f1a-f10d-4137-8e25-36d355b29ae0" class="">1.0 Setup</h1><p id="12b8be8d-6e5b-4fee-8848-92a87ec55e1b" class="">The host <em>Thinkpad</em> is a Type I Hypervisor with 16GB RAM. Download all operating system files for the virtual machines (Windows Server 2019, pfSense, CentOS 8) and sysprep Windows Server 2019 Core to save time and hard disk space. Create the network switches to allow for a local area network (LAN), iSCSI, heartbeat (HB) for file servers, and live migration (LM) of virtual machines.</p><h2 id="3eeb072b-0e2e-44d6-a3b1-2a62238c50e4" class=""><details open=""><summary>1.0 Download ISO Files</summary></details></h2><div class="indented"><ul id="7b8e8e79-1c00-4889-abfd-cadd2ccb1d33" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2019">Windows Server 2019 ISO</a> for DC1, DC2, SAN, FILE1, FILE2, HV1, HV2 as Server Core</li></ul><ul id="2e5f6c34-b1e4-477d-8bdd-b4df1f4f65f0" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.pfsense.org/download/">pfSense </a>for NAT and Firewall</li></ul><ul id="d4f8a666-9e3a-4a8b-b59d-c0736ae20197" class="bulleted-list"><li style="list-style-type:disc"><a href="http://isoredirect.centos.org/centos/8-stream/isos/x86_64/">CentOS 8 Stream x86_64-latest-dvd1.iso</a> for the Linux DHCP server</li></ul></div><h2 id="96e3d83c-09e9-4183-b1b6-409b8929b68f" class=""><details open=""><summary>1.2 Sysprep Windows Server 2019 - Core</summary></details></h2><div class="indented"><ol type="1" id="133a5cea-42bd-4ecb-a108-70dfe98510ac" class="numbered-list" start="1"><li>In Hyper-V create a new VM named “ParentServer2019-Core” with 4096 MB of memory</li></ol><ol type="1" id="e2cd02fe-7588-459c-98f0-6f47c3b112f0" class="numbered-list" start="2"><li>Turn off the VM’s automatic checkpoints</li></ol><ol type="1" id="b6c80dd6-db0c-42ff-b4be-4d5c14be4b83" class="numbered-list" start="3"><li>Connect and start the VM</li></ol><ol type="1" id="b46cbe25-8192-44e7-adad-a18f4a112f77" class="numbered-list" start="4"><li>Install Windows Server Datacenter (without Desktop Experience) then reboot</li></ol><ol type="1" id="4044f4df-07f2-4c11-a0a4-65080b94bbeb" class="numbered-list" start="5"><li>Set a admin password</li></ol><ol type="1" id="78120360-7e88-4db6-b5b0-52cce1dee7d9" class="numbered-list" start="6"><li>Enter PS by typing <code>powershell</code></li></ol><ol type="1" id="20823827-3b8d-4278-aaa9-8e2c46da1e9a" class="numbered-list" start="7"><li>From PowerShell open the System Preparation Tool (Sysprep) with:<pre id="ad99b248-619c-40b1-85c8-4ad6389fb509" class="code code-wrap"><code>cd C:\Windows\System32\Sysprep\
ls
.\sysprep.exe</code></pre><figure id="b49618fa-b4dc-407a-accc-c9903d46880f" class="image"><a href="Capstone%2054e85/Untitled.png"><img style="width:480px" src="Capstone%2054e85/Untitled.png"/></a></figure></li></ol><ol type="1" id="d00f701d-c1c0-4ac1-a814-4cf3440bcc36" class="numbered-list" start="8"><li>Set SysPrep to the following:<ul id="b851c803-41c1-429e-bedd-50d27776aa7a" class="bulleted-list"><li style="list-style-type:disc">System Cleanup Action: <strong>Enter System Audit Mode</strong></li></ul><ul id="0a856bc2-f7d9-435f-a638-c535e4ec6b09" class="bulleted-list"><li style="list-style-type:disc">Generalize: <strong>unchecked</strong></li></ul><ul id="603352d1-1012-49be-9cbc-388073147518" class="bulleted-list"><li style="list-style-type:disc">Shut down options: <strong>Reboot</strong></li></ul></li></ol><ol type="1" id="968c1db6-8021-49ce-8974-66d137126934" class="numbered-list" start="9"><li>Install all updates by entering <code>sconfig</code> &gt; type<code>6</code><strong> </strong>To Download an Install Updates</li></ol><ol type="1" id="79420dc6-c8e2-4c93-a21c-66274afdbf4c" class="numbered-list" start="10"><li>Reboot the VM</li></ol><ol type="1" id="daf367c2-4c01-46bc-a9f7-40b182fbd01f" class="numbered-list" start="11"><li>Set SysPrep to the following:<ul id="9404292f-5689-4851-abd6-6cfa8eced765" class="bulleted-list"><li style="list-style-type:disc">System Cleanup Action: <strong>Enter System Out-of-Box Experience (OOBE)</strong></li></ul><ul id="3b58ac70-f81f-40eb-bcab-0006a62623da" class="bulleted-list"><li style="list-style-type:disc">Generalize: C<strong>hecked</strong></li></ul><ul id="93c4fc2b-5b5a-4790-8433-a02b638a6c6a" class="bulleted-list"><li style="list-style-type:disc">Shut down options: <strong>Shutdown</strong></li></ul></li></ol><ol type="1" id="a6096657-e605-43f7-93e1-e2ff69dd8a52" class="numbered-list" start="12"><li>Delete the <em>ParentServer2019-Core</em> VM from Hyper-V and make the vhdx file read only</li></ol><ol type="1" id="d6903d90-f3f5-4243-bc91-a564c69d2eee" class="numbered-list" start="13"><li>Create a VM on the host with the differencing disk by either:<ul id="0923d82e-22a4-4e65-9f2e-b994a2d83393" class="bulleted-list"><li style="list-style-type:disc">Option 1: In Hyper-V, create a new differencing hard disk &gt; create a new VM and attach the child vhdx</li></ul><ul id="d63e331e-dc9d-4473-9abc-2a0625a31298" class="bulleted-list"><li style="list-style-type:disc">Option 2: Use the following script:<pre id="40ba874a-52fe-48d6-b73a-0a9f73bd0559" class="code code-wrap"><code>#
# Create a VM with Windows Server 2019 (Core) with 2GB Static Memory on a Differencing Disk
# Connect to the LAN switch
# Disable automatic checkpoints &amp; enable VM Guest Services
#
$VMName = Read-Host -Prompt &#x27;Input the VM name&#x27;
$parentpath = &quot;V:\VMs\VHDX\ParentServer2019-Core.vhdx&quot;
$VHDPath = &quot;V:\VMs\VHDX\&quot; + $VMName + &quot;.vhdx&quot;

# Create VM with a differencing disk, update settings ,and start vm
New-VHD -ParentPath $parentpath -Path $VHDPath -Differencing
New-VM -Name $VMName -MemoryStartupBytes 2GB -VHDPath $VHDPath -Generation 2 -SwitchName LAN
Set-VM $VMName -AutomaticCheckpointsEnabled $false
Set-VMMemory $VMName -DynamicMemoryEnabled $false
Enable-VMIntegrationService -VMName $VMName -Name &quot;Guest Service Interface&quot;
Start-VM -Name $VMName
VMConnect.exe</code></pre></li></ul></li></ol></div><h2 id="65be1230-4894-4069-856f-3b56a6167b09" class=""><details open=""><summary>1.3 Create Virtual Switches in Hyper-V</summary></details></h2><div class="indented"><ol type="1" id="430b617d-3f19-4d0e-8a4b-e93a5c85eca9" class="numbered-list" start="1"><li>From the host’s (Thinkpad laptop) Hyper-V Manager &gt; click <strong>Virtual Switch Manager...</strong></li></ol><ol type="1" id="421b017e-f56c-40cb-a482-fc868d73a0db" class="numbered-list" start="2"><li>Click <strong>new virtual network switch</strong> &gt; and create the following:<table id="51717cc3-ea0b-48fc-b4b9-ce9c3f26bf3b" class="simple-table"><thead><tr id="b84d1286-ce50-4c04-9a3e-47fbe193113d"><th id="wF;g" class="simple-table-header">Switch Name</th><th id="dTWo" class="simple-table-header">Switch Type</th><th id=";Ryf" class="simple-table-header">Notes</th></tr></thead><tbody><tr id="4513a8bf-0cda-4d66-9340-2b223b2e8e62"><td id="wF;g">WAN</td><td id="dTWo">External</td><td id=";Ryf"></td></tr><tr id="86dd10fb-3130-4fcf-b277-6bf7f0f5696f"><td id="wF;g">LAN</td><td id="dTWo">Internal</td><td id=";Ryf">192.168.3.0 /28 → 14 hosts, 16 IPs  
192.168.3.1 - 192.168.3.14</td></tr><tr id="4f38d209-45de-40c8-89d6-a23b8bf316fb"><td id="wF;g">iSCSI</td><td id="dTWo">Private</td><td id=";Ryf">iSCSI SAN: 192.168.10.0 /29 → 6 hosts, 8 IPs  
192.168.10.1 - 192.168.10.6</td></tr><tr id="d6a22f23-7568-448c-ae3f-ef71ed03a85c"><td id="wF;g">HB</td><td id="dTWo">Private</td><td id=";Ryf">FS cluster heartbeat 192.168.20.0 /29 → 6 hosts, 8 IPs  
192.168.20.1 - 192.168.20.6</td></tr><tr id="62cdef05-8914-4d3e-b20b-b07129ccb480"><td id="wF;g">LM</td><td id="dTWo">Private</td><td id=";Ryf">Live Migration192.168.30.0 /30 →  2 hosts, 4 IPs  
192.168.30.1 - 192.168.30.2</td></tr></tbody></table><figure id="1f9419f4-f816-4df0-af0b-b6f65561d355" class="image"><a href="Capstone%2054e85/Untitled%201.png"><img style="width:432px" src="Capstone%2054e85/Untitled%201.png"/></a></figure></li></ol><ol type="1" id="772b0da7-0643-4ddd-b170-52e253338ded" class="numbered-list" start="3"><li>(Optional) Go to the host’s Network Connections &gt; view the adapter properties<figure id="94e530dd-4c64-4792-8b24-e6185ceff941" class="image"><a href="Capstone%2054e85/Untitled%202.png"><img style="width:768px" src="Capstone%2054e85/Untitled%202.png"/></a><figcaption>The host’s adapter became a Hyper-V Extensible virtual switch and the previous settings migrated to vEthernet WAN upon the external virtual switch creation</figcaption></figure></li></ol><ol type="1" id="d6a317b3-9efa-474d-807e-cec57b42e2a5" class="numbered-list" start="4"><li>(Optional) on the host, enter <code>ipconfig /all</code><figure id="58995d55-0a97-45be-ada5-4651bd74b938" class="image"><a href="Capstone%2054e85/Untitled%203.png"><img style="width:384px" src="Capstone%2054e85/Untitled%203.png"/></a></figure></li></ol></div><h2 id="dc76e2a8-f4f9-4b5f-8f75-f5d379d9f326" class=""><details open=""><summary>1.4 Set IP Addressing Values on Home Router (Optional)</summary></details></h2><div class="indented"><ol type="1" id="64698b9d-7351-4fd4-9dcf-03cc53db15d1" class="numbered-list" start="1"><li>From a web browser on the host machine go to <code>192.168.1.254</code> and login</li></ol><ol type="1" id="329423b8-060e-4289-a453-c13ec3404602" class="numbered-list" start="2"><li>Set a IP addressing range for DHCP and make note of the excluded range<figure id="c0ae75b7-5d66-490b-a1ca-c559a1e2e3ce" class="image"><a href="Capstone%2054e85/Untitled%204.png"><img style="width:336px" src="Capstone%2054e85/Untitled%204.png"/></a></figure></li></ol></div><h1 id="4790010e-e043-4383-a384-27be85c54c10" class="">2.0 pfSense NAT &amp; Firewall</h1><p id="1014656b-345c-435b-ac27-be3590af3f8d" class="">Create a OpenBSD NAT/Firewall Router with pfSense on the WAN network. The network <em>LAN</em> has double NAT as the physical home router is the first. Create firewall rules to block HV1, HV2, SAN and DC2 from accessing the internet. </p><h2 id="8cf50525-b728-448d-b2df-c6bbffbc4339" class=""><details open=""><summary>2.1 Create the VM and Install pfSense</summary></details></h2><div class="indented"><ol type="1" id="ea1a16b2-ecf8-49f7-b4d2-7a212dac400e" class="numbered-list" start="1"><li>Create a VM named “pfSense” with the following:<ul id="8b2e8791-68dd-423a-8158-8de2d9d7f9aa" class="bulleted-list"><li style="list-style-type:disc">Name: “pfSense”</li></ul><ul id="f991448d-abc9-4f41-97ce-1498dbc7b8bf" class="bulleted-list"><li style="list-style-type:disc">Generation: Generation 2</li></ul><ul id="770a01e2-8f24-4604-b815-903ca53223d5" class="bulleted-list"><li style="list-style-type:disc">Memory: 2048 MB Dynamic (this will be set to 512 MB Static after configuration is complete)</li></ul><ul id="d4cbc382-77ea-4988-9339-452d299a0d82" class="bulleted-list"><li style="list-style-type:disc">Network: WAN</li></ul><ul id="f71cf08c-4bbb-4a7d-ab39-14b3a06560be" class="bulleted-list"><li style="list-style-type:disc">Hard Disk: 40GB Dynamic Expanding</li></ul><ul id="fc2b087d-3c29-4b32-b61b-0bbf41810bb7" class="bulleted-list"><li style="list-style-type:disc">Operating System: pfSense.iso</li></ul><figure id="76d07dd1-5aa7-47e5-ba12-e114a8f107f5" class="image"><a href="Capstone%2054e85/Untitled%205.png"><img style="width:432px" src="Capstone%2054e85/Untitled%205.png"/></a></figure></li></ol><ol type="1" id="ab687169-e86c-4b26-af8e-75f096c6a8d0" class="numbered-list" start="2"><li>Right click the <strong>pfSense </strong>VM &gt; select <strong>Settings... &gt; </strong>Edit the following:<ul id="6138e3a9-02f0-4180-b920-da3f72a02c99" class="bulleted-list"><li style="list-style-type:disc">Security: Uncheck <strong>Enable Secure Boot</strong></li></ul><ul id="57b5ec98-8748-4e86-b253-77490da090d5" class="bulleted-list"><li style="list-style-type:disc">Checkpoints: Uncheck <strong>Use Automatic Checkpoints</strong></li></ul><ul id="fda7217f-02d5-413e-a34d-617f238ba9ed" class="bulleted-list"><li style="list-style-type:disc">Click <strong>Add Hardware</strong> &gt; <strong>Network Adapter</strong> &gt; Virtual Switch: select <strong>LAN</strong></li></ul></li></ol><ol type="1" id="b7229e35-53a6-4110-86dd-001321b113cc" class="numbered-list" start="3"><li>In Hyper-V right-click on the <strong>pfSense </strong>VM &gt; Connect... &gt; click <strong>Start</strong><ul id="6b51611b-69ef-40fa-b4a0-6e4d74965422" class="bulleted-list"><li style="list-style-type:disc">Use the arrow keys to navigate, SPACE to toggle and ENTER to select</li></ul></li></ol><ol type="1" id="88a40b79-08b9-45dd-b5b5-a8ec2c556ba1" class="numbered-list" start="4"><li>Complete the installation with the following:<ul id="875f9169-9923-4115-807b-8742a3c71482" class="bulleted-list"><li style="list-style-type:disc">Copyright and Trademark Notice &gt; <strong>Accept</strong></li></ul><ul id="05851677-597d-48a9-99d9-2790c64b5d37" class="bulleted-list"><li style="list-style-type:disc">Welcome to pfSense: Select <strong>Install</strong> &gt; <strong>Install pfSense </strong>&gt; <strong>OK</strong></li></ul><ul id="cfc17047-7b10-440e-973f-602a3df1414a" class="bulleted-list"><li style="list-style-type:disc">Keymap Selection: Leave the default option <strong>Continue with default keymap</strong> as is&gt; <strong>Select</strong></li></ul><ul id="a9d3b7f3-4f16-4736-aefa-b601d6dddc05" class="bulleted-list"><li style="list-style-type:disc">Partitioning: Leave the default <strong>Auto (ZFS)</strong> Guided Root-on-ZFS selected &gt; <strong>OK</strong></li></ul><ul id="3aabbdcd-263e-4743-b704-6a76ddc1f5ef" class="bulleted-list"><li style="list-style-type:disc">Configure options: Install Proceed with Installation &gt; <strong>Select</strong></li></ul><ul id="184aa70a-c521-43f1-8d06-e3b50968deed" class="bulleted-list"><li style="list-style-type:disc">Select Virtual Device Type: Select <strong>Stripe - No Redundancy</strong> &gt; <strong>OK</strong></li></ul><ul id="2103649f-7911-4ae2-a64e-545a7ce126ab" class="bulleted-list"><li style="list-style-type:disc">ZFS Configuration: Press the <strong>Space Bar</strong> to select the Msft Virtual Disk &gt; <strong>OK</strong></li></ul><ul id="2beb921d-7aae-4c57-88e7-708174d170aa" class="bulleted-list"><li style="list-style-type:disc">Select <strong>YES</strong> when asked to destroy the da0 disk</li></ul><ul id="de94c486-ca8e-47e8-96a9-cec1d91bdd9f" class="bulleted-list"><li style="list-style-type:disc">The distribution files will extract and install<figure id="12cb2a9b-492f-4bf1-a853-54bc4b479e70" class="image"><a href="Capstone%2054e85/Untitled%206.png"><img style="width:624px" src="Capstone%2054e85/Untitled%206.png"/></a></figure></li></ul></li></ol><ol type="1" id="c015e912-adc5-40ff-899f-fa4f3c030582" class="numbered-list" start="5"><li>When asked to make any final manual modifications when the installation is finished, select <strong>YES</strong></li></ol><ol type="1" id="19b52ff5-5664-4016-bf29-66cfe3634150" class="numbered-list" start="6"><li>From the shell type <code>poweroff</code><figure id="723af6d0-bd94-40c2-85ce-d2ecfb670d24" class="image"><a href="Capstone%2054e85/Untitled%207.png"><img style="width:672px" src="Capstone%2054e85/Untitled%207.png"/></a><figcaption><code>poweroff </code>stops the VM from rebooting off the iso file in a continuous loop</figcaption></figure></li></ol><ol type="1" id="0d166f8c-b985-43b4-9a93-1643f92f272f" class="numbered-list" start="7"><li>Open the Hyper-V settings for <em>pfSense</em></li></ol><ol type="1" id="7603c241-49ed-4092-b988-9c0f4d7f0961" class="numbered-list" start="8"><li>Click <strong>Firmware</strong> &gt; Select the <strong>Hard Drive </strong><em>pfSense.vhdx</em> and move up to become first in the boot order</li></ol><ol type="1" id="6cb3d702-e80e-4ef7-b314-dd20d96971b4" class="numbered-list" start="9"><li>Click <strong>SCSI Controller</strong> &gt; <strong>DVD Drive</strong> &gt; Remove the pfsense.iso file</li></ol><ol type="1" id="7dc3a2aa-e10b-4fb3-b1e9-99d931c1303e" class="numbered-list" start="10"><li>Expand the <strong>WAN</strong> Network Adapter &gt; Click <strong>Advanced Features</strong> &gt; View the MAC Address</li></ol><ol type="1" id="ea00956b-1c8b-46f5-9676-1a7dd88ba018" class="numbered-list" start="11"><li>Expand the <strong>LAN</strong> Network Adapter &gt; Click <strong>Advanced Features</strong> &gt; View the MAC Address <figure id="72591dcd-5a7e-4fb4-bd55-ba8ce257104b" class="image"><a href="Capstone%2054e85/Untitled%208.png"><img style="width:720px" src="Capstone%2054e85/Untitled%208.png"/></a></figure></li></ol></div><h2 id="59f36fc7-2c76-4029-8e9d-d6fac7628159" class=""><details open=""><summary>2.2 Configure WAN and LAN Interfaces on pfSense</summary></details></h2><div class="indented"><ol type="1" id="d4ab7fd8-2259-4414-a83c-8e49a41b1fba" class="numbered-list" start="1"><li>Start the <em>pfSense </em>VM</li></ol><ol type="1" id="8cec0ed0-85b7-4e89-8a45-e1685e7c5f0f" class="numbered-list" start="2"><li>View the valid interfaces <code>hn0</code> and <code>hn1</code> and notice the last hexadecimal digit (hn0 = 03 → WAN network adapter)</li></ol><ol type="1" id="69af9508-1811-4209-874e-0eb13d9931d6" class="numbered-list" start="3"><li>Configure the interface’s for WAN <code>hn0</code> and LAN <code>hn1</code> with the following:<ul id="d73d20c2-253a-4d9e-a2db-fffb093e99df" class="bulleted-list"><li style="list-style-type:disc">Do VLANS need to be setup now? &gt; <code>n</code></li></ul><ul id="c37beb8f-0313-4e0d-95d9-29b1854f012b" class="bulleted-list"><li style="list-style-type:disc">Enter the WAN interface name &gt; <code>hn0</code></li></ul><ul id="8c0102b0-3294-4484-96ea-d3a5b2ba1aa6" class="bulleted-list"><li style="list-style-type:disc">Enter the LAN interface name &gt; <code>hn1</code></li></ul><ul id="57e646dc-fb93-414a-a584-13e7008ca3ac" class="bulleted-list"><li style="list-style-type:disc">Do you want to proceed? &gt; <code>y</code> to write configuration<figure id="73a3f6c9-6699-48dc-af12-d84052edf328" class="image"><a href="Capstone%2054e85/Untitled%209.png"><img style="width:432px" src="Capstone%2054e85/Untitled%209.png"/></a></figure></li></ul></li></ol><ol type="1" id="b5bb4285-7428-4042-a3d0-f8deacb46d2a" class="numbered-list" start="4"><li>Set the LAN interface IP to <code>192.168.3.14 /28</code> by selecting option <code>2</code> and entering the following:<ul id="e1618b8c-9f74-4cab-bc24-f562871e32c6" class="bulleted-list"><li style="list-style-type:disc">Enter the number of the interface you wish to configure &gt; <code>2</code></li></ul><ul id="0cb8ecc4-13e9-4a75-b695-03001cd835b4" class="bulleted-list"><li style="list-style-type:disc">Enter the new LAN IPv4 address &gt; <code>192.168.3.14</code></li></ul><ul id="66c0a6a2-ecff-4645-b96b-dc09ec6b2dda" class="bulleted-list"><li style="list-style-type:disc">Enter the new LAN IPv4 subnet bit count &gt; <code>28</code></li></ul><ul id="665bb8c7-da89-440e-82b3-561a7c73c883" class="bulleted-list"><li style="list-style-type:disc">For a WAN, enter the new LAN IPv4 upstream gateway address &gt; press <strong>ENTER </strong>for none</li></ul><ul id="0807647d-5872-4767-857c-4c2f14f655f5" class="bulleted-list"><li style="list-style-type:disc">Enter the new LAN IPv6 address &gt; press <strong>ENTER </strong>for none</li></ul><ul id="32c50608-2ef0-436a-bbae-95341d2e7ff6" class="bulleted-list"><li style="list-style-type:disc">Do you want to enable the DHCP server on LAN? &gt; <code>y</code></li></ul><ul id="0577dfc9-9d6f-4649-9005-1487e09b08ff" class="bulleted-list"><li style="list-style-type:disc">Do you want to revert to HTTP as the webConfigurator protocol? &gt; <code>y</code><figure id="32e768dc-5f85-4e61-9572-6283b7e0a11f" class="image"><a href="Capstone%2054e85/Untitled%2010.png"><img style="width:480px" src="Capstone%2054e85/Untitled%2010.png"/></a></figure></li></ul></li></ol><ol type="1" id="d2fa125d-1d4b-444f-aab5-ce8f83f5bfbf" class="numbered-list" start="5"><li>(Optional) Set the WAN interface IP to <code>192.168.1.10 /24</code> by selecting option <code>2</code> and entering the following:<ul id="062ac5ba-26c8-44e4-ae6f-ea3a9acc8757" class="bulleted-list"><li style="list-style-type:disc">Enter the number of the interface you wish to configure &gt; <code>1</code></li></ul><ul id="38347c5c-6d32-40bd-9c61-2dcc591c6039" class="bulleted-list"><li style="list-style-type:disc">Enter the new LAN IPv4 address &gt; <code>192.168.1.10</code></li></ul><ul id="20041873-407d-4624-b4e9-7739c7feab38" class="bulleted-list"><li style="list-style-type:disc">Enter the new LAN IPv4 subnet bit count &gt; <code>24</code></li></ul><ul id="9a208428-5f64-43bb-8e50-ba1cd23c6d29" class="bulleted-list"><li style="list-style-type:disc">For a WAN, enter the new LAN IPv4 upstream gateway address &gt; <code>192.168.1.254</code></li></ul><ul id="d3004951-5f93-4cd6-9269-9c8e92d7be89" class="bulleted-list"><li style="list-style-type:disc">Enter the new LAN IPv6 address &gt; press <strong>ENTER </strong>for none<figure id="b865ba23-e3f7-4fd9-bf6e-0ba062d15c44" class="image"><a href="Capstone%2054e85/Untitled%2011.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2011.png"/></a></figure></li></ul></li></ol></div><h2 id="dd1f7c03-6ddc-4d7b-8669-9c644d1350ba" class=""><details open=""><summary>2.3 Test Networking</summary></details></h2><div class="indented"><ol type="1" id="ac95e6fe-c42a-4728-8068-bc3173f5e327" class="numbered-list" start="1"><li>On the <em>Thinkpad </em>host, go to the vEthernet (LAN) network adapter &gt; Properties &gt; IPv4</li></ol><ol type="1" id="9dc203de-dddb-4c67-bb67-88237ee0c6e9" class="numbered-list" start="2"><li>Set a static IP of <code>192.168.3.13</code> with a subnet mask <code>255.255.255.240</code><figure id="945c5138-6b7b-4001-ab91-299a49568092" class="image"><a href="Capstone%2054e85/Untitled%2012.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2012.png"/></a></figure></li></ol><ol type="1" id="207f7a71-de30-4465-8098-cf46b9d4d0ad" class="numbered-list" start="3"><li>From <em>pfSense</em>, selecting option <code>7</code> to ping the following hosts:<ul id="c0aa4abb-b54e-465e-a9f6-c8be94e85c66" class="bulleted-list"><li style="list-style-type:disc"><code>google.ca</code><figure id="1daaf883-0e14-4f1a-b895-4eada2b01d2d" class="image"><a href="Capstone%2054e85/Untitled%2013.png"><img style="width:480px" src="Capstone%2054e85/Untitled%2013.png"/></a></figure></li></ul><ul id="724e8b29-a380-4986-997f-9e974858edfd" class="bulleted-list"><li style="list-style-type:disc"><em>Thinkpad </em>Host WAN<code>192.168.1.74</code> &amp; LAN <code>192.168.3.13</code><figure id="355074f3-62c9-44fb-a6c1-fb5b1613022d" class="image"><a href="Capstone%2054e85/Untitled%2014.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2014.png"/></a><figcaption>WAN</figcaption></figure><figure id="6cee3b61-81ce-4916-8a3e-0ff0eae6198d" class="image"><a href="Capstone%2054e85/Untitled%2015.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2015.png"/></a><figcaption>LAN</figcaption></figure></li></ul></li></ol><ol type="1" id="46df68a8-ab88-4828-a9bb-72a752c08c0d" class="numbered-list" start="4"><li>From Host <em>Thinkpad</em> , <code>ping 192.168.3.14</code> the LAN interface on <em>pfSense</em><figure id="a8661f04-32c7-43ff-84cd-36ddddc243f5" class="image"><a href="Capstone%2054e85/Untitled%2016.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2016.png"/></a></figure></li></ol></div><h2 id="bdff7a05-6909-4138-bc7c-618e72cadd88" class=""><details open=""><summary>2.4 Mange pfSense from the web GUI</summary></details></h2><div class="indented"><ol type="1" id="cc7c8c1c-626d-44b7-b339-2f57c300b39c" class="numbered-list" start="1"><li>From the host <em>Thinkpad, </em>go to a web browser and enter <code>192.168.3.14</code> in the address bar</li></ol><ol type="1" id="bfc44102-2fd3-4a26-a34c-a19e44e6c775" class="numbered-list" start="2"><li>Enter the default pfSense credentials to login<ul id="59c86d70-65a5-4f69-bfc9-6a0347277824" class="bulleted-list"><li style="list-style-type:disc">Username: <code>admin</code></li></ul><ul id="208b1f7a-dab2-4f90-b5fd-87d740d39a1c" class="bulleted-list"><li style="list-style-type:disc">Password: <code>pfsense</code></li></ul></li></ol><ol type="1" id="871e5e8a-a245-4662-a8ee-74ef2d2d820a" class="numbered-list" start="3"><li>Complete the 9 steps in the Wizard / pfSense Setup<ul id="a71ac651-3231-4de9-8c0a-9c66bd99a415" class="bulleted-list"><li style="list-style-type:disc">Step 1 - Netgate Global support: &gt; Click Next</li></ul><ul id="4b0a0bff-9b80-4c98-a5c6-218f6a465f81" class="bulleted-list"><li style="list-style-type:disc">Step 2 - General Information: Leave the hostname, domain, and DNS settings as is &gt; Next</li></ul><ul id="e3a866e7-79dd-43d1-b458-dd5f6dfb0a22" class="bulleted-list"><li style="list-style-type:disc">Step 3 - Time Server Information: Select timezone <strong>US/Pacific</strong> &gt; Next</li></ul><ul id="cc7ab31f-2fe5-4ffa-b30e-84484eb637aa" class="bulleted-list"><li style="list-style-type:disc">Step 4 - Configure WAN Interface: Leave DHCP Selected Type as Static &gt; Next</li></ul><ul id="54767f18-8d89-4570-8201-dd69ca25dece" class="bulleted-list"><li style="list-style-type:disc">Step 5 - Configure LAN interface: Leave the LAN IP address and subnet mask as <code>192.168.3.14 /28</code> &gt; Next</li></ul><ul id="006fb53e-2018-4e79-ac9e-f3bcf28ec467" class="bulleted-list"><li style="list-style-type:disc">Step 6 - Set Admin webGUI Password: Enter<code>Pa$$w0rd</code> as the new admin password &gt; Next</li></ul><ul id="ce6c0539-2e7f-4062-8675-07cc376ae712" class="bulleted-list"><li style="list-style-type:disc">Step 7 - Reload Configuration: Click <strong>Reload</strong></li></ul><ul id="8f682523-eb8f-4545-b1f4-e9c930be06ee" class="bulleted-list"><li style="list-style-type:disc">Step 8 - Reload in progress: Wait for the reload to finish</li></ul><ul id="dcbec576-35d4-46dc-afe1-50822573ac43" class="bulleted-list"><li style="list-style-type:disc">Step 9 - Wizard completed: Click <strong>Check for Updates</strong></li></ul><figure id="fdcd6d11-b43c-4ada-98eb-4171b88ce71f" class="image"><a href="Capstone%2054e85/Untitled%2017.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2017.png"/></a></figure></li></ol><ol type="1" id="a389c11b-2253-4335-9dba-eefef69f0fd5" class="numbered-list" start="4"><li>View the pfSense dashboard<figure id="ab6004d0-1f05-446e-892c-f9a7c93ff3f2" class="image"><a href="Capstone%2054e85/Untitled%2018.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2018.png"/></a></figure></li></ol></div><h2 id="d2547431-a01f-4d84-912b-460c95385ad2" class=""><details open=""><summary>2.5 Configure Firewall Rules</summary></details></h2><div class="indented"><ol type="1" id="f3cec3f4-e51f-4720-abc0-928af1dd22d8" class="numbered-list" start="1"><li>From the pfSense Web GUI go to the <strong>Firewall</strong> tab &gt; click <strong>Aliases</strong></li></ol><ol type="1" id="8ef8c715-3a8e-40f3-a521-5535862f1566" class="numbered-list" start="2"><li>Click <strong>New</strong> to make a alias for both nested Hyper-V Servers<ul id="d96ae6e0-42c4-41fd-8645-04b18514f28d" class="bulleted-list"><li style="list-style-type:disc">Name: ‘HV’</li></ul><ul id="5726618e-d792-4e09-b4c5-2f52c347c6e8" class="bulleted-list"><li style="list-style-type:disc">Type: Select <strong>Hosts</strong></li></ul><ul id="2fafe73a-0968-4f4d-93e3-d5b71f757c59" class="bulleted-list"><li style="list-style-type:disc">IP: <code>192.168.3.5</code> and <code>192.168.3.6</code></li></ul><ul id="8096e380-2fa9-46e5-a462-3980d7966ffd" class="bulleted-list"><li style="list-style-type:disc">Click <strong>Save</strong></li></ul></li></ol><ol type="1" id="aff0169b-d286-4dde-8b83-c8d7b256529e" class="numbered-list" start="3"><li>Repeat for <em>SAN </em>192.168.3.4 &amp; <em>DC2 </em>192.168.3.2<figure id="fc51fb46-b7a6-4cd4-be9d-276ebb0f3c06" class="image"><a href="Capstone%2054e85/Untitled%2019.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2019.png"/></a></figure></li></ol><ol type="1" id="a99dbaaa-e879-4dee-a937-f0179cfe1217" class="numbered-list" start="4"><li>Go to <strong>Firewall</strong> &gt; <strong>Rules </strong>&gt; click <strong>LAN</strong></li></ol><ol type="1" id="bf5c4db2-fc1f-49f8-a991-867f43fe853e" class="numbered-list" start="5"><li>Click <strong>Add</strong> to create a new firewall rule to block the alias <em>HV</em> from reaching the internet with the following:<ul id="5fd1147f-15cf-4ff4-8d36-f14faf0b45a4" class="bulleted-list"><li style="list-style-type:disc">Action: Select <strong>Block</strong></li></ul><ul id="bf5823e8-ccc2-4759-826d-95cbcf2f2d9c" class="bulleted-list"><li style="list-style-type:disc">Protocol: Select <strong>Any</strong></li></ul><ul id="22efaeaf-5d8e-455a-9a3f-69890034ecf6" class="bulleted-list"><li style="list-style-type:disc">Address Family: <strong>IPv4+IPv6</strong></li></ul><ul id="f1511939-771d-4845-8b6e-49af211ce218" class="bulleted-list"><li style="list-style-type:disc">Source: Select <strong>Single host or alias </strong>&gt; <strong>HV</strong></li></ul><ul id="ea6f50f2-442b-4b28-8cea-e7a1de3caf48" class="bulleted-list"><li style="list-style-type:disc">Destination: Select <strong>Any</strong></li></ul><ul id="9c2d0d20-bb20-4d07-acd4-5bda1060c796" class="bulleted-list"><li style="list-style-type:disc">Click <strong>Save</strong><figure id="fc88930c-94ab-400a-9fff-02d3f288516d" class="image"><a href="Capstone%2054e85/Untitled%2020.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2020.png"/></a></figure></li></ul></li></ol><ol type="1" id="51d90070-cad6-4ae0-a889-72640461a786" class="numbered-list" start="6"><li>Repeat for Alias <em>SAN </em>and <em>DC2</em><figure id="30e51b61-cba5-4d18-b5cc-756f5acead6c" class="image"><a href="Capstone%2054e85/Untitled%2021.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2021.png"/></a><figcaption>End result when VMs are created and the firewall rules are enabled</figcaption></figure></li></ol><ol type="1" id="3f7334f6-cdfa-4993-8fa5-71e9097ddb7c" class="numbered-list" start="7"><li>Disable all of the firewall rules while the network infrastructure is being created</li></ol><ol type="1" id="acfc981b-dc21-4305-ae15-c217e2bf1a70" class="numbered-list" start="8"><li>In Hyper-V, set the RAM for <em>pfSense </em>to 512 MB Static</li></ol><ol type="1" id="a8660f06-22ff-4e93-bde3-56e17ed612fc" class="numbered-list" start="9"><li>⏲ Take a checkpoint of <em>pfSense</em> named “FW configuration complete”</li></ol></div><h1 id="36614f0e-c919-4a9d-a476-fd2c2fc8880d" class="">3.0 Domain Controller</h1><p id="cebf5f0c-14de-4f38-85f7-498ae11a8138" class="">In Windows Server 2019 core, create a DC and a domain named “cap.int” with all the data stored on a secondary disk. Make a domain administrator account aidan@cap.int which will be used for the rest of the project.</p><h2 id="8f0f1a9c-558e-490c-bd17-01238ce83a6f" class=""><details open=""><summary>3.1 Create VM DC1</summary></details></h2><div class="indented"><ol type="1" id="51605135-3361-41ce-996e-6478035f2590" class="numbered-list" start="1"><li>On the host <em>Thinkpad</em> and open PowerShell as an administrator and run the script below to create a VM with the following properties:<ul id="aa97562b-d522-486d-ab60-2b9ccb784d92" class="bulleted-list"><li style="list-style-type:disc">Name: DC1</li></ul><ul id="bd9915e9-c666-4be2-8647-2d03068264b7" class="bulleted-list"><li style="list-style-type:disc">Generation: Generation 2</li></ul><ul id="291b722a-f77f-4626-be41-ac884a1834f0" class="bulleted-list"><li style="list-style-type:disc">Memory: 2048 MB Static (this will be set to 512 MB Static after configuration is complete)</li></ul><ul id="6a3a53e5-9063-43de-95e4-5682a63796e3" class="bulleted-list"><li style="list-style-type:disc">Network: LAN</li></ul><ul id="99c5ef25-5a2a-40ae-910e-a050756bf977" class="bulleted-list"><li style="list-style-type:disc">Hard Disk: Differencing disk to <em>ParentServer2019-Core.vhdx</em></li></ul><ul id="e7c7d1ec-884c-4706-97c1-98d49ca1af5e" class="bulleted-list"><li style="list-style-type:disc">Operating System: Windows Server 2019 (Core)</li></ul><ul id="445ed555-0fb6-473e-8916-3ce5299d986e" class="bulleted-list"><li style="list-style-type:disc">Automatic Checkpoints: Disabled</li></ul><ul id="6137dd70-988f-4668-8948-e613039673c1" class="bulleted-list"><li style="list-style-type:disc">VM Guest Services: Enabled</li></ul><pre id="eee4bd72-c768-4bd9-a000-24f9ad80a7b5" class="code code-wrap"><code>#
# Create a VM with Windows Server 2019 (Core) with 2GB Static Memory on a Differencing Disk
# Connect to the LAN switch
# Disable automatic checkpoints &amp; enable VM Guest Services
#
$VMName = Read-Host -Prompt &#x27;Input the VM name&#x27;
$parentpath = &quot;V:\VMs\VHDX\ParentServer2019-Core.vhdx&quot;
$VHDPath = &quot;V:\VMs\VHDX\&quot; + $VMName + &quot;.vhdx&quot;

# Create VM with a differencing disk, update settings ,and start vm
New-VHD -ParentPath $parentpath -Path $VHDPath -Differencing
New-VM -Name $VMName -MemoryStartupBytes 2GB -VHDPath $VHDPath -Generation 2 -SwitchName LAN
Set-VM $VMName -AutomaticCheckpointsEnabled $false
Set-VMMemory $VMName -DynamicMemoryEnabled $false
Enable-VMIntegrationService -VMName $VMName -Name &quot;Guest Service Interface&quot;
Start-VM -Name $VMName
VMConnect.exe</code></pre><figure id="afe58001-9fc3-4cc1-9d70-d594a4b375ad" class="image"><a href="Capstone%2054e85/Untitled%2022.png"><img style="width:480px" src="Capstone%2054e85/Untitled%2022.png"/></a></figure></li></ol><ol type="1" id="4310abdb-b5aa-4200-bce8-206c918a69e3" class="numbered-list" start="2"><li>Enter <code>Pa$$w0rd</code> as the new credentials for Administrator</li></ol></div><h2 id="0e79024a-4d04-4292-8f88-fc6ee519db12" class=""><details open=""><summary>3.2 Server Configuration with sconfig </summary></details></h2><div class="indented"><ol type="1" id="78f1f400-545e-4c32-963e-2f66bf196fa9" class="numbered-list" start="1"><li>On <em>DC1</em> open Server Configuration by entering<code>sconfig</code><figure id="09938354-dae3-4d30-a419-b4541d26493b" class="image"><a href="Capstone%2054e85/Untitled%2023.png"><img style="width:432px" src="Capstone%2054e85/Untitled%2023.png"/></a></figure></li></ol><ol type="1" id="8d801232-160e-4c70-91ad-7803e7b1978a" class="numbered-list" start="2"><li>Select <code>8</code>to edit Network Settings</li></ol><ol type="1" id="8b167b19-be08-49df-ba64-43a4776b26dc" class="numbered-list" start="3"><li>Select option <code>1</code> to Set Network Adapter Address<ul id="9638e9a8-c7ac-4c0e-81c1-c546a57618e0" class="bulleted-list"><li style="list-style-type:disc">Select: <code>s</code> for Static IP</li></ul><ul id="f53678c8-38ca-442b-8cdb-1cb5bfec1bcd" class="bulleted-list"><li style="list-style-type:disc">Enter Static IP address: <code>192.168.3.1</code></li></ul><ul id="9a97ffc2-180b-430a-8cd1-5666d2c35506" class="bulleted-list"><li style="list-style-type:disc">Enter Subnet Mask: <code>255.255.255.240</code></li></ul><ul id="8457f111-8c22-4b17-b9f8-844188f07aba" class="bulleted-list"><li style="list-style-type:disc">Enter Default Gateway: <code>192.168.1.14</code><figure id="bfaf8a51-6ea2-4840-ba52-f07076cd8abd" class="image"><a href="Capstone%2054e85/Untitled%2024.png"><img style="width:384px" src="Capstone%2054e85/Untitled%2024.png"/></a></figure></li></ul></li></ol><ol type="1" id="b354fe0d-4140-4000-97bd-23b9c36fe8ab" class="numbered-list" start="4"><li>From the Network Adapter Settings options, select option <code>2</code> to set DNS Servers &gt; enter new preferred DNS server: <code>8.8.8.8</code></li></ol><ol type="1" id="ccb5e2e6-ecc3-472f-bd8f-543e9744390f" class="numbered-list" start="5"><li>From the Server Configuration options, select option <code>15</code> to Exit to Command Line</li></ol><ol type="1" id="2bbdf70f-6062-48f6-b805-b3f2c458ec8d" class="numbered-list" start="6"><li>Type<code>powershell</code> </li></ol><ol type="1" id="42cd6696-8d96-4a72-9db2-0b74d1656a13" class="numbered-list" start="7"><li>Test network connectivity with:<ul id="e3bf2a6a-3976-4c48-b558-5d2c806a3fb9" class="bulleted-list"><li style="list-style-type:disc"><code>ping google.ca</code></li></ul><ul id="68f9a9db-8f1e-4ebb-b5eb-c454182c47d2" class="bulleted-list"><li style="list-style-type:disc"><code>ping 192.168.3.14</code> (<em>pfSense</em>)</li></ul><ul id="661185d3-2e2c-49bc-b4c7-f2c7bb39401e" class="bulleted-list"><li style="list-style-type:disc"><code>ping 192.168.3.13</code> (<em>Thinkpad </em>Host)<figure id="768824a0-8fcc-4c3c-8565-5401cd90527c" class="image"><a href="Capstone%2054e85/Untitled%2025.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2025.png"/></a></figure></li></ul><ul id="e8256a3b-bc25-45b2-a661-d61da2b0e864" class="bulleted-list"><li style="list-style-type:disc"><code>tracert google.ca</code><figure id="ad7acd60-e70d-4d1f-8e29-3ff8bed91507" class="image"><a href="Capstone%2054e85/Untitled%2026.png"><img style="width:432px" src="Capstone%2054e85/Untitled%2026.png"/></a></figure></li></ul></li></ol><ol type="1" id="b86d7c0b-c934-48d1-a204-03dc3e639191" class="numbered-list" start="8"><li>Return to Server Configuration with <code>sconfig</code></li></ol><ol type="1" id="a6281413-745d-4845-bc43-3efcae93010c" class="numbered-list" start="9"><li>Download and install updates by selecting option <code>6</code> <ul id="ed1ccb7d-e4b5-4f73-83fe-db9ea2b96a3c" class="bulleted-list"><li style="list-style-type:disc">Search for all updates with <code>A</code> </li></ul><ul id="444d13ef-e6a8-49d2-89af-09e0d9feb42f" class="bulleted-list"><li style="list-style-type:disc">Install all updates with <code>A</code></li></ul><figure id="c14b1da3-a0ad-4029-9c7a-975a55ae14e9" class="image"><a href="Capstone%2054e85/Untitled%2027.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2027.png"/></a></figure></li></ol><ol type="1" id="0e4dbcfe-8a8f-400a-9cdc-40c7d3ffd09f" class="numbered-list" start="10"><li>From Server Configuration, select option <code>11</code> for Windows Activation<ul id="f1c01ee2-f872-47f5-987c-ea4e1d781198" class="bulleted-list"><li style="list-style-type:disc">Select <code>2</code> to Activate Windows</li></ul><ul id="2ac2b6bd-0788-4467-b6db-0c98a936f429" class="bulleted-list"><li style="list-style-type:disc">Select <code>1</code> to Display License Info</li></ul><figure id="c17d859d-1f50-4b57-89e3-f78b37dc97d1" class="image"><a href="Capstone%2054e85/Untitled%2028.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2028.png"/></a><figcaption>Server Trial gives 180 days</figcaption></figure></li></ol><ol type="1" id="c0f5628f-7153-47fa-9814-e0f603efc543" class="numbered-list" start="11"><li>From Server Configuration, select option <code>2</code> to change the computer name to “DC1”<figure id="69e2818a-4053-4eae-a55a-5dfbb6825c0b" class="image"><a href="Capstone%2054e85/Untitled%2029.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2029.png"/></a></figure></li></ol><ol type="1" id="9d92ce3a-1361-41a1-addb-deb3f99484c2" class="numbered-list" start="12"><li>Restart the server with option <code>13</code> to apply the name change</li></ol></div><h2 id="2f657255-2ffd-4cc9-a8a2-69593004566f" class=""><details open=""><summary>3.3 Configuration with PowerShell</summary></details></h2><div class="indented"><ol type="1" id="db091742-2281-4431-b7ef-ffad3670efb7" class="numbered-list" start="1"><li>Enter PowerShell on <em>DC1</em> with <code>powershell</code></li></ol><ol type="1" id="3c4c1c0c-5f9c-4682-9e5d-9126899c9f64" class="numbered-list" start="2"><li>Rename the local user account <em>Administrator</em> to “_sysadmin” with the following:<pre id="ef612539-e925-4185-a537-cdf5fbdd770e" class="code"><code>Get-LocalUser
Rename-LocalUser -Name &quot;Administrator&quot; -NewName &quot;_sysadmin&quot;
#View changes
Get-LocalUser</code></pre><figure id="b89c2153-4725-42e8-bb54-025d90e8b84f" class="image"><a href="Capstone%2054e85/Untitled%2030.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2030.png"/></a></figure></li></ol><ol type="1" id="9d45b7b3-2ffc-48ff-a4aa-c92779fbfb7d" class="numbered-list" start="3"><li>Log off as user <em>Administrator</em> with <code>sconfig</code> &gt; Select option <code>12</code> </li></ol><ol type="1" id="6673b060-df6a-42a5-90ea-fdabcd549689" class="numbered-list" start="4"><li>Log into <em>DC1</em> with the user <em>_sysadmin</em></li></ol><ol type="1" id="62418c5a-5f4e-4eab-9eb1-876e43c503e6" class="numbered-list" start="5"><li>Open <code>powershell</code></li></ol><ol type="1" id="5e09661b-eca9-4cda-a14b-acaefce15c94" class="numbered-list" start="6"><li>Rename the network adapter from <em>Ethernet</em> to “LAN” with the following:<pre id="470b676c-5c84-4b65-9c1b-7c512cc0037d" class="code"><code>Get-NetAdapter
Rename-NetAdapter -Name &quot;Ethernet&quot; -NewName &quot;LAN&quot;
Get-NetAdapter

#To view additional properties of the adapter (can omit -Name or -Property) 
Get-NetAdapter -Name &quot;LAN&quot; | Format-List -Property *</code></pre><figure id="d016b609-1069-4385-bea4-45b28565b4df" class="image"><a href="Capstone%2054e85/Untitled%2031.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2031.png"/></a><figcaption>For VM’s that have multiple adapters, view the MAC Address in Hyper-V and reference the -Name or -ifIndex</figcaption></figure></li></ol><ol type="1" id="a3a494b6-78bc-4da8-b550-82afc03db27d" class="numbered-list" start="7"><li>In Hyper-V, create and attach a 10 GB Dynamically expanding VHDX named <code>DC1db</code> to <em>DC1</em></li></ol><ol type="1" id="a46214b1-16be-44a6-ba94-1b5b32e50590" class="numbered-list" start="8"><li>From <code>powershell</code> on <em>DC1 </em>initialize, partition, and format the volume with the following:<pre id="3200e46b-7210-45b0-98ca-910ab2210c9b" class="code"><code>Get-Disk
Initialize-Disk -Number 1
New-Partition -DiskNumber 1 -UseMaximumSize
Get-Partition -DiskNumber 1
Get-Partition -DiskNumber 1 -PartitionNumber 2 | Format-Volume -FileSystem NTFS
Get-Partition -DiskNumber 1 -PartitionNumber 2 | Set-Partition -NewDriveLetter D</code></pre><figure id="a9bfc4e6-9abc-43f3-8031-92abb6b20fff" class="image"><a href="Capstone%2054e85/Untitled%2032.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2032.png"/></a></figure></li></ol><ol type="1" id="ce354dbb-4cd6-4038-a5cd-2949e24f23be" class="numbered-list" start="9"><li>Create directories ‘SYSVOL’ and ‘NTDS’ in the new volume <code>D:\</code> with <code>md SYSVOL</code> &amp; <code>md NTDS</code><figure id="0cd7135d-0b86-4cac-abae-9017537a9d4c" class="image"><a href="Capstone%2054e85/Untitled%2033.png"><img style="width:432px" src="Capstone%2054e85/Untitled%2033.png"/></a></figure></li></ol><ol type="1" id="2a4879ac-95c8-4ae6-9a73-fa6bead4acc7" class="numbered-list" start="10"><li>⏲ Checkpoint <em>DC1</em> &amp; name it “Before AD Role”</li></ol></div><h2 id="7aaaf97d-89d9-4e62-80ce-055485342d09" class=""><details open=""><summary>3.3 Add AD DS Role</summary></details></h2><div class="indented"><ol type="1" id="9f4eb8bf-9fb5-4782-a09c-0bb3b77e58d0" class="numbered-list" start="1"><li>From PowerShell <em>DC1, </em>install the Active Directory Domain Services role with the following: <pre id="6220b313-f6a9-4f01-b5cc-5a42dac0d52f" class="code"><code>#Install ADDS and Group Policy Management Console (GPMC)
Install-WindowsFeature -Name AD-Domain-Services,GPMC -IncludeManagementTools -Verbose

#Make sure that the AD-Domain-Services role is installed
Get-WindowsFeature -Name *AD*

#use ADDSDeployment module cmdlets to deploy a new domain
Get-Command -Module ADDSDeployment</code></pre><figure id="8bcdbf03-6add-491a-ae97-3cac9643337a" class="image"><a href="Capstone%2054e85/Untitled%2034.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2034.png"/></a></figure></li></ol><ol type="1" id="eb740057-837a-444f-b89a-a9b69f3c4e55" class="numbered-list" start="2"><li>⏲ Checkpoint <em>DC1</em> with the name “Before new domain”</li></ol><ol type="1" id="081e8567-1994-4b4e-a07e-4ee0c6c91992" class="numbered-list" start="3"><li>From PowerShell create a new forest root domain<code> cap.int</code> with the following:<pre id="c080f89e-54c2-48d2-a44b-bccd15b413bb" class="code"><code># 
# Windows PowerShell script for AD DS Deployment
# Install-ADDSForest: Installs a new forest root domain
#

Import-Module ADDSDeployment
Install-ADDSForest `
-DatabasePath &quot;D:\NTDS&quot; `
-DomainMode &quot;WinThreshold&quot; `
-DomainName &quot;cap.int&quot; `
-DomainNetbiosName &quot;cap&quot; `
-ForestMode &quot;WinThreshold&quot; `
-InstallDns:$true `
-LogPath &quot;D:\NTDS&quot; `
-NoRebootOnCompletion:$false `
-SysvolPath &quot;D:\SYSVOL&quot; `
-Force:$true

#Enter Pa$$w0rd as the SafeModeAdministrator password</code></pre><figure id="7fc54f14-27cd-4516-845e-9fcf3c8b054b" class="image"><a href="Capstone%2054e85/Untitled%2035.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2035.png"/></a></figure></li></ol><ol type="1" id="c8154a31-ced5-4d6c-88d2-8c401f413997" class="numbered-list" start="4"><li>Reboot the <em>DC1 </em>server (may take up to 10 minutes on first reboot) and login with userPrincipleName (UPN) <code>_sysadmin@cap.int</code> or <code>cap\_sysadmin</code><ul id="09f69ef6-710b-481c-bb6e-6fcf6ac556ae" class="bulleted-list"><li style="list-style-type:disc">❗ To change the user, have the VM connection in ‘Basic Session’ and hit the ESC key twice</li></ul><figure id="f040b924-5168-485e-bd70-5ab812f8b544" class="image"><a href="Capstone%2054e85/Untitled%2036.png"><img style="width:645px" src="Capstone%2054e85/Untitled%2036.png"/></a></figure></li></ol><ol type="1" id="a42facef-bbbd-4779-810e-847adb87c589" class="numbered-list" start="5"><li>(Optional) Verify the successful installation of the services in PowerShell<pre id="674af9a4-dff1-41eb-87c7-18bfa2958b97" class="code"><code># List the status of the AD related services on DC
Get-Service adws,kdc,netlogon,dns

# List configuration details of the DC
Get-ADDomainController

# List details of Active Directory Domain
Get-ADDomain cap.int

# List Active Directory Forest details
Get-ADForest cap.int</code></pre><figure id="a3bb95a0-0a53-4c56-832d-6309899dc12f" class="image"><a href="Capstone%2054e85/Untitled%2037.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2037.png"/></a></figure></li></ol><ol type="1" id="11822ba7-1847-418d-8194-8d452ae5da24" class="numbered-list" start="6"><li>⏲ Checkpoint <em>DC1</em> and name it “Before Aidan Admin Creation”</li></ol></div><h2 id="fac31579-30e7-40f0-a612-16e31b29d044" class=""><details open=""><summary>3.4 Create Domain Administrator aidan@cap.int</summary></details></h2><div class="indented"><ol type="1" id="ab63fd22-9f72-41e7-90ac-b4bb13f5dd4b" class="numbered-list" start="1"><li>In PowerShell, create a new User named “Aidan” &amp; copy the properties of <em>_sysadmin</em><pre id="ebf68b9b-8f59-437a-9651-e8f0b2b9c0ad" class="code"><code>Import-Module ActiveDirectory

#Create new Active Directory User
New-ADUser `
-Name &quot;Aidan&quot; `
-GivenName &quot;Aidan&quot; `
-Surname &quot;Waugh&quot; `
-SamAccountName &quot;Aidan&quot; `
-UserPrincipalName &quot;Aidan@cap.int&quot; `
-AccountPassword (ConvertTo-SecureString &quot;Password123&quot; -AsPlainText -Force) `
-ChangePasswordAtLogon $true `
-Enabled $true

#View User Details (Optional)
Get-ADUser -Identity Aidan -Properties *

#Copy _Sysadmin&#x27;s property &quot;Member of&quot;
$getusergroups = Get-ADUser –Identity _sysadmin -Properties memberof | Select-Object -ExpandProperty memberof

#Assign Aidan to be a member of the same groups &gt; become a domain admin
$getusergroups | Add-ADGroupMember -Members Aidan -verbose

#Verify
Get-ADUser -Identity Aidan -Properties memberof | Select-Object -ExpandProperty memberof</code></pre><figure id="59558165-3324-450b-914a-3635b6e6e62d" class="image"><a href="Capstone%2054e85/Untitled%2038.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2038.png"/></a></figure></li></ol><ol type="1" id="cd0c5a0f-a85b-426c-ada4-fe3fac48b03a" class="numbered-list" start="2"><li>Login to <em>DC1 </em>with the <em>aidan@cap.int </em>account<figure id="d8fb86e4-e69a-45d4-a323-8afb87851c49" class="image"><a href="Capstone%2054e85/Untitled%2039.png"><img style="width:384px" src="Capstone%2054e85/Untitled%2039.png"/></a></figure></li></ol><ol type="1" id="20174785-2bcd-4c0f-a855-845fa39e2455" class="numbered-list" start="2"><li>⏲ In Hyper-V, delete the checkpoint subtree on <em>DC1</em></li></ol><ol type="1" id="1b313054-27d4-4f5c-8c35-e66e5ccd8657" class="numbered-list" start="3"><li>⏲ Checkpoint <em>DC1</em> and name it “Before Thinkpad joins domain”</li></ol></div><h1 id="abe0ac82-085b-4ae0-aec6-3f5f9764cfc2" class="">4.0 Add Host Thinkpad to the Domain</h1><p id="746276da-09db-4de9-80c3-4a403a80edbb" class="">Join the host <em>Thinkpad</em> to the cap.int domain. As all Windows Servers are core, accessing Server Core from a domain joined machine will allow configuration with a graphical user interface. If enough memory is on the host machine, create a Windows 10 VM insead. </p><h2 id="6b20dc7a-52db-4ae2-88ec-361f3cf6676c" class=""><details open=""><summary>4.1 Join Thinkpad to the cap.int Domain</summary></details></h2><div class="indented"><ol type="1" id="5f736cff-68a2-4a87-ad6c-25dc2f07b237" class="numbered-list" start="1"><li>Set the LAN vEthernet adapter DNS settings to <code>192.168.3.1</code><figure id="140106a6-6050-48f9-a5c4-ca98ebe795d4" class="image"><a href="Capstone%2054e85/Untitled%2040.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2040.png"/></a></figure></li></ol><ol type="1" id="da617eee-c846-412a-8f88-730376f44f36" class="numbered-list" start="2"><li>Verify that <em>DC1 </em>can be found<figure id="4b289a15-38ec-4be5-a77c-0dad56115377" class="image"><a href="Capstone%2054e85/Untitled%2041.png"><img style="width:432px" src="Capstone%2054e85/Untitled%2041.png"/></a></figure></li></ol><ol type="1" id="5f2cf383-8549-4072-9c11-137415400ca4" class="numbered-list" start="3"><li>On <em>Thinkpad</em> right-click the<strong> Windows Icon</strong> &gt; <strong>System </strong>and view the About Page</li></ol><ol type="1" id="b23198dd-9253-4f5f-99f3-25d85a892e4a" class="numbered-list" start="4"><li>Click <strong>Rename this PC (advanced)</strong> &gt; click <strong>Change...</strong></li></ol><ol type="1" id="c9b5877c-f612-42a5-94d2-965dfc0b3aba" class="numbered-list" start="5"><li>In the popup Computer Name/Domain Changes complete the following:<ul id="45c66fca-f7e4-4e94-8402-789c3b78ccff" class="bulleted-list"><li style="list-style-type:disc">Domain: <code>cap.int</code></li></ul><ul id="c21e8119-6906-438b-800a-a457afa807dd" class="bulleted-list"><li style="list-style-type:disc">Credentials: <code>aidan@cap.int</code><figure id="eec100d1-15b5-41b6-994a-780c011f5eb5" class="image"><a href="Capstone%2054e85/Untitled%2042.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2042.png"/></a></figure></li></ul></li></ol><ol type="1" id="11ce2ea6-a3e2-48aa-aee5-597d6c41ef56" class="numbered-list" start="6"><li>Restart <em>Thinkpad</em><ul id="bfb3d8ba-343c-405c-a497-7ac95d972eab" class="bulleted-list"><li style="list-style-type:disc">❗ Note - as <em>Thinkpad </em>is a Type 1 Hypervisor, any VM’s that are running will restart when the host does. And can be accessed from any account<em> thinkpad\aidan</em> or <em>cap\aidan</em></li></ul></li></ol><ol type="1" id="365e10b3-c683-4a7b-98c6-b362726740d2" class="numbered-list" start="7"><li>Log into the local user account <em>thinkpad\aidan</em></li></ol><ol type="1" id="99a8166e-4d29-481f-b4ea-143bc2c33b73" class="numbered-list" start="8"><li>Reboot &amp; log into <em>thinkpad\aidan</em></li></ol><ol type="1" id="601af6ec-87c6-4c15-b988-2901a054e891" class="numbered-list" start="9"><li>View the computer name from Settings &gt; About and notice that the full device name is now <em>thinkpad.cap.int</em><figure id="c9aa8d5d-e49f-41d6-8baf-b51c1f05fe6b" class="image"><a href="Capstone%2054e85/Untitled%2043.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2043.png"/></a></figure></li></ol><ol type="1" id="dfc76fd5-cae0-4d78-bebd-34f92a7e521a" class="numbered-list" start="10"><li>Switch user and log into <em>cap\aidan. </em>If using RDP to access <em>Thinkpad</em>, enter <em>cap\aidan</em> as the new credentials. <ul id="5e900b36-7943-4fdf-a22f-57e96748f811" class="bulleted-list"><li style="list-style-type:disc">View the networking - the IP’s are the same</li></ul><ul id="0db081df-d641-4993-9186-f1eed7b6e0fb" class="bulleted-list"><li style="list-style-type:disc">Open Hyper-V and notice that the VMs are present</li></ul><ul id="8ac52708-76ff-43c0-9929-a16fab663efb" class="bulleted-list"><li style="list-style-type:disc">❗ The rest of the project should be completed on <em>Thinkpad </em>logged in as the domain administrator <em>cap\aidan</em>. Errors will occur if working from the local computer account even when the domain credentials are used. </li></ul></li></ol></div><h2 id="0a7e11cc-150a-4a1d-a3db-0fe3f31b2e95" class=""><details open=""><summary>4.2 Access DC1 from Server Manager on Thinkpad</summary></details></h2><div class="indented"><ol type="1" id="040ce0fc-adb8-420e-98a8-237f47283162" class="numbered-list" start="1"><li>On <em>Thinkpad</em> search for “Optional Features” &gt; click <strong>Add a feature</strong> &gt; Install the following Remote Server Administration Tools (RSAT) tools:<figure id="07ce8f8f-8ac0-448c-864e-cbe4c1b311be" class="image"><a href="Capstone%2054e85/Untitled%2044.png"><img style="width:336px" src="Capstone%2054e85/Untitled%2044.png"/></a></figure></li></ol><ol type="1" id="f914d338-ad5f-438c-9a4f-f38b7d3fe34f" class="numbered-list" start="2"><li>Open <strong>Server Manager</strong></li></ol><ol type="1" id="37c49f71-2818-4bae-8bf5-557792491647" class="numbered-list" start="3"><li>In the toolbar click <strong>Manage &gt; Add Servers</strong></li></ol><ol type="1" id="ade0965a-13a2-47a9-9e12-277b7ce4cf8a" class="numbered-list" start="4"><li>Select the <strong>DNS</strong> tab &gt; search for <code>dc1</code> &amp; select &gt; click <strong>OK</strong> to add<figure id="1ac3720c-fc01-466e-8069-81ba52e0df1d" class="image"><a href="Capstone%2054e85/Untitled%2045.png"><img style="width:384px" src="Capstone%2054e85/Untitled%2045.png"/></a><figcaption>Logged in as <em>cap\aidan</em></figcaption></figure><figure id="57b47624-60c1-4795-a133-284bb5f5d86e" class="image"><a href="Capstone%2054e85/Untitled%2046.png"><img style="width:816px" src="Capstone%2054e85/Untitled%2046.png"/></a><figcaption>If using the local <em>thinkpad\aidan </em>account, servers can not be found with the Active Directory tab</figcaption></figure></li></ol><ol type="1" id="831fe087-c9e9-4467-8807-b253bfa1c641" class="numbered-list" start="5"><li>If using the local <em>thinkpad\aidan</em> account (not recommended), right click server <strong>DC1 </strong>&gt; select <strong>Manage as...</strong> &gt; Enter domain admin credentials <code>aidan@cap.int</code><figure id="677a320e-7803-4885-84f9-09a5a36408ab" class="image"><a href="Capstone%2054e85/Untitled%2047.png"><img style="width:768px" src="Capstone%2054e85/Untitled%2047.png"/></a><figcaption>“Manage as...” removes the Kerberos error. This does not occur from <em>cap\aidan</em></figcaption></figure></li></ol></div><h1 id="1c2a6edf-9c14-4ff2-91f1-8b2565cd2de7" class="">5.0 Configure DNS on DC1</h1><p id="efea9810-4f75-4a06-8572-22cbf26db673" class="">The forward lookup zone is setup automatically and sets the forwarders during the domain creation from <code>-InstallDns:$true</code> however, the reverse lookup zone needs to be created and configured.</p><h2 id="aeff562d-a536-49f3-8ff3-f989ba9d1b3e" class=""><details open=""><summary>5.1 Forward and Reverse Lookup Zones</summary></details></h2><div class="indented"><ol type="1" id="535fb78f-033f-4cf8-9419-d56cf3abb23b" class="numbered-list" start="1"><li>In Server Manager’s left panel, click on <strong>DNS</strong> </li></ol><ol type="1" id="7894e9c9-7c9f-41f1-988c-ce164355a717" class="numbered-list" start="2"><li>Right click <em>DC1</em> &gt; Select <strong>DNS Manager</strong></li></ol><ol type="1" id="35c3ff73-4d00-4f95-86c6-6b2c405b7217" class="numbered-list" start="3"><li>From DNS Manager, right click <strong>DC1.cap.int</strong> &gt; Properties &gt; Open the <strong>Forwarders</strong> tab<figure id="c46dc163-b729-4293-a38d-f83f721d7ce0" class="image"><a href="Capstone%2054e85/Untitled%2048.png"><img style="width:768px" src="Capstone%2054e85/Untitled%2048.png"/></a><figcaption>The previous DNS address <code>8.8.8.8</code> is now set as the forwarder &amp; the <em>DC1</em> Interface DNS points to itself. This was all done automatically during the DNS installation with -InstallDns:$true </figcaption></figure></li></ol><ol type="1" id="c08f4c5f-4006-438e-b58e-3ee2cdf785c4" class="numbered-list" start="4"><li>Navigate to Forward Lookup Zones and click on <strong>cap.int</strong> to view the existing entries<figure id="d471e328-45c4-4b73-824e-542c691fe950" class="image"><a href="Capstone%2054e85/Untitled%2049.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2049.png"/></a><figcaption>The Forward Lookup Zone does not need to be configured</figcaption></figure></li></ol><ol type="1" id="ee6efce8-6de5-49b6-b0ad-e81f30159231" class="numbered-list" start="5"><li>Right click the directory <strong>Reverse Lookup Zones</strong> &gt;  select <strong>New Zone..</strong> to open the Wizard </li></ol><ol type="1" id="ad904bdb-1bb8-4789-93e8-d3291367fbed" class="numbered-list" start="6"><li>Complete the New Zone Wizard with the following:<ul id="bc094913-d801-4798-9b39-6fdbb77e4dcc" class="bulleted-list"><li style="list-style-type:disc">Zone Type: <strong>Primary Zone</strong></li></ul><ul id="bf4b4386-4d30-488b-89ab-0736789ea13b" class="bulleted-list"><li style="list-style-type:disc">Active Directory Zone Replication Scope: <strong>To all DNS servers running on domain controllers in this domain: proj.int</strong> (2nd option)</li></ul><ul id="583f1051-46d6-4f29-8b6e-a6b4897874db" class="bulleted-list"><li style="list-style-type:disc">Reverse Lookup Zone Name: <strong>IPv4 Reverse Lookup Zone</strong></li></ul><ul id="3f8630ea-3490-4f37-95c3-5d72120d7917" class="bulleted-list"><li style="list-style-type:disc">Network ID: <code>192.168.3</code></li></ul><ul id="7ceb04b3-899b-4778-882a-f93582b26c00" class="bulleted-list"><li style="list-style-type:disc">Dynamic Update: <strong>Allow only secure dynamic updates</strong> (1st option which is recommended for Active Directory)<figure id="97d0ba0e-73e2-4023-9583-40052858881a" class="image"><a href="Capstone%2054e85/Untitled%2050.png"><img style="width:816px" src="Capstone%2054e85/Untitled%2050.png"/></a></figure></li></ul></li></ol><ol type="1" id="9d6af9c1-6755-48d6-ade7-d40416034ce8" class="numbered-list" start="7"><li>⏲ Checkpoint <em>DC1</em> and name it “DNS complete”</li></ol></div><h1 id="f66e1232-992d-43ca-beea-e33e2e5a05d3" class="">6.0 Create an OU Structure and Create Users in ADUC</h1><p id="d8442694-0ffe-4ad4-82b2-a29388b30557" class="">Create Organization Units (OU) to organize the location of domain users, admins, and servers. Not only does this organize the domain into logical groupings of objects, it allows for granularity when applying Group Policies in the future.</p><h2 id="7a77ae9f-a297-42e3-96c4-a693848b4d22" class=""><details open=""><summary>6.1 Organize Active Directory Users and Computers</summary></details></h2><div class="indented"><ol type="1" id="4eb7ccc6-1c05-4765-afaa-1a9dfb7670c0" class="numbered-list" start="1"><li>From Server Manager, right click <em>DC1</em> &gt; select <strong>Active Directory User and Computers</strong></li></ol><ol type="1" id="9aee8145-ae5d-4da3-9923-e00222abcc0e" class="numbered-list" start="2"><li>Click on <strong>cap.int</strong> and view the existing organizational units (OU)<ul id="4216193f-ff6c-421a-8879-e4902a528af6" class="bulleted-list"><li style="list-style-type:disc"><em>DC1 </em>→ Domain Controllers</li></ul><ul id="6435a960-a2e1-4c0d-8b8a-2b4510b2a86e" class="bulleted-list"><li style="list-style-type:disc"><em>Thinkpad </em>(computer) → Computers</li></ul><ul id="9e4563d5-071e-4241-bc5e-afa201c13f01" class="bulleted-list"><li style="list-style-type:disc"><em>Aidan </em>(user) → Users</li></ul><figure id="4d3492b4-94e1-4e9b-a991-6f82ba859d06" class="image"><a href="Capstone%2054e85/Untitled%2051.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2051.png"/></a><figcaption>Default ADUC, notice the OU Structure and location accounts and servers</figcaption></figure></li></ol><ol type="1" id="acf5833b-c8e2-4a1f-bd7b-c5e1512e1ace" class="numbered-list" start="3"><li>Create OUs to match the following organizational diagram.<ul id="0a77493e-5a6f-4561-abb9-a53908dfff22" class="bulleted-list"><li style="list-style-type:disc">Move the <em>Thinkpad</em> computer object from <em>Computers </em>to <em>Win10</em></li></ul><ul id="e29d09fc-5ae0-45b6-8f9c-0004a6315451" class="bulleted-list"><li style="list-style-type:disc">Move user <em>Aidan </em>from <em>Users </em>to <em>Domain_Users</em> - any GPO’s applied to the domain users will not affect the administrator.</li></ul><figure id="7ca93362-fb97-4ff1-86ed-67db4a2f09cf" class="image"><a href="Capstone%2054e85/Untitled%2052.png"><img style="width:912px" src="Capstone%2054e85/Untitled%2052.png"/></a></figure><figure id="b503ae97-2db5-49cc-bd33-6f89f4888e87" class="image"><a href="Capstone%2054e85/Untitled%2053.png"><img style="width:480px" src="Capstone%2054e85/Untitled%2053.png"/></a><figcaption>Domain administrator account</figcaption></figure></li></ol><ol type="1" id="cf03e112-d76e-4d02-ae80-25a5344e0bb5" class="numbered-list" start="4"><li>(Optional) View the distinguished name (the OU path required for PowerShell)<figure id="68d6f559-f14a-4219-b2e8-578c5d0c723c" class="image"><a href="Capstone%2054e85/Untitled%2054.png"><img style="width:768px" src="Capstone%2054e85/Untitled%2054.png"/></a><figcaption>ADSI Edit tool (Active Directory Service Interface Editor) - Right click DC1 in Server Manager &gt; select <strong>ASDI Edit </strong></figcaption></figure></li></ol><ol type="1" id="408f030f-c616-4a7e-af5f-d267618a609b" class="numbered-list" start="5"><li>Create 4 users in <a href="https://docs.microsoft.com/en-us/troubleshoot/windows-server/identity/create-an-active-directory-server#add-users-and-computers-to-the-active-directory-domain">ADUC </a>or with PowerShell<figure id="7035952c-5e2a-4bb9-9378-ceb6c0f56f3d" class="image"><a href="Capstone%2054e85/Untitled%2055.png"><img style="width:768px" src="Capstone%2054e85/Untitled%2055.png"/></a></figure><pre id="54676daf-3604-43b2-bd1a-6d8e481a1d21" class="code"><code>#
#PowerShell commands for basic user creation
#
Import-Module ActiveDirectory
New-ADUser `
-Name &quot;Amy Li&quot; `
-GivenName &quot;Amy&quot; `
-Surname &quot;Li&quot; `
-SamAccountName &quot;Amy.Li&quot; `
-UserPrincipalName &quot;amy.li@cap.int&quot; `
-Path &quot;OU=FIN_Accountants,OU=FIN,OU=Domain_Users,DC=cap,DC=int&quot; `
-AccountPassword (ConvertTo-SecureString &quot;Password123&quot; -AsPlainText -Force) `
-ChangePasswordAtLogon $true `
-Enabled $true</code></pre></li></ol><ol type="1" id="15c45e5a-0e63-44f4-8fb4-aea3a6b5e694" class="numbered-list" start="6"><li>⏲ Checkpoint <em>DC1 </em>and name it “Before LinDHCP”</li></ol><ol type="1" id="02817737-020d-44de-ac26-3b434105c80f" class="numbered-list" start="7"><li>Shut down <em>DC1 </em>and set the memory to 512 MB static</li></ol><ol type="1" id="f8dfb26f-a127-4eef-a9dc-f3e3baf93ec0" class="numbered-list" start="8"><li>Start <em>DC1</em></li></ol></div><h1 id="921c2784-29ed-470e-9f04-e59cb73385a1" class="">7.0 DHCP</h1><p id="585b2918-b104-4598-a676-fc05fae9a7e3" class="">Create a Linux DHCP server running CentOS 8 that is joined to the<em> cap.int</em> domain.</p><h2 id="e3ad056a-b461-41e3-adc3-bf3448b92958" class=""><details open=""><summary>7.1 Create VM LinDHCP &amp; Install Linux CentOS 8</summary></details></h2><div class="indented"><ol type="1" id="eee80776-fd54-4987-9064-d246de6637af" class="numbered-list" start="1"><li>On <em>Thinkpad’s</em> Hyper-V, create a new VM named “LinDHCP” with the following:<ul id="04c22d7f-72a7-40e1-a1ee-c9af5b49095c" class="bulleted-list"><li style="list-style-type:disc">Memory: 2048 MB Static (this will be set to 512 MB after configuration)</li></ul><ul id="2d68fff4-4488-4aaf-b99c-cc1baed67ef1" class="bulleted-list"><li style="list-style-type:disc">Network: LAN</li></ul><ul id="51779a48-657e-4943-b67e-47cfff8bc7a5" class="bulleted-list"><li style="list-style-type:disc">Operating System: CentOS-Stream-8.iso<figure id="0b16fb6a-3c70-4280-baed-e293000dba93" class="image"><a href="Capstone%2054e85/Untitled%2056.png"><img style="width:432px" src="Capstone%2054e85/Untitled%2056.png"/></a></figure></li></ul></li></ol><ol type="1" id="b481b214-c4ff-4838-8015-df506da4ebdb" class="numbered-list" start="2"><li>Edit the following Hyper-V settings of <em>LinDHCP</em><ul id="0ea89eb9-e472-44b1-933e-7c0f5ff972da" class="bulleted-list"><li style="list-style-type:disc">Secure Boot: Disabled</li></ul><ul id="1b083c95-da4f-4163-a983-125adc48f250" class="bulleted-list"><li style="list-style-type:disc">Checkpoints: Uncheck automatic checkpoints</li></ul></li></ol><ol type="1" id="206ae4f2-a672-47d0-adf1-970bafd882bc" class="numbered-list" start="3"><li>Connect and start the <em>LinDHCP</em> VM</li></ol><ol type="1" id="6c6a9124-4804-4ca2-b134-ae8c88aa0882" class="numbered-list" start="4"><li>Select <strong>Install CentOS Stream 8-stream</strong> &gt; Press ENTER</li></ol><ol type="1" id="e8dc7e6c-084a-40e8-914d-2f3af4f589dc" class="numbered-list" start="5"><li>On the welcome installation screen, select language <strong>English (Canada) &gt; </strong>Click <strong>Continue</strong> to go to the Installation Summary Page<figure id="7bd15702-b0da-4333-bb5a-6d625cecc3fe" class="image"><a href="Capstone%2054e85/Untitled%2057.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2057.png"/></a><figcaption>CentOS Installation Summary Page</figcaption></figure></li></ol><ol type="1" id="9ae1dd7f-c8b9-43e2-8cc3-7b3c51242557" class="numbered-list" start="6"><li>Click <strong>Time &amp; Date</strong> &gt; Pick <strong>Vancouver</strong> on the map&gt; <strong>Done</strong></li></ol><ol type="1" id="c77281a3-aef4-460b-bd29-e7113cbc0fea" class="numbered-list" start="7"><li>Click <strong>Installation Destination</strong> &gt; Click on the disk and ensure it is selected &gt; <strong>Done</strong><figure id="c42692f5-23b5-4c82-9599-d5f7eb69d38b" class="image"><a href="Capstone%2054e85/Untitled%2058.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2058.png"/></a></figure></li></ol><ol type="1" id="8a45ba31-1dd4-487b-a2ac-57e0a4d7e6c1" class="numbered-list" start="8"><li>Click <strong>Software Selection</strong> &gt; Select <strong>Server</strong> as the base environment and <strong>Network Servers</strong> as additional software to be installed<figure id="0d837061-d43f-4720-9dff-06321c2534fc" class="image"><a href="Capstone%2054e85/Untitled%2059.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2059.png"/></a></figure></li></ol><ol type="1" id="cd01db42-4b11-4158-b6c0-be909b85979e" class="numbered-list" start="9"><li>Click <strong>Network &amp; Host Name</strong><ul id="686e5195-2910-4e6d-9cda-61f019c233a8" class="bulleted-list"><li style="list-style-type:disc">Enter the Host Name as “LinDHCP”</li></ul><ul id="4365ce35-4bd6-49bd-8014-6b51c6cb8b88" class="bulleted-list"><li style="list-style-type:disc">To setup the eth0 (LAN interface) in the bottom left corner of the screen click <strong>Configure...</strong></li></ul></li></ol><ol type="1" id="a1b8c2c8-8d87-4c58-a195-c624963c4040" class="numbered-list" start="10"><li>From the <strong>Editing LAN</strong> popup click on the tab <strong>IPv4 Settings</strong></li></ol><ol type="1" id="40d5a2f0-18ad-4825-adf7-890a5e780549" class="numbered-list" start="11"><li>Enter the following settings for the LAN network interface then click <strong>Save:</strong><ul id="cd3f9d2d-056b-47be-93a2-4269c2eec154" class="bulleted-list"><li style="list-style-type:disc">Connection Name: “LAN”</li></ul><ul id="95ed0404-1af4-430e-a025-01566f38d070" class="bulleted-list"><li style="list-style-type:disc">Method: Manual</li></ul><ul id="61e81700-1777-4a04-b851-827c0168fe5a" class="bulleted-list"><li style="list-style-type:disc">Address: <code>192.168.3.3</code></li></ul><ul id="ec108a3f-9a10-435e-8e21-ee81854f584d" class="bulleted-list"><li style="list-style-type:disc">Netmask: <code>28</code></li></ul><ul id="e7662fc2-443f-48ad-b0d0-fca3a8c06fe7" class="bulleted-list"><li style="list-style-type:disc">Gateway: <code>192.168.3.14</code></li></ul><ul id="daa18af8-b701-4f97-a6f6-b94f4bb3b058" class="bulleted-list"><li style="list-style-type:disc">DNS Servers: <code>192.168.3.1</code></li></ul><ul id="01cc6ef7-ba63-48d2-bc42-93136f4e7e4f" class="bulleted-list"><li style="list-style-type:disc">Search Domains: <code>cap.int</code><figure id="62439266-1aee-4fbd-9e9c-26dc6e9dfeb0" class="image"><a href="Capstone%2054e85/Untitled%2060.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2060.png"/></a></figure></li></ul></li></ol><ol type="1" id="b6734ac4-a2db-4f0c-b00e-e6fa2b850678" class="numbered-list" start="12"><li>Connect the ethernet by clicking the <strong>on/off toggle</strong> and view the summary of the configured settings &gt; Click <strong>Done</strong> to return to the Installation Summary Page<figure id="a4436000-2034-4d9e-ae6d-3e0deef525f2" class="image"><a href="Capstone%2054e85/Untitled%2061.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2061.png"/></a></figure></li></ol><ol type="1" id="35d5ff68-84d9-448a-bd80-620121b4dae4" class="numbered-list" start="13"><li>Click <strong>User Creation</strong> and create a administrator user named “_lsysadmin” with the password <code>Pa$$w0rd</code> &gt; Done</li></ol><ol type="1" id="8ea5aafb-0448-4580-bf28-77e7e4245063" class="numbered-list" start="14"><li>Click <strong>Root Password</strong> and enter <code>Pa$$w0rd</code> &gt; Done</li></ol><ol type="1" id="71010ba1-a8a5-4ae4-a921-808819285f44" class="numbered-list" start="15"><li>Click<strong> Begin Installation</strong><figure id="93eefc08-b573-45e6-8e39-408d0637bee3" class="image"><a href="Capstone%2054e85/Untitled%2062.png"><img style="width:480px" src="Capstone%2054e85/Untitled%2062.png"/></a></figure></li></ol><ol type="1" id="70cdac2d-5ea0-4c6b-aa2c-6c3a6fc68d3d" class="numbered-list" start="16"><li>When the installation is complete, click <strong>Reboot System</strong></li></ol><ol type="1" id="24356431-8497-4479-b952-e18030002218" class="numbered-list" start="17"><li>Login to <em>LinDHCP</em> with <code>_lsysadmin</code> and <code>Pa$$w0rd</code></li></ol><ol type="1" id="58c8ba58-031f-465a-93df-e1c7fda48105" class="numbered-list" start="18"><li>View networking configuration with <code>ifconfig</code></li></ol><ol type="1" id="3cce4fb6-e5d5-467f-9f1c-aa86a3e3fc32" class="numbered-list" start="19"><li>Test internet connectivity by entering <code>ping google.ca</code><figure id="b47538da-b4ba-4942-aa8c-fb886a62a65b" class="image"><a href="Capstone%2054e85/Untitled%2063.png"><img style="width:480px" src="Capstone%2054e85/Untitled%2063.png"/></a></figure></li></ol><ol type="1" id="f63e9761-6b21-4fbb-8326-b1415cb982f1" class="numbered-list" start="20"><li>❗ Note: Pay attention to the prompt <code>$</code> or <code>#</code> <figure id="715e074c-10e5-4b8e-a1f7-38fabbe2e5b7" class="image"><a href="Capstone%2054e85/Untitled%2064.png"><img style="width:279px" src="Capstone%2054e85/Untitled%2064.png"/></a><figcaption>use <code>su</code> or <code>sudo &lt;command&gt;</code></figcaption></figure></li></ol><ol type="1" id="eed40f2c-7684-4080-8b45-a34626c89d7f" class="numbered-list" start="21"><li>Update the OS with <code># dnf update</code> (note that <code># yum update -y</code> also works)</li></ol><ol type="1" id="16028b8d-4cb9-435d-9004-19e5071867a2" class="numbered-list" start="22"><li>(Optional) Install traceroute with <code># yum install traceroute -y</code> and run <code>$ traceroute google.ca</code><figure id="8e6c7c01-c7b7-4028-b7f4-7a0e0f7b32f8" class="image"><a href="Capstone%2054e85/Untitled%2065.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2065.png"/></a></figure></li></ol></div><h2 id="119c7550-fcd8-42cd-b1a4-a1c87c12eb38" class=""><details open=""><summary>7.2 Install and Configure DHCP</summary></details></h2><div class="indented"><ol type="1" id="c8881612-ae85-4e83-8037-98b5002560a9" class="numbered-list" start="1"><li>Install the dhcp server package and dependencies with <code># dnf install dhcp-server</code><figure id="07b5a3d7-c682-4da4-9a93-f93d79da1939" class="image"><a href="Capstone%2054e85/Untitled%2066.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2066.png"/></a></figure></li></ol><ol type="1" id="bc561658-b6a2-4dae-9542-5e78090f7c8b" class="numbered-list" start="2"><li>Open the dhcpd configuration file with <code># nano /etc/dhcp/dhcpd.conf</code></li></ol><ol type="1" id="d2eb4f7c-9f06-4570-9e66-8a44b9261b4c" class="numbered-list" start="3"><li>Write the following into dhcpd.conf<p id="b6db147c-7cc0-4466-8768-ffacfe15937a" class="">❗ Note: all entries need to be manually entered as copying into a Linux guest VM does not work, or create from a SSH session.</p><pre id="b00e1a19-cb96-40b8-bc73-6fefdc31bafa" class="code"><code># set lease times
default-lease-time 600;
max-lease-time 7200;

# declare the DHCP Server
authoritative;

# Set Network address, subnet mask and gateway
subnet 192.168.3.0 netmask 255.255.255.248 {
	option routers 192.168.3.14;
	option broadcast-address 192.168.3.15;
	option subnet-mask 255.255.255.240;
	option domain-search &quot;cap.int&quot;;
  option domain-name-servers 192.168.3.1;
	# IP address scope range - set only 1 which will be used for thinkpad
  range 192.168.3.13 192.168.3.13;  
}

#Set DHCP Reservations for servers, find the MAC address in Hyper-V Settings
host DC1 {
	hardware ethernet 00:15:5D:05:4A:06;
	fixed-address 192.168.3.1;
}

host LinDHCP {
	hardware ethernet 00:15:5D:05:4A:08;
	fixed-address 192.168.3.3;
}</code></pre><figure id="d434a080-67fe-4f2b-8f9a-2d1b4943840e" class="image"><a href="Capstone%2054e85/Untitled%2067.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2067.png"/></a></figure></li></ol><ol type="1" id="942c81d0-8061-42fa-af2b-64fc681e375a" class="numbered-list" start="4"><li>When finished editing press CTRL+S then CTRL+X to save and exit <ul id="c59be54d-e681-4456-97f2-c90866876e99" class="bulleted-list"><li style="list-style-type:disc">Note: CTRL is shown as ^</li></ul></li></ol><ol type="1" id="9666dc85-4b55-4621-ab6b-52a884b4b194" class="numbered-list" start="5"><li>Start the service dhcpd, check the status to verify it is active, and set the service to start on reboot with:<ul id="ddfb8c91-52dd-48d0-af7c-5a89556bf060" class="bulleted-list"><li style="list-style-type:disc"><code># systemctl start dhcpd</code></li></ul><ul id="6708df39-b0ab-4559-9125-681b5e263d43" class="bulleted-list"><li style="list-style-type:disc"><code># systemctl status dhcpd</code></li></ul><ul id="c4e41ca0-b8c7-44e1-98de-d11149524a9d" class="bulleted-list"><li style="list-style-type:disc"><code># systemctl enable dhcpd.service</code></li></ul><figure id="3d662e6e-e4a7-4f99-81b1-8673ec9802dc" class="image"><a href="Capstone%2054e85/Untitled%2068.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2068.png"/></a></figure></li></ol><ol type="1" id="d50a9db5-69a4-4646-9d2d-883633ba3659" class="numbered-list" start="6"><li>Reboot the DHCP server and verify that the dhcpd service starts automatically with:<ul id="bf583f85-4c47-4328-b084-d0f917b485c0" class="bulleted-list"><li style="list-style-type:disc"><code># reboot</code></li></ul><ul id="1b984623-6c6d-4bc2-b2d5-df4fb3827cc0" class="bulleted-list"><li style="list-style-type:disc"><code># systemctl status dhcpd</code></li></ul></li></ol></div><h2 id="e10064da-6fc6-43ca-b961-52af1acf2c20" class=""><details open=""><summary>7.3 Test DHCP on Thinkpad</summary></details></h2><div class="indented"><ol type="1" id="c3e9313f-2667-4f96-bec7-d98b1a184b88" class="numbered-list" start="1"><li>On <em>Thinkpad</em> set the LAN network adapter settings to <strong>Obtain an IP address automatically</strong></li></ol><ol type="1" id="5a200d03-e52d-4250-b499-a70ab1ba2cda" class="numbered-list" start="2"><li>On <em>Thinkpad</em> open PowerShell as an administrator and run the following:<ul id="4b0ab6e6-c609-4c11-9771-f6ded378b6f4" class="bulleted-list"><li style="list-style-type:disc"> ❗ If using RDP to access <em>Thinkpad</em> exit the session and work directly on the host. Reconnect after the settings are renewed. </li></ul><pre id="122bc95e-2831-4646-b163-b9fd8e8a135d" class="code"><code>ipconfig /release
ipconfig /renew
ipconfig /all</code></pre></li></ol><ol type="1" id="7f1d336a-3b69-42b7-9b08-30bda66a4a23" class="numbered-list" start="3"><li>View the DHCP Server IP for vEthernet LAN and notice it points to LinDHCP</li></ol><ol type="1" id="8791f060-f51b-4fbe-8023-5c141a127801" class="numbered-list" start="4"><li>From <em>LinDHCP</em> view the DHCP leases with <code>$ cat /var/lib/dhcp/dhcpd.leases</code><figure id="71780e91-8ee3-4176-8bdd-c0f7122c81f4" class="image"><a href="Capstone%2054e85/Untitled%2069.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2069.png"/></a></figure></li></ol></div><h2 id="135361da-30d7-4dfe-8148-e06c65c901b8" class=""><details open=""><summary>7.4 Join LinDHCP to cap.int Domain</summary></details></h2><div class="indented"><ol type="1" id="c7dd8474-ec63-4271-a759-c3549d151438" class="numbered-list" start="1"><li>Install the required packages on <em>LinDHCP</em><ul id="be6e1f97-71e9-4474-8e90-fec4aa7ae3f4" class="bulleted-list"><li style="list-style-type:disc"><code># dnf install realmd sssd oddjob oddjob-mkhomedir adcli samba-common-tools krb5-workstation</code><figure id="0360071e-09af-4245-9503-f6795a20187a" class="image"><a href="Capstone%2054e85/Untitled%2070.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2070.png"/></a></figure></li></ul></li></ol><ol type="1" id="bfd2b03c-4cb0-41b6-9887-0fca1c437cd1" class="numbered-list" start="2"><li>Join the cap.int domain<ul id="2e2b3adc-425d-4c86-a64b-bdb704dc9e3a" class="bulleted-list"><li style="list-style-type:disc">Use the Aidan admin credentials <code># realm join --user=aidan cap.int</code> </li></ul><ul id="c1ea2d48-9b7c-4082-a763-2f971fea0577" class="bulleted-list"><li style="list-style-type:disc">View the computer object in ADUC</li></ul><figure id="d857634b-0ab1-4759-acbd-9d4c5aac5c74" class="image"><a href="Capstone%2054e85/Untitled%2071.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2071.png"/></a></figure></li></ol><ol type="1" id="a65e77fa-ee3e-4102-9cf4-59f002dc1a7a" class="numbered-list" start="3"><li>Move the computer object LINDHCP into the OU=DHCP</li></ol><ol type="1" id="170688d9-1955-4115-aadf-d161492de962" class="numbered-list" start="4"><li>On <em>LinDHCP</em> login with the domain admin <code>aidan@cap.int</code><figure id="fb9e9167-d284-458c-a81b-362b57e6675d" class="image"><a href="Capstone%2054e85/Untitled%2072.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2072.png"/></a></figure></li></ol><ol type="1" id="2c1b9473-0183-43b8-85d3-737bf0ac6fde" class="numbered-list" start="5"><li>In <em>DNS Manager</em> on <em>Thinkpad</em> add a A record for LinDHCP</li></ol><ol type="1" id="849df9a6-bbee-496b-9b28-1134bf99db09" class="numbered-list" start="6"><li>⏲ Checkpoint <em>LinDHCP</em> and name it “Functional DHCP - future reservations need to be added”</li></ol><ol type="1" id="c93470fe-3bc0-425e-b086-733d08a023c2" class="numbered-list" start="7"><li>Shut down the VM and set the memory to 512 MB static</li></ol></div><h1 id="f9ca38dd-36b6-4608-bc75-b961eaf16953" class="">8.0 iSCSI SAN</h1><p id="191ee863-29dd-4af0-a3a2-61bee04ac44b" class="">Create a SAN virtual machine which will not join the domain as it is mimicking physical hardware. It does need to be added to Server Manager for a to have a GUI. This iSCSI target will have RAID 6 to allow for 2 disk failure and a ReFS file system on the 2 volumes. The main iSCSI virtual disk will be 100GB as it will contain the VHDX for FILE1, FILE2, DC2 as well as the file share data. The second vDisk will be used as the quorum witness. </p><h2 id="3dd92d18-9831-452d-8845-f4484d20aefa" class=""><details open=""><summary>8.1 Create the SAN VM with Server Core</summary></details></h2><div class="indented"><ol type="1" id="0edcc850-6021-401b-abc3-ad01f1383ecb" class="numbered-list" start="1"><li>⏲ Checkpoint <em>DC1</em> and name it “Before SAN”</li></ol><ol type="1" id="4f32dae0-ebec-4818-8ce0-d491479fd430" class="numbered-list" start="2"><li>In Hyper-V on <em>Thinkpad,</em> create a new VM named “SAN” with using the script from Appendix E to create the following:<ul id="54e72a3a-98db-45b3-be27-73cf41865598" class="bulleted-list"><li style="list-style-type:disc">Memory: 2048 MB Static (will be set to 512 MB after)</li></ul><ul id="a30d3280-3d47-49b2-8d65-8fcb75a04242" class="bulleted-list"><li style="list-style-type:disc">Network: LAN</li></ul><ul id="d26536d8-ad57-4a16-a561-ad91aab75959" class="bulleted-list"><li style="list-style-type:disc">Hard Disk: Differencing disk to <em>ParentServer2019-Core.vhdx</em></li></ul><ul id="0d4b4016-6d26-445b-bbb1-613054acaac5" class="bulleted-list"><li style="list-style-type:disc">Operating System: Windows Server 2019 (Core)</li></ul></li></ol><ol type="1" id="de65799e-53a8-481d-8b8f-8c51a3260f84" class="numbered-list" start="3"><li>Connect and start the <em>SAN</em> virtual machine</li></ol><ol type="1" id="aae2fa63-0929-4298-8a89-ca49bacc445a" class="numbered-list" start="4"><li>Set the admin password to <code>Pa$$w0rd</code></li></ol><ol type="1" id="b2f1903c-9861-4f76-8518-03fa8e05c4fe" class="numbered-list" start="5"><li>Set LAN networking in <code>sconfig</code><ul id="e93c92dd-c88d-4fa6-8ec6-6905e689861d" class="bulleted-list"><li style="list-style-type:disc">IP Address: <code>192.168.3.4</code></li></ul><ul id="1b464284-2f4c-467b-bc4a-84c4930908d4" class="bulleted-list"><li style="list-style-type:disc">Subnet: <code>255.255.255.240</code> (/28)</li></ul><ul id="29d6e700-e16b-4dbf-afab-c3d5cd4c0761" class="bulleted-list"><li style="list-style-type:disc">Default Gateway: <code>192.168.3.14</code></li></ul><ul id="4e534ae1-0ef7-45e7-b76b-c62aecf0175a" class="bulleted-list"><li style="list-style-type:disc">DNS: <code>192.168.3.1</code> &amp; <code>8.8.8.8</code></li></ul></li></ol><ol type="1" id="2e540123-0e6b-4642-96f8-74640c9b111f" class="numbered-list" start="6"><li>From PowerShell run the following:<pre id="852d1578-e3a3-41eb-94f8-06fa04b2e279" class="code"><code>Get-NetAdapter
Rename-NetAdapter -Name &quot;Ethernet&quot; -NewName &quot;LAN&quot;

Get-LocalUser
Rename-LocalUser -Name &quot;Administrator&quot; -NewName &quot;_lsysadmin&quot;

Restart-Computer -Force</code></pre></li></ol><ol type="1" id="0dfec47c-166e-438e-a29a-7cea26bc2be2" class="numbered-list" start="7"><li>From <code>sconfig</code> select option <code>2</code> to rename the computer to “SAN”</li></ol><ol type="1" id="e0cc426f-9ad2-4c04-8637-e7184ebf8eea" class="numbered-list" start="8"><li>Verify all post-install tasks are complete and are configured correctly as per Appendix G</li></ol><ol type="1" id="90bedd1e-e40c-4c53-a1dd-1ed86b305799" class="numbered-list" start="9"><li>Restart the VM with <code>Restart-Computer -Force</code></li></ol></div><h2 id="b2018e76-85bf-49b3-800b-2e87c5e072cc" class=""><details open=""><summary>8.2 Add a Non-Domain Member to Server Manager</summary></details></h2><div class="indented"><ol type="1" id="3e56abf9-26bb-4d0c-83a9-9bebae4b3051" class="numbered-list" start="1"><li>On <em>Thinkpad</em> open PowerShell and run the following commands:<pre id="7b95c522-8a8b-4404-9a05-e0aa5c1a53bc" class="code"><code># Update hosts file to map SAN&#x27;s IP to name &quot;SAN&quot;
Add-Content -Path C:\Windows\System32\drivers\etc\hosts -Value &quot;192.168.3.4 SAN&quot;

#Start the WinRM service
Start-Service -Name WinRM

#Set SAN host as trusted
Set-Item -Path WSMan:\localhost\Client\TrustedHosts -Value SAN -Concatenate -Force

#View the list
Get-ChildItem -Path WSMan:\localhost\Client\TrustedHosts | Format-List</code></pre></li></ol><ol type="1" id="16db82c8-2aca-4dcf-9275-31ae542c2db4" class="numbered-list" start="2"><li>Open Server Manager and add <em>SAN</em> from the DNS tab</li></ol><ol type="1" id="af79c5eb-6b0c-43fd-8646-9c0ddd27f561" class="numbered-list" start="3"><li>To fix the Kerberos authentication error, right-click SAN &gt; <strong>Manage As </strong>&gt; Enter the following credentials<ul id="cc92abea-04d9-4c00-a782-e7c97162280b" class="bulleted-list"><li style="list-style-type:disc">User: <code>san\_lsysadmdin</code> - as SAN is a workgroup computer not a <em>cap.int</em> domain member, the domain value is <code>san\</code> for the VM’s name</li></ul><ul id="d822e36c-f66d-445b-8a57-51ce0b4f5cf1" class="bulleted-list"><li style="list-style-type:disc">Password: <code>Pa$$w0rd</code><figure id="ad26f8f2-c16e-421b-9266-7900524cc6c3" class="image"><a href="Capstone%2054e85/Untitled%2073.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2073.png"/></a><figcaption>Use the local admin account as SAN is not a cap.int domain member</figcaption></figure><figure id="08b8164a-ddb5-489f-960a-1bedb68028f2" class="image"><a href="Capstone%2054e85/Untitled%2074.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2074.png"/></a></figure></li></ul></li></ol></div><h2 id="e051edb8-07d7-4897-81f4-6e94cfc39e7e" class=""><details open=""><summary>8.3 Setup the iSCSI SAN RAID 6 Hardware</summary></details></h2><div class="indented"><ol type="1" id="53b64f85-2934-40af-aa7e-bef09bc146df" class="numbered-list" start="1"><li>From <em>Thinkpad</em> on PowerShell create eight 25GB disks and attach to the <em>SAN</em> VM with the following:<ul id="2c94e4e2-aa17-4672-9b0b-e37c282a8d7a" class="bulleted-list"><li style="list-style-type:disc">❗ This may take some time as the disk size is fixed</li></ul><pre id="4c5dd676-92aa-4ec2-87d0-7a510ba72d5e" class="code code-wrap"><code>New-VHD -Path V:\VMs\VHDX\Disk1.vhdx -Fixed -SizeBytes 25GB
Add-VMHardDiskDrive -VMName SAN -Path V:\VMs\VHDX\Disk1.vhdx

New-VHD -Path V:\VMs\VHDX\Disk2.vhdx -Fixed -SizeBytes 25GB
Add-VMHardDiskDrive -VMName SAN -Path V:\VMs\VHDX\Disk2.vhdx

New-VHD -Path V:\VMs\VHDX\Disk3.vhdx -Fixed -SizeBytes 25GB
Add-VMHardDiskDrive -VMName SAN -Path V:\VMs\VHDX\Disk3.vhdx

New-VHD -Path V:\VMs\VHDX\Disk4.vhdx -Fixed -SizeBytes 25GB
Add-VMHardDiskDrive -VMName SAN -Path V:\VMs\VHDX\Disk4.vhdx

New-VHD -Path V:\VMs\VHDX\Disk5.vhdx -Fixed -SizeBytes 25GB
Add-VMHardDiskDrive -VMName SAN -Path V:\VMs\VHDX\Disk5.vhdx

New-VHD -Path V:\VMs\VHDX\Disk6.vhdx -Fixed -SizeBytes 25GB
Add-VMHardDiskDrive -VMName SAN -Path V:\VMs\VHDX\Disk6.vhdx

New-VHD -Path V:\VMs\VHDX\Disk7.vhdx -Fixed -SizeBytes 25GB
Add-VMHardDiskDrive -VMName SAN -Path V:\VMs\VHDX\Disk7.vhdx

New-VHD -Path V:\VMs\VHDX\Disk8.vhdx -Fixed -SizeBytes 25GB
Add-VMHardDiskDrive -VMName SAN -Path V:\VMs\VHDX\Disk8.vhdx</code></pre><figure id="16521180-5186-4a28-9a7e-daea0e094b9e" class="image"><a href="Capstone%2054e85/Untitled%2075.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2075.png"/></a><figcaption>❗ Because <em>SAN </em>has so many disks, do <em>NOT</em> checkpoint this VM, this will also apply to the nested servers <em>HV1</em>, and <em>HV2</em></figcaption></figure></li></ol><ol type="1" id="d0b2d3f0-ba88-4bd0-a348-6b7f3a76de95" class="numbered-list" start="2"><li>In <em>SAN</em>’s settings in Hyper-V, add a <strong>Network Adapter</strong> and connect it to the <strong>iSCSI</strong> virtual switch</li></ol><ol type="1" id="015b7ab6-c8f7-491f-b1f1-d6d9a9f849d0" class="numbered-list" start="3"><li>On <em>SAN</em> go to <code>sconfig</code> &gt; Option <code>8</code> &gt; set the Network Adapter Settings to the following:<ul id="8e842d6c-0761-4285-9a64-def94c854f88" class="bulleted-list"><li style="list-style-type:disc">IP Address: <code>192.168.10.3</code> (Static)</li></ul><ul id="710cd052-a3fb-48be-b507-d3c76d34c0a6" class="bulleted-list"><li style="list-style-type:disc">Subnet Mask: <code>255.255.255.248</code><figure id="f0c6ee27-c096-42bd-9549-d2eb1ca63ba6" class="image"><a href="Capstone%2054e85/Untitled%2076.png"><img style="width:336px" src="Capstone%2054e85/Untitled%2076.png"/></a></figure></li></ul></li></ol><ol type="1" id="f96ff1d9-800a-463d-b3fd-b933b8beb6a3" class="numbered-list" start="4"><li>From PowerShell in <em>SAN</em> rename the new network adapter to “iSCSI”<pre id="8ce4dcf3-4761-42f5-bd8e-af4638d91e1f" class="code"><code>Get-NetAdapter
Rename-NetAdapter -Name &quot;Ethernet&quot; -NewName &quot;iSCSI&quot;

#View Changes
Get-NetAdapter</code></pre><figure id="179cb3d7-1aab-44cc-889f-e0e3a0c60ded" class="image"><a href="Capstone%2054e85/Untitled%2077.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2077.png"/></a></figure></li></ol><ol type="1" id="4b694a4b-f5cc-4157-86be-e23bb5bce028" class="numbered-list" start="5"><li>Enable jumbo packets with the size 9014 bytes by entering the following in PS:<pre id="13baf4ef-1694-4fdb-aa9f-d95dcfe02001" class="code"><code># View settings before
Get-NetAdapterAdvancedProperty -Name &quot;iSCSI&quot;

# Enable jumbo frames and set size
Set-NetAdapterAdvancedProperty -Name &quot;iSCSI&quot; -RegistryKeyword &quot;*JumboPacket&quot; -Registryvalue 9014

# View changes
Get-NetAdapterAdvancedProperty -Name &quot;iSCSI&quot;</code></pre><figure id="2ca3808a-e1c7-43a1-9446-6ba3f2721e83" class="image"><a href="Capstone%2054e85/Untitled%2078.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2078.png"/></a></figure></li></ol></div><h2 id="b319dd70-b0a8-45d1-ba2a-4c063d7b921d" class=""><details open=""><summary>8.4 Configure SAN’s Storage Pool, Virtual Disks, and Volumes</summary></details></h2><div class="indented"><ol type="1" id="7cde171a-44c7-462e-8a35-1f6a94c84d34" class="numbered-list" start="1"><li>From Server Manager &gt; go to File and Storage Services &gt; Volumes &gt; <strong>Storage Pools</strong></li></ol><ol type="1" id="68c2b8ea-4320-493a-8f30-77de76f3df6f" class="numbered-list" start="2"><li>Under the Storage Pools section &gt; Windows Storage &gt; Right click <strong>Primordial</strong> &gt; <strong>New Storage Pool...</strong> to open the Wizard<figure id="af89b54d-4f01-4755-a940-b07c372a4baf" class="image"><a href="Capstone%2054e85/Untitled%2079.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2079.png"/></a></figure></li></ol><ol type="1" id="26728bda-ea6e-40af-8ab0-e91d4fc22f9d" class="numbered-list" start="3"><li>Complete the New Storage Pool Wizard with the following:<ul id="2c6d6b7b-ff5b-453d-857a-0f0228a8cd74" class="bulleted-list"><li style="list-style-type:disc">Pool Name: “Pool1”</li></ul><ul id="79daad90-fc18-402b-9a63-16ddfe8b34e7" class="bulleted-list"><li style="list-style-type:disc">Physical Disks: Select all 6 and set the allocation to <strong>Automatic</strong></li></ul><ul id="5227eaa8-e583-4b10-b48a-b881461010e8" class="bulleted-list"><li style="list-style-type:disc">Confirm &amp; click <strong>Create</strong><figure id="0190aff9-1318-46d2-8d63-513637061fbd" class="image"><a href="Capstone%2054e85/Untitled%2080.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2080.png"/></a></figure><figure id="defd2178-c7ea-4a4b-bed0-a73f8aa8ce85" class="image"><a href="Capstone%2054e85/Untitled%2081.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2081.png"/></a></figure></li></ul></li></ol><ol type="1" id="594a62ff-d4b5-454d-b8d4-781bb23fd2c2" class="numbered-list" start="4"><li>Create a virtual disk named “vDisk” from PowerShell on <em>SAN</em> with the following<p id="ad19eebc-8616-41ea-84c4-e507b717b94a" class="">❗ Windows Server 2019 has a known bug where vDisks can not be made from Server Manager which is why <code>PowerShell</code> is used instead</p><pre id="1b514696-0252-4a98-97c4-6462e7886200" class="code"><code># Create a RAID 6 virtual disk by setting resiliency=parity &amp; physical disk redundancy=2
New-VirtualDisk `
-StoragePoolFriendlyName &quot;Pool1&quot; `
-FriendlyName &quot;vDisk&quot; `
-Size 100GB `
-ProvisioningType Fixed `
-ResiliencySettingName &quot;Parity&quot; `
-PhysicalDiskRedundancy 2</code></pre><figure id="f53c8e84-89f8-409c-9356-1794aae9d295" class="image"><a href="Capstone%2054e85/Untitled%2082.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2082.png"/></a></figure></li></ol><ol type="1" id="83fc4823-6762-4561-b47b-d065464d92a2" class="numbered-list" start="5"><li>From Server Manager on <em>Thinkpad</em> &gt; go to Volumes &gt; Disks</li></ol><ol type="1" id="6838f9b1-f775-4971-870f-41227517a901" class="numbered-list" start="6"><li>Expand<strong> SAN (2)</strong> right click <strong>vDisk</strong> &gt; click <strong>Bring Online</strong><figure id="1361ca59-edd9-492a-b92b-74e4c91de099" class="image"><a href="Capstone%2054e85/Untitled%2083.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2083.png"/></a></figure></li></ol><ol type="1" id="7e574705-47f6-4031-9d23-0bbd2991de6e" class="numbered-list" start="7"><li>Right-click <strong>vDisk</strong> again &gt; select <strong>Initialize</strong></li></ol><ol type="1" id="ca94ba5c-fd83-47ab-951d-fc3a33017592" class="numbered-list" start="8"><li>In the section <em>Volumes</em> click the link <strong>To create a volume, start the New Volume Wizard</strong></li></ol><ol type="1" id="9f9c180b-0596-4849-ac6b-6aaf0cb9bf63" class="numbered-list" start="9"><li>Complete the New Volume Wizard with the following:<ul id="02894699-974b-4d5b-8ea5-7833bd2e017a" class="bulleted-list"><li style="list-style-type:disc">Server and Disk: Select <strong>SAN </strong>and <strong>Disk 9</strong></li></ul><ul id="39a2db44-a2b8-46e8-8a94-fbdf11904701" class="bulleted-list"><li style="list-style-type:disc">Size: 100 GB (the maximum available capacity)</li></ul><ul id="c9159aae-e42c-491e-b67c-e2f9771c95b6" class="bulleted-list"><li style="list-style-type:disc">Drive Letter or folder: Assign to drive letter <strong>D</strong></li></ul><ul id="6edea48a-3aa6-42a9-b08a-fceaa4fad452" class="bulleted-list"><li style="list-style-type:disc">File System Settings: File system set to <strong>ReFS</strong> and label the volume “HVData”</li></ul><figure id="9d353993-730f-42ce-950d-c7f9f2f481ea" class="image"><a href="Capstone%2054e85/Untitled%2084.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2084.png"/></a></figure></li></ol></div><h2 id="42922081-a4c5-4e46-8f6a-430135fa0a2b" class=""><details open=""><summary>8.5 Add the iSCSI Target Role on SAN </summary></details></h2><div class="indented"><ol type="1" id="452c25e1-8a1c-46e9-aac9-7615ef5e215a" class="numbered-list" start="1"><li>In Server Manager click <strong>All Servers</strong> in the left panel</li></ol><ol type="1" id="14abcf59-2d7e-4e26-90cb-e5bcdd3eac42" class="numbered-list" start="2"><li>Right click server <strong>SAN</strong> &gt; click <strong>Add Roles and Features</strong></li></ol><ol type="1" id="a936c028-008e-4130-84ba-f86a7b797cbf" class="numbered-list" start="3"><li>Install the <strong>iSCSI Target Server</strong> role &gt;Accept recommended addons which includes the <strong>File Server role</strong> <figure id="f47e9188-4756-47b2-8572-583397e1ddb4" class="image"><a href="Capstone%2054e85/Untitled%2085.png"><img style="width:768px" src="Capstone%2054e85/Untitled%2085.png"/></a></figure></li></ol></div><h2 id="cf709f8f-afd8-44fe-bdec-14e742f27ed5" class=""><details open=""><summary>8.6 Create an iSCSI Virtual Disk</summary></details></h2><div class="indented"><ol type="1" id="e9a0655c-a159-49fb-94c0-986ae02a8b2f" class="numbered-list" start="1"><li>Open Server Manager navigate to File and Storage Spaces &gt; <strong>iSCSI</strong></li></ol><ol type="1" id="a0dddbc8-04e2-4e58-aa20-c7d024b0c564" class="numbered-list" start="2"><li>Click the link <strong>To create an iSCSI virtual disk, start the New iSCSI Virtual Wizard</strong></li></ol><ol type="1" id="eb8f3c10-bc05-4c12-8408-d582491f3e51" class="numbered-list" start="3"><li>Complete the iSCSI Virtual Disk Wizard with the following<ul id="d3fb8341-e9f5-43b7-9dbd-ff27668eb12d" class="bulleted-list"><li style="list-style-type:disc">Name: “HVData”</li></ul><ul id="80120d9c-092d-4edf-8f79-1cc35242180a" class="bulleted-list"><li style="list-style-type:disc">Disk Size: 98.3 GB (the maximum)</li></ul><ul id="9d2d44b1-d66e-42d1-b79b-acae7feba49d" class="bulleted-list"><li style="list-style-type:disc">iSCSI Target: Create new target named “HVData” and add IP addresses that will be used for the nested Hyper-V servers to be the initiators <code>192.168.10.1 </code>and <code>192.168.10.2</code>  for <em>HV1 </em>and <em>HV2</em><figure id="1f231b60-c314-4212-8ee8-b0eb1523336a" class="image"><a href="Capstone%2054e85/Untitled%2086.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2086.png"/></a></figure><figure id="55bc03c7-a41a-4499-94af-c1265303db3d" class="image"><a href="Capstone%2054e85/Untitled%2087.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2087.png"/></a></figure></li></ul></li></ol><ol type="1" id="2f05becd-cdaf-437b-8d72-1f26799dfe58" class="numbered-list" start="4"><li>Notice that the target and virtual disk status is <strong>Not Connected</strong> this will be setup later<figure id="97b5ca79-6602-4cb6-bd7b-fe6d1fa1230a" class="image"><a href="Capstone%2054e85/Untitled%2088.png"><img style="width:624px" src="Capstone%2054e85/Untitled%2088.png"/></a></figure></li></ol></div><h2 id="b9e92195-6002-4a8c-b35e-a5f287c78996" class=""><details open=""><summary>8.7 Create a 2GB vDisk for the Quorum Witness </summary></details></h2><div class="indented"><ol type="1" id="1863a065-a3a1-43b8-8a81-39706d426f77" class="numbered-list" start="1"><li>From Server Manager go to File and Storage Services &gt; Volumes &gt; Storage Pools</li></ol><ol type="1" id="83090ac3-c048-4528-a68d-daf25799fb9c" class="numbered-list" start="2"><li>On <em>SAN</em> run create a virtual disk from the free 22 GB in <em>Pool1 </em>with the following PS script:<pre id="d7246f64-86a7-4839-a60b-4d7b405e0941" class="code"><code># Create a RAID 6 virtual disk by setting resiliency=parity &amp; physical disk redundancy=2
New-VirtualDisk `
-StoragePoolFriendlyName &quot;Pool1&quot; `
-FriendlyName &quot;HVWitness&quot; `
-Size 2GB `
-ProvisioningType Fixed `
-ResiliencySettingName &quot;Parity&quot; `
-PhysicalDiskRedundancy 2</code></pre><figure id="e1589ca3-7878-444e-8ba8-469c46bf2cc7" class="image"><a href="Capstone%2054e85/Untitled%2089.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2089.png"/></a><figcaption>Access a PS session on SAN from Server Manager on Thinkpad (or connect to the VM directly)</figcaption></figure><figure id="9bbedbd3-a25e-4ac3-84e6-ae06e5619db4" class="image"><a href="Capstone%2054e85/Untitled%2090.png"><img style="width:528px" src="Capstone%2054e85/Untitled%2090.png"/></a></figure></li></ol><ol type="1" id="5288524d-fa77-448c-aa00-5b3b614b54a3" class="numbered-list" start="3"><li>From Volume &gt; Disks, bring <em>HVData</em> online, initialize, create volume<figure id="b5e2d0af-a8d4-4789-b023-aca223aa2a67" class="image"><a href="Capstone%2054e85/Untitled%2091.png"><img style="width:432px" src="Capstone%2054e85/Untitled%2091.png"/></a></figure></li></ol><ol type="1" id="f5ce3b32-d30e-4fab-b1a2-05b5f8712d45" class="numbered-list" start="4"><li>Go to the iSCSI tab &gt; click <strong>TASKS</strong> for iSCSI Virtual Disks &gt; Click <strong>New iSCSI Virtual Disk</strong></li></ol><ol type="1" id="f8e0eb5d-35a4-45ba-b551-a96a19cf04d8" class="numbered-list" start="5"><li>Complete the iSCSI Virtual Wizard and add <em>HVWitness</em><ul id="f1763ace-39a0-4894-ba38-5af7ce5900e6" class="bulleted-list"><li style="list-style-type:disc">Notice that the existing iSCSI target already exists from the last disk</li></ul></li></ol><ol type="1" id="fa9c57c8-5596-4140-86df-8451c5ae2ba5" class="numbered-list" start="6"><li>❗Notice the change of free space on the virtual disk before and after the iSCSI virtual disk has been made - this is expected<figure id="20382cb7-8660-4d00-b2b8-4970a8cec0d1" class="image"><a href="Capstone%2054e85/Untitled%2092.png"><img style="width:720px" src="Capstone%2054e85/Untitled%2092.png"/></a></figure></li></ol><ol type="1" id="245c4d45-6a7d-4722-acd3-5fff51ba8272" class="numbered-list" start="7"><li>(Optional) On <em>SAN</em> enter <code>Get-PSDrive</code> in PowerShell to see the volumes<ul id="ff548e4d-8bd4-4677-9615-6684201e6b91" class="bulleted-list"><li style="list-style-type:disc">D:\→ HV Data</li></ul><ul id="ba665484-f551-46af-9d3f-50accbc7a92e" class="bulleted-list"><li style="list-style-type:disc">E:\→ HVWitness</li></ul><figure id="76a84f19-0ae8-488d-a3a7-e54863621a07" class="image"><a href="Capstone%2054e85/Untitled%2093.png"><img style="width:576px" src="Capstone%2054e85/Untitled%2093.png"/></a></figure></li></ol><ol type="1" id="fdd3e768-b0ea-406f-8499-8553a08541d1" class="numbered-list" start="8"><li>Shut down the <em>SAN</em> virtual machine</li></ol><ol type="1" id="ad8bdbb0-8af7-4805-854d-62f5646b43c6" class="numbered-list" start="9"><li>Set the memory to 512 MB Static</li></ol></div><h1 id="d009e9ed-09c4-482e-925d-4d464003bad6" class="">9.0 Configure 2 Nested Hyper-V Failover Cluster Servers</h1><p id="7c87cf7e-98dc-4144-bea7-c7a455fba554" class="">Create 2 nested Hyper-V servers which will contain <em>FILE1</em>, <em>FILE2</em>, and <em>DC2 </em>VMs. Each Hyper-V machine needs an external switch for LAN and HB with the network adapters set to enable MAC spoofing. The nested Hyper-V machines will connect to the iSCSI SAN and the disk will be a cluster shared disk (CSV) to allow both VMs access at the same time. Both HV’s will be clustered together to allow for resiliency and live migration of VM’s.</p><h2 id="e7d28506-b7e1-4b7e-a4fd-d7e99e87341d" class=""><details open=""><summary>9.1 Create the Hyper-V VM &amp; Complete Post-Install Tasks</summary></details></h2><div class="indented"><ol type="1" id="027f1678-5df3-451c-b3e7-01208b9c6ab4" class="numbered-list" start="1"><li>Create a VM named “HV1” with 4GB of RAM using the script from Appendix E</li></ol><ol type="1" id="136b4bbf-d64b-49a5-abd9-c1130a84bc9c" class="numbered-list" start="2"><li>Start the virtual machine <em>HV1</em> and set the administrator password to <code>PaSSw0rd</code></li></ol><ol type="1" id="edfb5861-ee97-43b8-a5ad-a80a20f99d75" class="numbered-list" start="3"><li>Enter <code>powershell</code> and run the post installation tasks script below: (See Appendix F for future VMs)<ul id="0845604c-526f-4bb4-a7c7-eb6405bfa3c7" class="bulleted-list"><li style="list-style-type:disc">$IP =<code> 192.168.3.5</code></li></ul><ul id="678401df-f07b-46f8-8398-329f60795dae" class="bulleted-list"><li style="list-style-type:disc">$SrvName = <code>HV1</code></li></ul><ul id="d770103c-1ff5-4bed-aa3c-6cbf9f667054" class="bulleted-list"><li style="list-style-type:disc">$SrvOUPath = <code>OU=HYPERV,OU=Servers,DC=cap,DC=int</code></li></ul><pre id="8e0883dd-8e08-4026-ae28-ff61e11a6ead" class="code code-wrap"><code>#
# Post-installation tasks
#
$IP = Read-Host -Prompt &#x27;Enter IP 192.168.3.x&#x27;
$SrvName = Read-Host -Prompt &#x27;EnterServerNAME&#x27;
$SrvOUPath = Read-Host -Prompt &#x27;AD Path OU=X,OU=Servers,DC=cap,DC=int&#x27;
$MaskBits = 28
$Gateway = &quot;192.168.3.14&quot;
$Dns = &quot;192.168.3.1&quot;
$IPType = &quot;IPv4&quot;


# Retrieve the network adapter that you want to configure
$adapter = Get-NetAdapter | ? {$_.Status -eq &quot;up&quot;}
# Remove any existing IP, gateway from our ipv4 adapter
If (($adapter | Get-NetIPConfiguration).IPv4Address.IPAddress) {
 $adapter | Remove-NetIPAddress -AddressFamily $IPType -Confirm:$false
}
If (($adapter | Get-NetIPConfiguration).Ipv4DefaultGateway) {
 $adapter | Remove-NetRoute -AddressFamily $IPType -Confirm:$false
}
 # Configure the IP address and default gateway
$adapter | New-NetIPAddress `
 -AddressFamily $IPType `
 -IPAddress $IP `
 -PrefixLength $MaskBits `
 -DefaultGateway $Gateway
# Configure the DNS client server IP addresses
$adapter | Set-DnsClientServerAddress -ServerAddresses $DNS
# Rename the Network Adapter
Rename-NetAdapter -Name &quot;Ethernet&quot; -NewName &quot;LAN&quot;

# Name Computer, add to Domain and OU placement
$cred = Get-Credential cap\aidan
Add-Computer -DomainName cap.int -Credential $cred -OUPath $SrvOUPath
$computer = Get-WmiObject win32_computersystem
$r = $computer.rename(&quot;$SrvName&quot;, $cred.GetNetworkCredential().Password, $cred.username)

#Rename the local admin account
Rename-LocalUser -Name &quot;Administrator&quot; -NewName &quot;_lsysadmin&quot;

# Restart-Computer -Force</code></pre><figure id="e4ff588e-ebf6-4c6c-ae97-02ef196b0921" class="image"><a href="Capstone%2054e85/Untitled%2094.png"><img style="width:480px" src="Capstone%2054e85/Untitled%2094.png"/></a></figure></li></ol><ol type="1" id="bba9eea6-2c73-4f34-81b6-5dc03e4c10dd" class="numbered-list" start="4"><li>When complete enter<code>Restart-Computer -Force</code></li></ol><ol type="1" id="e7034a73-7998-4339-993e-eb80b6544279" class="numbered-list" start="5"><li>Login to the <em>SAN</em> virtual machine as <em>cap\aidan</em></li></ol><ol type="1" id="7cfb3de7-bfe5-42c3-8cc3-796042698777" class="numbered-list" start="9"><li>Complete the following post-install tasks in <code>powershell</code> (see Appendix G for future reference)<ul id="d03f9882-731f-41e4-a112-c628f214d3fb" class="bulleted-list"><li style="list-style-type:disc"><code>whoami</code>: verify server is a domain member and that the admin <em>aidan@cap.int</em> is logged in</li></ul><ul id="6ba9bf05-b2ac-4949-ae42-9ce3fc387243" class="bulleted-list"><li style="list-style-type:disc"><code>tracert google.ca</code>: verify internet connectivity and DNS</li></ul><ul id="c98a33b8-5c57-4f2e-85a0-0e8ed170e77d" class="bulleted-list"><li style="list-style-type:disc"><code>ping LinDHCP</code>: test DNS to a domain server</li></ul><ul id="35d3d455-a987-41bb-b4c8-c1ec3183a015" class="bulleted-list"><li style="list-style-type:disc"><code>ipconfig</code>: verify IPv4 address, subnet, default gateway</li></ul><ul id="0bb3d9f7-e5d7-4804-9e3d-cc0e038034d0" class="bulleted-list"><li style="list-style-type:disc"><code>Get-LocalUser</code>: verify the local admin account has been renamed to <em>_lsysadmin</em></li></ul><ul id="0dca097b-54c9-4b31-8067-2d2470ec43a7" class="bulleted-list"><li style="list-style-type:disc"><code>Get-NetAdapter</code>: verify the network adapter has been renamed<figure id="d79bdbd2-cb10-4e48-885b-293ef3cccf7b" class="image"><a href="Capstone%2054e85/Untitled%2095.png"><img style="width:432px" src="Capstone%2054e85/Untitled%2095.png"/></a></figure><figure id="31ec1b0c-c873-4455-981f-aee761eec9b4" class="image"><a href="Capstone%2054e85/Untitled%2096.png"><img style="width:432px" src="Capstone%2054e85/Untitled%2096.png"/></a></figure></li></ul></li></ol><ol type="1" id="256d11dd-805b-442a-bcac-69c4b4c9f1d2" class="numbered-list" start="10"><li>Complete the following post-install tasks in <code>sconfig</code> (see Appendix G for future reference)<ul id="8056224b-d576-448f-9f65-2a289111c601" class="bulleted-list"><li style="list-style-type:disc"><code>11</code> Windows Activation, verify Windows is activated and has the 180 day trial</li></ul><ul id="f4b5a8cf-08d3-4a5a-841d-eb476ebc1d97" class="bulleted-list"><li style="list-style-type:disc"><code>6</code> Download and Install updates </li></ul></li></ol><ol type="1" id="32ddd0e1-cfb3-433c-86eb-c1a990b256d9" class="numbered-list" start="11"><li>Complete the following post-install tasks from <strong>Server Manager</strong> (see Appendix G for future reference)<ul id="b9efdae6-e5e6-4f38-a856-3a1d3e36ce3f" class="bulleted-list"><li style="list-style-type:disc">Open <strong>DNS Manager</strong> and view the host A record</li></ul><ul id="104f8439-40a0-447c-97d7-39fb9c639379" class="bulleted-list"><li style="list-style-type:disc">Open <strong>ADUC </strong>and verify the computer object is in the correct OU<figure id="229a6098-d558-41c9-ab16-a58cc625beb2" class="image"><a href="Capstone%2054e85/Untitled%2097.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2097.png"/></a></figure></li></ul></li></ol><ol type="1" id="6d77a236-6292-4a6f-acfc-8ebd5cb4e68f" class="numbered-list" start="12"><li>Complete the following post-install tasks from <em>Thinkpad </em>(see Appendix G for future reference)<ul id="9ba357de-5a17-4dc9-ab96-536ae25d73ba" class="bulleted-list"><li style="list-style-type:disc">Add the <em>HV1 </em>VM to Server Manager and manage as <code>cap\aidan</code></li></ul><ul id="24d45d7c-f21c-463c-9005-4429473c59d1" class="bulleted-list"><li style="list-style-type:disc">⏲ Checkpoint (if needed, but try to keep to a minimum)</li></ul></li></ol><p id="f88c8b94-c3b0-4225-ae6a-c6516e469778" class="">10. Repeat all steps to make the 2nd server <em>HV2</em></p></div><h2 id="0860d1ec-e5be-437a-9dd4-4b2f7ae83d9b" class=""><details open=""><summary>9.2 Complete Nested Hypervisor Hardware and Network Requirements</summary></details></h2><div class="indented"><ol type="1" id="bbd430e6-6730-4ea9-937b-d72a10ec6925" class="numbered-list" start="1"><li>On <em>Thinkpad’s</em> Hyper-V manager, open the settings for <em>HV1</em></li></ol><ol type="1" id="b3c2295b-d105-47bc-82fb-d4579dfd47f7" class="numbered-list" start="2"><li>Under Hardware &gt; Processor &gt; Set to <strong>2 Virtual Processors</strong></li></ol><ol type="1" id="56116725-4484-4702-98e4-3230d596e9c0" class="numbered-list" start="3"><li>Under Hardware &gt; Network Adapter LAN &gt; Advanced Features &gt; Check <strong>Enable MAC address spoofing</strong><figure id="2bfc8f2a-3f64-4b30-8a92-1f72492adc26" class="image"><a href="Capstone%2054e85/Untitled%2098.png"><img style="width:480px" src="Capstone%2054e85/Untitled%2098.png"/></a></figure></li></ol><ol type="1" id="d44406dc-bdda-4f70-9d40-f7460c4d2958" class="numbered-list" start="4"><li>Add Network Adapter’s to the iSCSI, HB, and LM switches </li></ol><ol type="1" id="4ba50ed1-7dfb-4fc7-bfd2-5d2bb58ef85d" class="numbered-list" start="5"><li>Start <em>HV1</em> and enter <code>sconfig</code> &gt; <code>8</code> view network settings &amp; view the MAC addresses of each adapter in Hyper-V Manager<figure id="f29d7784-fa71-43e8-b28c-9422406045e2" class="image"><a href="Capstone%2054e85/Untitled%2099.png"><img style="width:672px" src="Capstone%2054e85/Untitled%2099.png"/></a><figcaption>The order the net adapter is added in HV1 settings &gt; the index #.</figcaption></figure></li></ol><ol type="1" id="6e92b559-7e2b-4557-8021-10a993a38297" class="numbered-list" start="6"><li>From <code>sconfig</code> set the network adapters with the following:<table id="c44191b7-a661-4a48-8e49-5a044409697f" class="simple-table"><thead><tr id="4449f4ba-c83a-49ce-a34d-a49a96534771"><th id="gPZv" class="simple-table-header">Index# - Network</th><th id="wAGy" class="simple-table-header">IP Address</th><th id=":YVc" class="simple-table-header">Subnet</th></tr></thead><tbody><tr id="eed7ff2f-30a8-4998-b724-86252117b613"><td id="gPZv">1 - LAN</td><td id="wAGy">192.168.3.5</td><td id=":YVc">255.255.255.240</td></tr><tr id="03a9461c-7990-4573-9ad6-881c8a2abe71"><td id="gPZv">2 - iSCSI</td><td id="wAGy">192.168.10.1</td><td id=":YVc">255.255.255.248</td></tr><tr id="bd58ccf7-0c52-4ede-9111-4ae5d7606d4a"><td id="gPZv">3 - HB</td><td id="wAGy">192.168.20.1</td><td id=":YVc">255.255.255.248</td></tr><tr id="a9c1cca9-1dd1-41e3-af19-8327551f327b"><td id="gPZv">4 - LM</td><td id="wAGy">192.168.30.1</td><td id=":YVc">255.255.255.252</td></tr></tbody></table><figure id="5e85af24-07cb-45b7-b8ba-cc85c7ca27e5" class="image"><a href="Capstone%2054e85/Untitled%20100.png"><img style="width:480px" src="Capstone%2054e85/Untitled%20100.png"/></a></figure></li></ol><ol type="1" id="2f924c6c-6bd7-44ba-977e-5e9a1bfc5812" class="numbered-list" start="7"><li>From PowerShell rename the network adapters<p id="1ebdc154-3b51-4b21-a675-4c8ffff25af7" class="">❗ Match the Ethernet to the MAC address each time before running!</p><pre id="30c1f37c-e5d2-4643-903c-6cbeb31b2207" class="code"><code>Get-NetAdapter | Sort-Object -Property &quot;InterfaceDescription&quot;

Rename-NetAdapter -Name &quot;Ethernet&quot; -NewName &quot;iSCSI&quot;
Rename-NetAdapter -Name &quot;Ethernet 2&quot; -NewName &quot;HB&quot;
Rename-NetAdapter -Name &quot;Ethernet 3&quot; -NewName &quot;LM&quot;
#View
Get-NetAdapter | Sort-Object -Property &quot;InterfaceDescription&quot;</code></pre></li></ol><ol type="1" id="da36b6fc-66fa-4001-b9a9-ca9e0bbf24af" class="numbered-list" start="8"><li>Restart the server to apply the renaming changes with <code>Restart-Computer -Force</code></li></ol><ol type="1" id="547e235e-4c6a-4d41-bd4d-bd9128e8517f" class="numbered-list" start="9"><li>Verify that the proper IP address is assigned to the network adapter (compare to MAC address) and that the net adapter is renamed with <code>ipconfig /all</code>, Hyper-V Manager, and/or with the following code:<pre id="ec7c11b1-4074-4ed3-b6c5-b23130ac1190" class="code"><code>#View
Get-NetAdapter | Sort-Object -Property &quot;ifIndex&quot; -Descending |Format-Table -Property &quot;ifIndex&quot;, &quot;Name&quot;, &quot;MacAddress&quot; 
Get-NetIPAddress -AddressFamily IPv4 | Sort-Object -Property &quot;ifIndex&quot; -Descending | Format-Table -Property &quot;ifIndex&quot;, &quot;IPAddress&quot;, &quot;PrefixLength&quot;
Get-NetIPConfiguration | Sort-Object -Property &quot;InterfaceIndex&quot; -Descending |  Format-Table -Property &quot;InterfaceIndex&quot;, &quot;InterfaceAlias&quot;, &quot;IPv4Address&quot;</code></pre><figure id="b862020f-e47c-4d30-ac76-a410ba6d232d" class="image"><a href="Capstone%2054e85/Untitled%20101.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20101.png"/></a></figure><figure id="e5376359-e4bc-4824-a429-af4edef19739" class="image"><a href="Capstone%2054e85/Untitled%20102.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20102.png"/></a></figure></li></ol><ol type="1" id="c8b825c0-0af8-428d-9f17-fb660ae64fab" class="numbered-list" start="10"><li>Enable jumbo frames on the network adapter connected to iSCSI with the following:<pre id="d30f2564-6aeb-4f4a-a220-0bd6f5514bbd" class="code"><code># View settings before
Get-NetAdapterAdvancedProperty -Name &quot;iSCSI&quot;
# Enable jumbo frames and set size
Set-NetAdapterAdvancedProperty -Name &quot;iSCSI&quot; -RegistryKeyword &quot;*JumboPacket&quot; -Registryvalue 9014
# View changes
Get-NetAdapterAdvancedProperty -Name &quot;iSCSI&quot;

# Test sending jumbo frames (after the VM&#x27;s have been made and also have jumbo frames enabled)
ping 192.168.10.3 -f -l 8500</code></pre></li></ol><ol type="1" id="8519cad9-521f-4ddb-9f9b-c56ab8992d77" class="numbered-list" start="11"><li>From <em>HV1 </em>send a ping with jumbo frames to <em>SAN </em><code>ping 192.168.10.3 -f -l 8500</code>  <ul id="d0b148f0-1781-4186-b15a-babd39009f57" class="bulleted-list"><li style="list-style-type:disc">❗ No DNS settings are set for this network requiring IP addresses</li></ul><ul id="397b0348-12ab-4914-9dbf-9227423229ba" class="bulleted-list"><li style="list-style-type:disc"><code>-f</code> Specifies that echo Request messages are sent with the Do not Fragment flag in the IP header set to 1 (available on IPv4 only). The echo Request message can&#x27;t be fragmented by routers in the path to the destination. This parameter is useful for troubleshooting path Maximum Transmission Unit (PMTU) problems.</li></ul><ul id="a953998e-29b2-4550-be76-dcafa1cc5cf8" class="bulleted-list"><li style="list-style-type:disc"><code>/l &lt;size&gt;</code> Specifies the length, in bytes, of the Data field in the echo Request messages. The default is 32. The maximum size is 65,527.</li></ul><figure id="a1c05988-efab-468e-9524-f341643ae4f5" class="image"><a href="Capstone%2054e85/Untitled%20103.png"><img style="width:540px" src="Capstone%2054e85/Untitled%20103.png"/></a></figure></li></ol><ol type="1" id="5372921b-e108-4eab-b6df-201d75cbbd34" class="numbered-list" start="12"><li>Open the firewall so the server allows ICMP pings<pre id="3ff03c9f-b67f-4abc-8df0-187da2c0028c" class="code"><code>#Allow Ping
netsh advfirewall firewall add rule name=&quot;ICMP Ping Allow&quot; protocol=&quot;icmpv4:8,any&quot; dir=in action=allow

#Block ping (for referenc)
netsh advfirewall firewall add rule name=&quot;ICMP Ping Block&quot; protocol=&quot;icmpv4:8,any&quot; dir=in action=block</code></pre></li></ol><ol type="1" id="2989e2c0-ea9b-4003-ab22-6b59ba34dc65" class="numbered-list" start="13"><li>Shutdown the <em>HV1</em> VM</li></ol><ol type="1" id="c488f221-6521-4099-8cc0-5e4f9fd8afb7" class="numbered-list" start="14"><li>Enable nested virtualization for the virtual machine by running the following from PowerShell on the host <em>Thinkpad</em>:<pre id="ef70692d-f8a5-406e-8051-66f4b2fc270b" class="code"><code>#Run from Thinkpad Host while the guest VM is off
Get-VMProcessor -VMName HV1 | fl
Set-VMProcessor -VMName HV1 -ExposeVirtualizationExtensions $true </code></pre><figure id="b27fa6b7-ee2c-4fb0-8c56-fc3113e795ee" class="image"><a href="Capstone%2054e85/Untitled%20104.png"><img style="width:432px" src="Capstone%2054e85/Untitled%20104.png"/></a></figure></li></ol><ol type="1" id="8b27c165-dac5-4f5f-b03c-5167333665f4" class="numbered-list" start="15"><li>Repeat steps 1-14 for <em>HV2</em><table id="01099267-5d66-4712-8ae0-a2a2080e0c66" class="simple-table"><thead><tr id="e988b979-763f-4c65-8196-ae12ae8b71a1"><th id="gPZv" class="simple-table-header">Index# - Network</th><th id="wAGy" class="simple-table-header">IP Address</th><th id=":YVc" class="simple-table-header">Subnet</th></tr></thead><tbody><tr id="2e5c24f8-a814-4104-9a47-19b1e5149fc4"><td id="gPZv">1 - LAN</td><td id="wAGy">192.168.3.6</td><td id=":YVc">255.255.255.240</td></tr><tr id="6eb6cb15-5fdf-4487-9b6d-686dee98341f"><td id="gPZv">2 - iSCSI</td><td id="wAGy">192.168.10.2</td><td id=":YVc">255.255.255.248</td></tr><tr id="10489bfe-4ee7-4b51-b274-8c0fce097544"><td id="gPZv">3 - HB</td><td id="wAGy">192.168.20.2</td><td id=":YVc">255.255.255.248</td></tr><tr id="09574bd9-b4cd-4986-a2b0-b3343f122a3f"><td id="gPZv">4 - LM</td><td id="wAGy">192.168.30.2</td><td id=":YVc">255.255.255.252</td></tr></tbody></table></li></ol></div><h2 id="652abf57-e36d-4508-953f-3d2ca169684f" class=""><details open=""><summary>9.3 Connect HV1 to the iSCSI Target</summary></details></h2><div class="indented"><ol type="1" id="4866df09-ab68-4cdf-b9a5-772a03c614ec" class="numbered-list" start="1"><li>From <em>HV1</em> enter<code>iscsicpl</code> to open the iSCSI Initiator</li></ol><ol type="1" id="f8732693-33c8-4aac-ae18-ca9d595be329" class="numbered-list" start="2"><li>In the iSCSI Initiator Properties popup, click the <strong>Discovery </strong>tab<ol type="a" id="4ce56806-ce92-47e2-9205-5c3ece036f90" class="numbered-list" start="1"><li>Click <strong>Discover Portal</strong> and enter in SAN’s IP <code>192.168.10.3</code> and click <strong>Advanced...</strong></li></ol><ol type="a" id="f4e28e4d-276a-46f8-aaad-5d6fa602b0fe" class="numbered-list" start="2"><li>Set Local adapter: to <strong>Microsoft iSCSI Initiator</strong></li></ol><ol type="a" id="5108e48d-fcd0-492b-a9ec-6a9ea8e3b23c" class="numbered-list" start="3"><li>Set Initiator IP: <strong>192.168.10.1</strong> the IP of <em>HV1</em></li></ol><ol type="a" id="df0d8ac4-f427-4dcb-9b48-6d115d80cbfb" class="numbered-list" start="4"><li>Click <strong>OK</strong> at the bottom of the window</li></ol></li></ol><ol type="1" id="48ac35b5-e2cc-4b2f-a361-49d5212fe4ce" class="numbered-list" start="3"><li>Click on the <strong>Targets</strong> tab &gt; click <strong>Connect</strong><ul id="b8bd1b69-69f7-42e7-b8a1-aa6d5bf6f297" class="bulleted-list"><li style="list-style-type:disc">If the connection fails, restart the Storage Server (SAN) or restart the iSCSI Target Service.</li></ul><figure id="c1819b9f-e599-4d5f-9907-e86d4d0a239b" class="image"><a href="Capstone%2054e85/Untitled%20105.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20105.png"/></a></figure></li></ol><p id="51785b39-1d4b-4cfd-8d85-ad1859112dd7" class=""><div class="indented"><figure id="47b5a369-3476-4a54-a589-118739dc80f1" class="image"><a href="Capstone%2054e85/Untitled%20106.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20106.png"/></a><figcaption>Refresh Server Manager and see the target status = Connected</figcaption></figure></div></p><ol type="1" id="a31ea7aa-2a23-43c4-b67d-61fc43d67eb5" class="numbered-list" start="4"><li>Go to Volumes &gt; Disks &gt; and expand <strong>HV1</strong> </li></ol><ol type="1" id="988bc19b-22e6-47ab-a9c7-751a4d719978" class="numbered-list" start="5"><li>Right click iSCSI disk &gt; bring online, initialize, and create a volume with NTFS named “HVData”<figure id="c634af52-abc3-4c77-b7c2-a60d9f8a84c8" class="image"><a href="Capstone%2054e85/Untitled%20107.png"><img style="width:432px" src="Capstone%2054e85/Untitled%20107.png"/></a></figure><figure id="98521c6b-b229-4244-99b5-3a9548c62527" class="image"><a href="Capstone%2054e85/Untitled%20108.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20108.png"/></a><figcaption>View the drives on HV1 with the PS command <code>Get-PSDrive</code></figcaption></figure></li></ol><ol type="1" id="b9ddbf3f-9b54-40ab-943e-ea2d8ac3c257" class="numbered-list" start="4"><li>Enable File Sharing by running the following command on <em>HV1’s</em> PowerShell:<ul id="95973a55-ec8b-4f18-b3be-81f0502a943c" class="bulleted-list"><li style="list-style-type:disc"><code>Set-NetFirewallRule -DisplayGroup &quot;File And Printer Sharing&quot; -Enabled True -Profile Any</code></li></ul></li></ol><ol type="1" id="7b063ce2-3705-4a26-ae1b-d9537feb054f" class="numbered-list" start="5"><li>Make the directories VMs\VHDX on the iSCSI virtual disk from file explorer <code>\\192.168.3.5\d$</code> or PowerShell <code>mkdir VMs\VHDX</code><figure id="11fa1e19-a8e0-4bef-b6a7-5db1106167dd" class="image"><a href="Capstone%2054e85/Untitled%20109.png"><img style="width:672px" src="Capstone%2054e85/Untitled%20109.png"/></a></figure></li></ol><p id="9895a8e9-5837-4a9a-9c91-9340eccef247" class="">8. Repeat steps 1-3 &amp; 6 on <em>HV2 </em>for the iSCSI initiator. The drive does not need to be formatted again and note that only 1 VM can be connected at a time<div class="indented"><figure id="34ba4162-8d7b-4eef-ba77-0c8cdf85169d" class="image"><a href="Capstone%2054e85/Untitled%20110.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20110.png"/></a></figure><figure id="e45a7694-5740-4820-a0c1-7c004034d107" class="image"><a href="Capstone%2054e85/Untitled%20111.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20111.png"/></a></figure></div></p></div><h2 id="6843cb98-9598-4783-8ab5-0546e8879c68" class=""><details open=""><summary>9.4 Add the Hyper-V Role</summary></details></h2><div class="indented"><ol type="1" id="2e5cae3c-e6fc-44ca-aee0-532592e5108a" class="numbered-list" start="1"><li>‼ Login to account <em>cap\aidan</em> on Thinkpad and complete the rest of the project from here. Multiple issues are caused from working from the <em>thinkpad\aidan</em> account in future steps </li></ol><ol type="1" id="7738abbf-49ee-43e4-a67a-20356e5815a5" class="numbered-list" start="2"><li>⏲ Checkpoint DC1 and name it “Before Nested HV”</li></ol><ol type="1" id="3c1bcca0-6f54-4a74-ac29-b9c3e36502ac" class="numbered-list" start="3"><li>From Server Manager right-click <em>HV1</em> &gt; select <strong>Add Roles and Features</strong></li></ol><ol type="1" id="cf676199-ef71-4413-81f3-d768c4525340" class="numbered-list" start="4"><li>Complete the Add Roles and Features Wizard and install the role <strong>Hyper-V </strong>with the following:<ul id="8e34923d-ef8c-4ea6-a069-cdaf85eae031" class="bulleted-list"><li style="list-style-type:disc">Server Roles: Select <strong>Hyper-V</strong></li></ul><ul id="96d0accb-50b3-4a7c-a789-5678fc9f5f30" class="bulleted-list"><li style="list-style-type:disc">Features: ❗ Select <strong>Failover Clustering </strong>or install separately after</li></ul><ul id="5f0b1b7a-a49a-4b7a-8cce-be2cacbe5ad7" class="bulleted-list"><li style="list-style-type:disc">Virtual Switches: Leave all unchecked as switches will be made manually later</li></ul><ul id="08a750a5-a7ba-4f90-9844-c3dc75f48c49" class="bulleted-list"><li style="list-style-type:disc">Migration: Leave unchecked</li></ul><ul id="7718bd3f-2a27-47c5-800b-0f808d78d212" class="bulleted-list"><li style="list-style-type:disc">Default Stores: Default VHDX file location =  <code>D:\VMs\VHDX</code> , VM configuration files =  <code>D:\VMs</code></li></ul><ul id="e4d348f0-61c8-46c3-9c2a-a041b9d1ea73" class="bulleted-list"><li style="list-style-type:disc">Confirmation: Check <strong>Restart the destination server automatically if required</strong></li></ul><figure id="cec1b578-3e53-446a-9e64-5f4e48547459" class="image"><a href="Capstone%2054e85/Untitled%20112.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20112.png"/></a></figure></li></ol><ol type="1" id="384b9d67-b93b-4245-9bda-6e3ff2dfb01e" class="numbered-list" start="5"><li>Verify the role installation by running the following PS command on <em>HV1</em><ul id="b50f0323-ddf5-4fd0-bb41-458d9c41ac9b" class="bulleted-list"><li style="list-style-type:disc"><code>Get-WindowsFeature Hyper*</code></li></ul><figure id="c76d61e5-e746-463b-a2da-2ac3801089c3" class="image"><a href="Capstone%2054e85/Untitled%20113.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20113.png"/></a></figure></li></ol><ol type="1" id="e07f9a6b-116c-4ad0-8434-a7dc1699a829" class="numbered-list" start="6"><li>From Hyper-V Manager on <em>Thinkpad,</em> right click <strong>Hyper-V Manager</strong><em><strong><strong> &gt; </strong></strong></em><strong><strong>Connect to Server &gt;</strong></strong> Browse and select <em>HV1</em><figure id="4179f694-77b5-4e1c-8a06-ef683ae3a673" class="image"><a href="Capstone%2054e85/Untitled%20114.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20114.png"/></a></figure></li></ol><ol type="1" id="3c67c844-ba2a-4591-aba8-e232ddf102b1" class="numbered-list" start="7"><li>Click <strong>HV1 </strong>in Hyper-V Manager &gt; Virtual Switch Manager</li></ol><ol type="1" id="613a4f6e-58a2-4a76-a244-64826c63da7b" class="numbered-list" start="8"><li>Create a new virtual network switch named “LANext” and connect it to <strong>External network: Microsoft Hyper-V Network Adapter</strong><figure id="aac0876a-ce0a-4cf2-b4e9-e2da551a144b" class="image"><a href="Capstone%2054e85/Untitled%20115.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20115.png"/></a></figure><figure id="9684b659-908a-4ae2-878f-b08a47d9bdfd" class="image"><a href="Capstone%2054e85/Untitled%20116.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20116.png"/></a></figure></li></ol><p id="6ffa8aa4-ef94-4f19-90e2-41714291eb04" class="">
</p></div><h2 id="edd8e9a2-fc19-4539-ba14-c0328eb92be2" class=""><details open=""><summary>9.5 Configure Hyper-V Failover Clustering</summary></details></h2><div class="indented"><ol type="1" id="1f961488-0c77-497f-b601-acd6c8d1bd70" class="numbered-list" start="1"><li>From Server Manager install the feature <strong>Failover Clustering</strong> to <em>HV1</em> &amp; <em>HV2</em><figure id="5bdf6e67-792b-4509-bf52-6d79d0c2f43c" class="image"><a href="Capstone%2054e85/Untitled%20117.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20117.png"/></a></figure></li></ol><ol type="1" id="24f6429b-c1c9-4dac-aac0-d694922edbbc" class="numbered-list" start="2"><li>In Server Manager go to the <strong>Tools</strong> drop down and select <strong>Failover Cluster Manager</strong></li></ol><ol type="1" id="b54b6ff1-e6f0-4730-b08a-3a4ed2ac6218" class="numbered-list" start="3"><li>Right-click <strong>Failover Cluster Manager</strong> &gt; Select <strong>Validate Configuration</strong></li></ol><ol type="1" id="09e23c3f-51c2-42d0-ab7c-7ac9c940016b" class="numbered-list" start="4"><li>Complete the <strong>Validate a Configuration Wizard</strong> with the following:<ul id="6d416071-61f7-44a4-9ad7-a5a0799395e8" class="bulleted-list"><li style="list-style-type:disc">Select Servers: <code>HV1.cap.int</code> and <code>HV2.cap.int</code></li></ul><ul id="83a8c029-2ba4-4d26-9155-e08fbc727d24" class="bulleted-list"><li style="list-style-type:disc">Testing Options: Select <strong>Run all tests</strong></li></ul><ul id="b6bd42fb-d376-404a-9fba-79f4353b0a20" class="bulleted-list"><li style="list-style-type:disc">Summary: View results and any errors. Check <strong>Create the cluster now using the validated nodes</strong></li></ul><figure id="e3cd6b40-6971-4cad-b706-a01ad7120780" class="image"><a href="Capstone%2054e85/Untitled%20118.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20118.png"/></a></figure><figure id="f6a2c5d3-4a07-4217-8df3-64327ff5d000" class="image"><a href="Capstone%2054e85/Untitled%20119.png"><img style="width:480px" src="Capstone%2054e85/Untitled%20119.png"/></a></figure></li></ol><ol type="1" id="3d7021dd-61fe-4321-927f-d267450856af" class="numbered-list" start="5"><li>Complete the Create Cluster Wizard with the following:<ul id="990e2cd6-7bc4-4397-a11c-231d004ec4a5" class="bulleted-list"><li style="list-style-type:disc">Access Point for Administering the Cluster: Name = <code>HV-Cluser</code>, Address = <code>192.168.3.7</code></li></ul><ul id="7ded9987-82b4-461d-912f-ed5c5de47639" class="bulleted-list"><li style="list-style-type:disc">Confirmation: Uncheck <strong>Add all eligible storage to the cluster</strong><figure id="505d5adb-6742-4151-9531-ecadd67a2e9e" class="image"><a href="Capstone%2054e85/Untitled%20120.png"><img style="width:672px" src="Capstone%2054e85/Untitled%20120.png"/></a></figure></li></ul><figure id="3def620b-0fd6-41a7-86fe-649f8f89dc6b" class="image"><a href="Capstone%2054e85/Untitled%20121.png"><img style="width:432px" src="Capstone%2054e85/Untitled%20121.png"/></a></figure></li></ol><ol type="1" id="ec7ce23c-b635-4288-ac52-f09801891a15" class="numbered-list" start="6"><li>View HV-Cluster.cap.int<figure id="51aff3ec-b8e8-4cdf-854b-17d2deeabf8a" class="image"><a href="Capstone%2054e85/Untitled%20122.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20122.png"/></a></figure></li></ol><ol type="1" id="784d69e6-4999-4d3a-b08d-6e0bf2cd7122" class="numbered-list" start="7"><li>In Failover Cluster Manager navigate to HV-Cluster.cap.int &gt; Storage &gt; Disks</li></ol><ol type="1" id="19f28b9c-f783-4336-bc60-9f4a86fdd43b" class="numbered-list" start="8"><li>Click <strong>Add Disk</strong> and add both Cluster Disk 1 and 2 (HVdata and Quorum)<figure id="f19bf417-3533-4a4a-a680-1a7115ca8329" class="image"><a href="Capstone%2054e85/Untitled%20123.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20123.png"/></a></figure></li></ol><ol type="1" id="f0af2bb4-f347-4169-8c52-5b74d424b8d1" class="numbered-list" start="9"><li>Rename the disks from <em>Cluster Disk #</em> to “HV-Data” and “HV-Witness”<figure id="71844a96-424f-489c-afb2-85efb26ac70a" class="image"><a href="Capstone%2054e85/Untitled%20124.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20124.png"/></a></figure></li></ol><ol type="1" id="1ae4f01c-e78b-42dc-850a-ea775f6df74a" class="numbered-list" start="10"><li>Right click the disk <strong>HV-Data</strong> &gt; Select <strong>Add to Cluster Shared Volumes</strong><ul id="64da7fce-00b1-45d6-ac33-3b75024f0867" class="bulleted-list"><li style="list-style-type:disc">Cluster Shared Volumes (CSV) enable multiple nodes in a Windows Server failover cluster to simultaneously have read-write access to the same LUN (disk) that is provisioned as an NTFS volume<figure id="63c6fd27-790f-45c5-a914-57778ba4130c" class="image"><a href="Capstone%2054e85/Untitled%20125.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20125.png"/></a></figure></li></ul><figure id="a911a6ad-5c8f-4532-af59-1eb73278633f" class="image"><a href="Capstone%2054e85/Untitled%20126.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20126.png"/></a><figcaption>HVData D:\ is now in the C:\ drive </figcaption></figure><figure id="462cdb51-2750-4571-858c-09bdc63db152" class="image"><a href="Capstone%2054e85/Untitled%20127.png"><img style="width:336px" src="Capstone%2054e85/Untitled%20127.png"/></a></figure><figure id="7fc364b5-1d30-442d-9620-25bb9b17505a" class="image"><a href="Capstone%2054e85/Untitled%20128.png"><img style="width:480px" src="Capstone%2054e85/Untitled%20128.png"/></a></figure><figure id="88c060fc-ee52-4f5a-80b0-c95acc819db8" class="image"><a href="Capstone%2054e85/Untitled%20129.png"><img style="width:480px" src="Capstone%2054e85/Untitled%20129.png"/></a></figure></li></ol><ol type="1" id="d6ad1737-5480-435c-beea-742b21098dc2" class="numbered-list" start="11"><li>Right click <strong>HV-Cluster.cap.int</strong> &gt; More Actions &gt; Click <strong>Configure Cluster Quorum Settings....</strong></li></ol><ol type="1" id="cee1c371-5c2d-4a20-a7e0-008b90777868" class="numbered-list" start="12"><li>Complete the Configure Cluster Quorum Wizard with the following:<ul id="4000cc7a-e2a4-46c7-b6f3-2ace65a88568" class="bulleted-list"><li style="list-style-type:disc">Select Quorum Configuration Option: Click <strong>Select the quorum witness</strong></li></ul><ul id="a1764548-f4e9-41cb-bfcf-6fe72f0567e9" class="bulleted-list"><li style="list-style-type:disc">Select Quorum Witness: Click <strong>Configure a disk witness</strong></li></ul><ul id="342c049d-6c6d-4233-b0f2-a01f27a44142" class="bulleted-list"><li style="list-style-type:disc">Configure Storage Witness: Click <strong>HV-Witness</strong><figure id="66f56f99-740b-46dc-98a1-bdbd6c45c281" class="image"><a href="Capstone%2054e85/Untitled%20130.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20130.png"/></a></figure><figure id="b95892ea-273f-4070-a95f-400086444426" class="image"><a href="Capstone%2054e85/Untitled%20131.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20131.png"/></a></figure></li></ul></li></ol><ol type="1" id="8423518e-784b-4bb6-99d0-3599c7d20284" class="numbered-list" start="13"><li>In Failover Cluster Manager &gt; Networks &gt; Rename the networks from <em>Cluster Network #</em> to the proper network name<figure id="44419af3-5ae8-42a5-b384-4fa4f6fac194" class="image"><a href="Capstone%2054e85/Untitled%20132.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20132.png"/></a></figure></li></ol><ol type="1" id="6b1e60cb-d200-4514-8420-1ff60defd898" class="numbered-list" start="14"><li>(Optional) Click through all the HV-Cluster.cap.int options<figure id="599b602b-d3e3-4209-bc47-65aeedc68a5c" class="image"><a href="Capstone%2054e85/Untitled%20133.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20133.png"/></a></figure></li></ol><ol type="1" id="9000516e-fc2c-4307-b3af-e6d18f9bbff5" class="numbered-list" start="15"><li>(Optional) Run <code>ipconfig</code> on <em>HV1 </em>and <em>HV2</em><figure id="51c5756d-5ef7-4027-9825-cf50c82a89d0" class="image"><a href="Capstone%2054e85/Untitled%20134.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20134.png"/></a></figure></li></ol><ol type="1" id="cdbd4428-3d0c-4d4c-b193-24364336524a" class="numbered-list" start="16"><li>(Optional) View Server Manager &gt; click <strong>Refresh </strong>&gt; and notice that <em>HV-Cluster</em> is added automatically<figure id="a9a105b9-ccf3-42b1-91cb-194b816be374" class="image"><a href="Capstone%2054e85/Untitled%20135.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20135.png"/></a></figure></li></ol></div><h2 id="ce9103a7-3e5d-4504-8896-a6c6c78c453b" class=""><details open=""><summary>9.6 Test Live Migration and Hyper-V Failover</summary></details></h2><div class="indented"><ol type="1" id="eb06ee1f-54ea-4ea9-92f5-3801d644e8b4" class="numbered-list" start="1"><li>Test failover clustering by pausing <strong>HV1 </strong>on <em>Thinkpad’s </em>Server Manager &gt; verify the cluster remains &gt; then resume <em>HV1</em></li></ol><ol type="1" id="8809235e-bb1a-479e-a86b-2b370f5a1bdd" class="numbered-list" start="2"><li>Test failover clustering by pausing <strong>HV2 </strong>on <em>Thinkpad’s </em>Server Manager &gt; verify the cluster remains &gt; then resume <em>HV2</em><figure id="c24672fa-e56a-4fde-9f2e-0dabd271b611" class="image"><a href="Capstone%2054e85/Untitled%20136.png"><img style="width:672px" src="Capstone%2054e85/Untitled%20136.png"/></a></figure></li></ol><ol type="1" id="55dd4f4c-96bf-47f0-b738-e967040bf3a0" class="numbered-list" start="3"><li>Go to Hyper-V Manager on <em>Thinkpad </em>&gt; Click HV2 &gt; Hyper-V Settings</li></ol><ol type="1" id="54eb8149-b76b-412c-9cee-52f3280f6bfa" class="numbered-list" start="4"><li>Change the default locations from D:\ to the ClusterStorage on C:\<ul id="1c791a69-9139-4a5b-85c4-9adf94d80f12" class="bulleted-list"><li style="list-style-type:disc">Virtual Hard Disks: <code>C:\ClusterStorage\volume1\vms\vhdx\</code></li></ul><ul id="2439b9ea-91f9-4b93-8384-7b252d27e29d" class="bulleted-list"><li style="list-style-type:disc">Virtual Machines: <code>C:\ClusterStorage\volume1\vms\</code></li></ul><figure id="31e28e0e-47f8-4bcf-95d5-85b8097e9398" class="image"><a href="Capstone%2054e85/Untitled%20137.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20137.png"/></a></figure></li></ol><ol type="1" id="6f526838-c2ac-40f1-a6ff-b32c446fbfb4" class="numbered-list" start="5"><li>Copy over the ParentServer2019-Core.vhdx file from <em>Thinkpad </em>to <code>\\192.168.3.5\c$\ClusterStorage\Volume1\VMs\VHDX</code> (or to <code>\\192.168.3.6</code> as both have access)<figure id="44b7252c-aa74-429a-ba67-82ac90ee3783" class="image"><a href="Capstone%2054e85/Untitled%20138.png"><img style="width:336px" src="Capstone%2054e85/Untitled%20138.png"/></a></figure></li></ol><ol type="1" id="c2528971-4786-4e70-9727-d01225e94932" class="numbered-list" start="6"><li>Go to Roles &gt; Click Virtual Machines... &gt; <strong>New Hard Disk... &gt;</strong> create a differencing vhdx named ‘File1’<figure id="bcc6e2b5-68c8-47e1-979a-e251c412fe61" class="image"><a href="Capstone%2054e85/Untitled%20139.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20139.png"/></a></figure></li></ol><ol type="1" id="38c4aa24-ae00-4be3-aa40-50fbdf39faa1" class="numbered-list" start="7"><li>In Roles &gt; Virtual Machines... &gt; Click <strong>New Virtual Machine...</strong> &gt; Create a VM named “File1” with 1024 MB Static Memory that is connected to the child differencing disk and the LAN external switch<figure id="f77e2aa2-dc89-4f23-8cb2-ce687fa94f9b" class="image"><a href="Capstone%2054e85/Untitled%20140.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20140.png"/></a></figure></li></ol><ol type="1" id="16ae0e8f-543e-4de4-a044-60413647d1f7" class="numbered-list" start="8"><li>Notice that when the VM is created, the High Availability Wizard automatically appears and runs<figure id="b6b4f4cc-3b27-498e-b958-7dd164d6b078" class="image"><a href="Capstone%2054e85/Untitled%20141.png"><img style="width:480px" src="Capstone%2054e85/Untitled%20141.png"/></a></figure><figure id="7f38bd76-f707-4913-aa10-0fbbae30a5d0" class="image"><a href="Capstone%2054e85/Untitled%20142.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20142.png"/></a></figure></li></ol><ol type="1" id="6b73069a-f6e6-4aa7-b5d8-b0ec33574011" class="numbered-list" start="9"><li>Within Failover Cluster Manager &gt; Roles &gt; right-click<em> File1 </em>&gt; Connect and start</li></ol><ol type="1" id="125f0726-bfd0-4e7f-8bf2-758557b793e2" class="numbered-list" start="10"><li>Set <em>FILE1’s</em> property preferred owners to be both <em>HV </em>virtual machines<figure id="0552fa82-d787-45c8-893e-a556cc37e2c6" class="image"><a href="Capstone%2054e85/Untitled%20143.png"><img style="width:384px" src="Capstone%2054e85/Untitled%20143.png"/></a></figure></li></ol><ol type="1" id="3579e5f8-b93b-4c84-9755-2549c15d2f3d" class="numbered-list" start="11"><li>Test live migration by going clicking <strong>Move &gt; Live Migration &gt; Select Node....</strong> &gt; Select the other <em>HV </em>VM<ul id="dc37c8eb-d5fb-44af-b973-03f007098c1e" class="bulleted-list"><li style="list-style-type:disc">When complete notice that the Owner Node changes to the other HV virtual machine<figure id="ddd717bc-c6ed-485e-9a05-36950c84ee67" class="image"><a href="Capstone%2054e85/Untitled%20144.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20144.png"/></a></figure></li></ul><figure id="017acf8c-5a8d-4ca7-8435-48fd7b08bffa" class="image"><a href="Capstone%2054e85/Untitled%20145.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20145.png"/></a></figure></li></ol><ol type="1" id="bb399d97-1b43-4713-9b0d-a61e44a29650" class="numbered-list" start="12"><li>Create another VM named ‘FILE2’ on the <em>HV#</em> that is not in use &gt; verify that a separate role is created and that the VM’s boot and run while on different nested Hypervisors<figure id="745dee59-95dc-4744-8561-9f1564c50c9a" class="image"><a href="Capstone%2054e85/Untitled%20146.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20146.png"/></a></figure></li></ol></div><h1 id="69b9da8f-8cfa-47e6-a11f-6c5ed9d65669" class="">10.0 File Server Cluster</h1><p id="507d7120-8750-456f-86a8-3422e4d83e0c" class="">Within the nested Hyper-V cluster create 2 VM’s for FILE1 and FILE2. The machines will be clustered together for failover and use a VHD Set for the file server role which will have a SMB share.</p><h2 id="bd2d9eda-37c2-4022-a3f8-c3d9607a1055" class=""><details open=""><summary>10.1 Server Role, Hardware, and HB Network Setup</summary></details></h2><div class="indented"><ol type="1" id="9470c410-a84a-44e2-bff9-f53368010c9e" class="numbered-list" start="1"><li>⏲ Checkpoint DC1 and name it “Before FS and cluster”</li></ol><ol type="1" id="38346e74-ad50-40bb-ae16-824425e19ecf" class="numbered-list" start="2"><li>On FILE1 and FILE2 run the post install tasks from Appendix F<ul id="9432161a-81b7-46fd-8f56-37f6d8c136af" class="bulleted-list"><li style="list-style-type:disc">❗ for spaces and line breaks the script has <code>^M</code> this is ok and it will run as expected</li></ul><figure id="f7bd4bcd-4044-4fff-a700-a53c6bb83c35" class="image"><a href="Capstone%2054e85/Untitled%20147.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20147.png"/></a></figure></li></ol><ol type="1" id="9ff58943-1e9a-4eaf-be05-b8425583de94" class="numbered-list" start="3"><li>Complete the verification checks as per Appendix G</li></ol><ol type="1" id="4309d3ca-ecbd-45d7-826d-beabff97331a" class="numbered-list" start="4"><li>On <em>FILE1 </em>and <em>FILE2 </em>install the role <strong>File Server</strong> and feature <strong>Failover Clustering</strong><figure id="3ee76d3a-81c4-442c-a0fb-3f592082a256" class="image"><a href="Capstone%2054e85/Untitled%20148.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20148.png"/></a></figure></li></ol><ol type="1" id="db16a3b1-f260-45e4-8639-a42662cfc9d7" class="numbered-list" start="5"><li>In Failover Cluster Manager navigate to <strong>Roles</strong> &gt; Under the Actions panel click <strong>Virtual Machines...</strong> &gt; Select <strong>New Hard Disk..</strong></li></ol><ol type="1" id="dc094d4f-6947-4d73-b67f-7642245c4f75" class="numbered-list" start="6"><li>Complete the Virtual Hard Disk Wizard with the following to create a VHD Set:<ul id="b888bb7d-0cae-456a-b020-f2101ad251c3" class="bulleted-list"><li style="list-style-type:disc">Format: VHDSet</li></ul><ul id="46133efa-bf03-465b-92b7-00bfa648e50a" class="bulleted-list"><li style="list-style-type:disc">Type: Dynamically Expanding </li></ul><ul id="69e08237-cae3-40a7-be81-d2ffc34bcd51" class="bulleted-list"><li style="list-style-type:disc">Name: “FSdata.vhds”</li></ul><ul id="486c7745-dd9c-4f6b-a519-f6b4cac5d5cf" class="bulleted-list"><li style="list-style-type:disc">Location: The cluster storage volume</li></ul><ul id="5b5a5b52-c26f-4808-a5ba-21363f98f741" class="bulleted-list"><li style="list-style-type:disc">Size: 15 GB</li></ul><ul id="c56c826c-4ef2-491d-8013-88268b039628" class="bulleted-list"><li style="list-style-type:disc">❗ If a Fixed disk is created instead it may take up to 20 minutes to create - choose dynamic</li></ul></li></ol><ol type="1" id="e341e542-8edc-42b8-a4c7-dd1635500cb0" class="numbered-list" start="7"><li>Create a 2nd VHDS named “FSwitness” that is 3GB in size</li></ol><ol type="1" id="b907aff0-1024-4268-b18e-6945a1a7f258" class="numbered-list" start="8"><li>In File Explorer view the new VHDS file and notice that there are 2 files per set<ul id="e0e79e99-6674-40a0-bbe4-3fd7530e88b0" class="bulleted-list"><li style="list-style-type:disc">Virtual machines connect to the .VHDS file and data is stored in the .AVHDX file</li></ul><ul id="ecf462cb-09bc-47b4-9c8c-6373ba0ad4a1" class="bulleted-list"><li style="list-style-type:disc">.vhds is a configuration file that contains metadata, and is used for maintaining simultaneous access to the disk from multiple cluster nodes.</li></ul><ul id="296bca31-0eb9-4989-9282-b9c1f205da2c" class="bulleted-list"><li style="list-style-type:disc">.avhdx (“automatic .vhdx”) is an actual virtual disk where the data resides. It can be fixed or dynamic.</li></ul><figure id="aa40bf8c-1914-47de-b255-edade016b662" class="image"><a href="Capstone%2054e85/Untitled%20149.png"><img style="width:1104px" src="Capstone%2054e85/Untitled%20149.png"/></a></figure></li></ol><ol type="1" id="65dd96e5-5db9-41e6-ad91-776d9bba0b69" class="numbered-list" start="9"><li>From PowerShell on <em>HV1 </em>(or <em>HV2</em>) run the following command to attach the VHD Set to the FILE machines :<ul id="79b737fe-4979-4a6f-ae00-104c83faa247" class="bulleted-list"><li style="list-style-type:disc"><code>Add-VMHardDiskDrive -VMName FILE2 -Path &quot;C:\ClusterStorage\Volume1\VMs\VHDX\FSdata.vhds&quot; -SupportPersistentReservations</code><figure id="d0a06606-885d-4440-9453-0149fd113b37" class="image"><a href="Capstone%2054e85/Untitled%20150.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20150.png"/></a></figure></li></ul></li></ol><ol type="1" id="9d66050f-5d1e-4d55-93a7-794a44a35382" class="numbered-list" start="10"><li>Repeat so both <em>HV1 </em>and <em>HV2 </em>has FSdata.vhds &amp; FSwitness.vhds<figure id="a4d86cd3-fff9-482d-a8a4-6a3875d7b51f" class="image"><a href="Capstone%2054e85/Untitled%20151.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20151.png"/></a></figure></li></ol><ol type="1" id="c38b3402-d285-40b0-bb6f-53fc56a55c28" class="numbered-list" start="11"><li>From Server Manager navigate to File and Storage Spaces &gt; Volumes &gt; Disks</li></ol><ol type="1" id="49b4eb93-84cd-4684-abd6-831376599885" class="numbered-list" start="12"><li>Bring <em>FSdata.vhds </em>&amp; <em>FSwitness.vhds </em>online, initialize, and create volumes with the file system NTFS<figure id="cc09385b-9224-4e68-91bb-8c8cadab43b0" class="image"><a href="Capstone%2054e85/Untitled%20152.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20152.png"/></a></figure><figure id="29a63b13-8c24-4d1e-aaf6-a1cc1aefc8ba" class="image"><a href="Capstone%2054e85/Untitled%20153.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20153.png"/></a></figure></li></ol><ol type="1" id="fe23e409-4942-432c-8a28-4c3834a12a98" class="numbered-list" start="13"><li>On <em>HV1</em> view the available network adapters in <code>sconfig</code> or PowerShell <code>Get-NetAdapter</code></li></ol><ol type="1" id="f946d00c-87e5-48e0-b5cd-931b308c1e5d" class="numbered-list" start="14"><li>View which adapter (by IP or adapter name) is connected to the HB network &amp; the corresponding interface description number <strong>Hyper-V Network Adapter#</strong></li></ol><ol type="1" id="3924094f-8746-419c-bd89-59710ded2f53" class="numbered-list" start="15"><li>In the Hyper-V Manager for <em>HV1 </em>&gt; Virtual Switch Manager... &gt; Create a new virtual network switch:<ul id="c9247850-7484-4e88-87e6-bee2667ad307" class="bulleted-list"><li style="list-style-type:disc">Switch Type: External </li></ul><ul id="c708e51a-ae82-4bed-b737-f8d4784cb885" class="bulleted-list"><li style="list-style-type:disc">❗ Select the Microsoft Hyper-V Network Adapter # that corresponds to the HB network</li></ul><ul id="24ad9e0f-7400-4002-96e0-cd1cd23db837" class="bulleted-list"><li style="list-style-type:disc">Name: HBext</li></ul><figure id="c1e136c5-f802-4810-b061-ed04c95fd38c" class="image"><a href="Capstone%2054e85/Untitled%20154.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20154.png"/></a></figure></li></ol><ol type="1" id="79495561-a730-498a-824d-839886f49957" class="numbered-list" start="16"><li>Repeat on <em>HV2 </em>to create another external switch</li></ol><ol type="1" id="a94543bc-e304-474e-a8eb-a4237661f41d" class="numbered-list" start="17"><li>On Hyper-V Manager for <em>Thinkpad</em> &gt; Open the settings for <em>HV1</em></li></ol><ol type="1" id="4bc40552-ec31-4f27-8594-5a2615310615" class="numbered-list" start="18"><li>Expand the <strong>HB</strong> Network Adapter &gt; Advanced Features &gt; Check <strong>Enable MAC address spoofing</strong><figure id="a0150412-5c9e-465f-ad05-715113e7bfd6" class="image"><a href="Capstone%2054e85/Untitled%20155.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20155.png"/></a><figcaption>❗ MAC Spoofing must be enabled or the FILE machines will not be able to communicate outside of the nested Hyper-V host</figcaption></figure></li></ol><ol type="1" id="e2ce14d9-cdc6-41fd-8add-dc1fb6905e92" class="numbered-list" start="19"><li>Repeat on <em>HV2 </em>to enable MAC spoofing on the HB adapter</li></ol><ol type="1" id="15ff949f-6268-4f1f-9fcd-a35b7ef0d7eb" class="numbered-list" start="20"><li>On <em>FILE1 &amp; FILE2 </em>from <code>sconfig</code> or PowerShell set the following:<table id="edcd1192-5cdb-4b2b-a5c9-4998faabc8b3" class="simple-table"><tbody><tr id="a4801b27-fb00-416d-a4a2-10156cd1241f"><td id="Z;e{">IPv4 FILE1</td><td id="D&lt;Sl">192.168.20.<span style="border-bottom:0.05em solid">3</span></td></tr><tr id="4334c9e6-a24e-4846-b51b-1b18a7e9f20c"><td id="Z;e{">IPv4 FILE1</td><td id="D&lt;Sl">192.168.20.<span style="border-bottom:0.05em solid">4</span></td></tr><tr id="f1893f51-2b9c-4199-b562-8c63ab4bf1bf"><td id="Z;e{">Subnet</td><td id="D&lt;Sl">255.255.255.248</td></tr><tr id="b8a3a447-2b64-493c-ad03-d16fbe004d51"><td id="Z;e{">NetAdapter Name</td><td id="D&lt;Sl">HBext</td></tr></tbody></table></li></ol><ol type="1" id="1d1b97f5-2247-4660-8e19-cf3a78c27e60" class="numbered-list" start="21"><li>Verify connectivity on the HB network <code>192.168.20.0 /29</code> by sending pings from FILE1 to FILE2 and vice versa<figure id="48f6a58a-b836-47df-8914-c581dfb6510d" class="image"><a href="Capstone%2054e85/Untitled%20156.png"><img style="width:672px" src="Capstone%2054e85/Untitled%20156.png"/></a></figure></li></ol><p id="39a4033c-23bf-4fb7-86c5-f936ef3a794b" class="">
</p></div><h2 id="2def2490-00ac-43e7-83de-6076d649325c" class=""><details open=""><summary>10.2 Create and Configure the Cluster</summary></details></h2><div class="indented"><ol type="1" id="3c346772-df7c-479a-9bd9-de161aa5bcbc" class="numbered-list" start="1"><li>From Failover Cluster Manager validate the configuration for FILE1 and FILE2 by running all tests<figure id="bc9dca70-0f1b-4948-8d8e-2a0b750715e2" class="image"><a href="Capstone%2054e85/Untitled%20157.png"><img style="width:384px" src="Capstone%2054e85/Untitled%20157.png"/></a></figure></li></ol><ol type="1" id="f9096e4e-7afd-4a6b-9e4d-3486de72d25c" class="numbered-list" start="2"><li>Complete the Create Cluster Wizard with the following:<ul id="1bb8e187-a005-40b1-a306-06d8d5e5fb26" class="bulleted-list"><li style="list-style-type:disc">Cluster Name: “FS-Cluster”</li></ul><ul id="fce10938-4dba-432f-8a38-041757c5ee1c" class="bulleted-list"><li style="list-style-type:disc">IP Address: 192.168.3.10</li></ul><ul id="ef791146-5ab9-406d-9bc2-ce9609aeaddb" class="bulleted-list"><li style="list-style-type:disc">Add all eligible storage to the cluster: Uncheck<figure id="4aeee6bf-c61c-4804-8343-9899d0f71792" class="image"><a href="Capstone%2054e85/Untitled%20158.png"><img style="width:432px" src="Capstone%2054e85/Untitled%20158.png"/></a></figure></li></ul></li></ol><ol type="1" id="1dba983b-95e9-4c25-a1b5-1f05efa17fe8" class="numbered-list" start="3"><li>View results - notice that there are 2 clusters connected in the manager <em>HV-Cluster </em>and <em>FS-Cluster</em><figure id="da3ce946-c513-45a5-a04f-2e35e4ca98a7" class="image"><a href="Capstone%2054e85/Untitled%20159.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20159.png"/></a></figure></li></ol><ol type="1" id="a6d6f791-d62e-47ca-ab5f-3f24bce6a8c9" class="numbered-list" start="4"><li>From Storage &gt; Disks &gt; Add both VHDS to the cluster &amp; rename<figure id="8cdaf264-572a-4b82-adf3-ce8e0e6ecfc5" class="image"><a href="Capstone%2054e85/Untitled%20160.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20160.png"/></a></figure></li></ol><ol type="1" id="eac07e86-102d-418a-8f57-b9112efbaf82" class="numbered-list" start="5"><li>Configure the cluster quorum and add the disk <strong>FS-Witness</strong> to be the disk witness resource<figure id="b2e43a86-17ae-4e4f-ab2f-4559c3e522c0" class="image"><a href="Capstone%2054e85/Untitled%20161.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20161.png"/></a></figure></li></ol><ol type="1" id="cb8b22d2-1a19-46e3-ace7-1894dfecc9e8" class="numbered-list" start="6"><li>Rename the networks in <em>FS-Cluster </em>to “LAN” and “HB”<figure id="38c4eae6-c8af-4a41-a31a-6dbdd1d5be9f" class="image"><a href="Capstone%2054e85/Untitled%20162.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20162.png"/></a></figure></li></ol></div><h2 id="0f3914fc-e77d-4dea-8e28-a2eaf599e816" class=""><details open=""><summary>10.3 Allow CNO FS-Cluster to Create Computer Objects in AD DS</summary></details></h2><div class="indented"><ol type="1" id="9414c757-879a-4fed-95e2-e645ff8c4557" class="numbered-list" start="1"><li>❗ Without this step, the File Server role will install but will be offline and have errors because FS will not be created because the Cluster Name Object (CNO) FileServerCluster does not have permission to create computer objects.<figure id="cf28caf2-d06e-46b2-833d-15769b178cc8" class="image"><a href="Capstone%2054e85/Untitled%20163.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20163.png"/></a><figcaption>The file server role will add but have a failed status without editing the <em>FS</em> OU Permission Properties</figcaption></figure></li></ol><ol type="1" id="6d1a6215-8f37-4d54-bf75-64eef0dcd5c8" class="numbered-list" start="2"><li>From Server Manager &gt; Right-click DC1 &gt; Open Active Directory Users and Computers (ADUC)</li></ol><ol type="1" id="45c433c1-07c3-4750-9c2b-965d06906dd7" class="numbered-list" start="3"><li>On the <strong>View</strong> menu taskbar check <strong>Advanced Features</strong> so it is selected</li></ol><ol type="1" id="c08650d8-7fcf-4257-99b6-2ed1b9bff323" class="numbered-list" start="4"><li>Right-click the <em>FS</em> OU where the <em>FS-Cluster </em>CNO (Cluster Name Object) is located &gt; select <strong>Properties</strong></li></ol><ol type="1" id="4c2027a9-4858-4a23-bea8-fb0932310ac2" class="numbered-list" start="5"><li>On the <strong>Security</strong> tab, select <strong>Advanced &gt; Add</strong><figure id="ad33b816-eb53-4bf6-95c4-66e180f1eea4" class="image"><a href="Capstone%2054e85/Untitled%20164.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20164.png"/></a></figure></li></ol><ol type="1" id="4d2517fc-cd4b-44c9-9e0c-6ed4cfd9886d" class="numbered-list" start="6"><li>In the Permission Entry window click <strong>Select a principal &gt; </strong>Object Types &gt; Select <strong>Computers</strong><figure id="eecb9645-33d9-4408-8578-8608def6c3b4" class="image"><a href="Capstone%2054e85/Untitled%20165.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20165.png"/></a></figure></li></ol><ol type="1" id="9eddb1b6-5a3d-4d3f-b769-a3105a24fc80" class="numbered-list" start="7"><li>Add the object <strong>FS-Cluster</strong></li></ol><ol type="1" id="5b8d6237-190f-49ba-ae83-ef666aad907b" class="numbered-list" start="8"><li>In the <strong>Permission Entry</strong> dialog box set the following:<ul id="350d30e0-3514-40cb-bff6-f7b5a242bc2a" class="bulleted-list"><li style="list-style-type:disc">Type: Allow</li></ul><ul id="40056493-ef8c-4a67-801b-e0c6ce96dcbd" class="bulleted-list"><li style="list-style-type:disc">Applies to: This object and all descendant objects</li></ul><ul id="1ed14200-875b-44d4-861a-e35aafe7f71f" class="bulleted-list"><li style="list-style-type:disc">Permissions: Select <strong>Create Computer objects</strong></li></ul><figure id="836d881a-44db-4a0e-8b19-070b71fc2b6b" class="image"><a href="Capstone%2054e85/Untitled%20166.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20166.png"/></a></figure><figure id="c97febf3-d322-4ff7-8006-a562eb9de8e2" class="image"><a href="Capstone%2054e85/Untitled%20167.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20167.png"/></a></figure></li></ol></div><h2 id="a9c91a80-d2ed-42a6-95a1-005a6e319afa" class=""><details open=""><summary>10.4 Add the File Server Role</summary></details></h2><div class="indented"><ol type="1" id="aecdbc62-4225-4713-9337-5f72e9071e4f" class="numbered-list" start="1"><li>In Failover Cluster Manager navigate to &gt; FS-Cluster.cap.int &gt; Roles &gt; Click <strong>Configure Role...</strong></li></ol><ol type="1" id="9b421cad-f605-4af3-9111-5eec90a8df4e" class="numbered-list" start="2"><li>Create the role <strong>File Server</strong> with the following:<ul id="32939fbf-6003-473f-80a0-d5f551d10e60" class="bulleted-list"><li style="list-style-type:disc">Client Access Point: Name = “FS” &amp; IP= <code>192.168.3.11</code></li></ul><ul id="2f34b9bc-8bf6-4808-a56e-506c879da3e9" class="bulleted-list"><li style="list-style-type:disc">Storage Disk: FS-Data</li></ul><figure id="a010c341-d2d8-457d-903a-025b455cca55" class="image"><a href="Capstone%2054e85/Untitled%20168.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20168.png"/></a></figure></li></ol><ol type="1" id="ce3bfcad-3a7d-4674-8e24-c6fe9bc27e80" class="numbered-list" start="3"><li>View results<figure id="1e96f5b7-2b15-4868-a6e5-e1b904d8cff5" class="image"><a href="Capstone%2054e85/Untitled%20169.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20169.png"/></a></figure><figure id="e3d555d5-e350-4814-afcf-4af68f2229ee" class="image"><a href="Capstone%2054e85/Untitled%20170.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20170.png"/></a></figure></li></ol></div><h2 id="f9749a48-1acd-4dc8-bbd6-52975fb6870e" class=""><details open=""><summary>10.5 Create File Share</summary></details></h2><div class="indented"><ol type="1" id="3b20892d-e449-4c38-ae66-e31ad89e8e09" class="numbered-list" start="1"><li>Click on the File Server object <strong>FS</strong> in the cluster roles &gt; Click <strong>Add File Share</strong> to open the New Share Wizard<figure id="8ced192b-3714-4dfa-ae7b-09c1d1aa3539" class="image"><a href="Capstone%2054e85/Untitled%20171.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20171.png"/></a></figure></li></ol><ol type="1" id="9bb1b5d1-5641-4d4b-ab02-0716bdb5beda" class="numbered-list" start="2"><li>Complete the first 4 steps in the wizard as follows:<ul id="565830d9-797f-4732-a487-39b0a01fa5eb" class="bulleted-list"><li style="list-style-type:disc">Select Profile: <strong>SMB Share - Quick</strong></li></ul><ul id="89e2e5b3-6a7e-49ef-bf15-050e8a4cc74f" class="bulleted-list"><li style="list-style-type:disc">Share location: Click <strong>Type a custom path</strong> and create and select the directory “Company_Data”</li></ul><ul id="c99fc064-4210-4499-91e1-b160b0bb133d" class="bulleted-list"><li style="list-style-type:disc">Share Name: Add the <code>$</code> after the share name so the remote path shows as <code>\\fs\Company_Data$</code></li></ul><ul id="19a957f9-65ab-4dcc-b595-849ec6ea0e5a" class="bulleted-list"><li style="list-style-type:disc">Configure share settings: Select all four options</li></ul><figure id="6d7a0cb4-a97d-47cc-8b3c-af07ad5ff0f1" class="image"><a href="Capstone%2054e85/Untitled%20172.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20172.png"/></a></figure></li></ol><ol type="1" id="7ab371dc-888f-4f13-86b3-12d6777debb9" class="numbered-list" start="3"><li>On the Permissions step click <strong>Customize Permissions.. &gt; Disable inheritance &gt; click Convert inherited permissions into explicit permissions on this object</strong><figure id="703fc73d-5637-46fe-ad0d-1218e1b2ad84" class="image"><a href="Capstone%2054e85/Untitled%20173.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20173.png"/></a></figure></li></ol><ol type="1" id="fa772077-f99a-4a41-a3eb-f7e64c130fb1" class="numbered-list" start="4"><li>Select entry for Principal <strong>Users (FILE1\Users)</strong> with Access = Special &gt; click <strong>Remove</strong></li></ol><ol type="1" id="0e140259-8d04-40ff-a779-895b35cac240" class="numbered-list" start="5"><li>Select entry for Principal <strong>Users (FILE1\Users)</strong> with Access = Read &amp; Execute &gt; Change the setting ‘Applies to’ to <strong>This folder only</strong><figure id="07c4c078-8402-442f-88bc-d93bb516d272" class="image"><a href="Capstone%2054e85/Untitled%20174.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20174.png"/></a><figcaption>FILE1 user permissions &amp; result for the advanced security settings tab Permissions and Share</figcaption></figure></li></ol><ol type="1" id="1a488cd4-f0dc-4fc7-b1ea-17c037b49a98" class="numbered-list" start="6"><li>Confirm the settings in the wizard &gt; click <strong>Create</strong><figure id="eb128ed7-2553-4868-98d7-d619684cfa9a" class="image"><a href="Capstone%2054e85/Untitled%20175.png"><img style="width:432px" src="Capstone%2054e85/Untitled%20175.png"/></a></figure></li></ol><ol type="1" id="a67be077-5967-4ba8-b018-816b70cf7b64" class="numbered-list" start="7"><li>From <em>Thinkpad’s</em> file explorer navigate to the share <code>\\fs\Company_Data$</code></li></ol><ol type="1" id="9f38686f-e646-4677-9232-cfed393dbbea" class="numbered-list" start="8"><li>Pause the owner VM to test the file share failover clustering, verify the share can still be accessed<figure id="556189dc-432a-4161-967a-bfecc07f2652" class="image"><a href="Capstone%2054e85/Untitled%20176.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20176.png"/></a></figure><figure id="0d4c2f2a-b300-405e-b5a0-928d9d22c787" class="image"><a href="Capstone%2054e85/Untitled%20177.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20177.png"/></a></figure></li></ol><ol type="1" id="ef5b7db2-7a30-4395-8d8d-edf97b36f2b3" class="numbered-list" start="9"><li>Set the memory on <em>FILE1 </em>and <em>FILE2 </em>to 512 MB</li></ol></div><h1 id="5d270490-75fc-43e9-835d-2a3331b6aa5a" class="">11.0 Create AGLDP Structure and GPOs</h1><p id="0d3cf952-750a-41c9-9f12-cc0d439a4c57" class="">Create an AGDLP Security group structure for <em>cap.int</em>. <span style="border-bottom:0.05em solid">A</span>ccount, <span style="border-bottom:0.05em solid">G</span>lobal Groups (Role Based), <span style="border-bottom:0.05em solid">D</span>omain <span style="border-bottom:0.05em solid">L</span>ocal (tied to Read/Write (RE) or Read/Execute (RE) permissions), <span style="border-bottom:0.05em solid">P</span>ermissions. Create a Group Policy Object (GPO) that maps the file share from step 10.5 to the domain user’s computer. Create another GPO to redirect the Desktop and Document folders to a new file share.</p><h2 id="c21415d9-48ef-4e95-bbb3-56e3cbc21b8f" class=""><details open=""><summary>11.1 Setup AGDLP File Permissions for the Share</summary></details></h2><div class="indented"><figure id="38f0a589-419e-4548-b821-1929ad59e40e" class="image"><a href="Capstone%2054e85/Untitled%20178.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20178.png"/></a></figure><ol type="1" id="5c144fba-4263-40ec-8535-bdc687047ea4" class="numbered-list" start="1"><li>Open Active Directory Users and Computers and go to the OU <strong>Security_Groups</strong></li></ol><ol type="1" id="ebc89b6a-97b6-4151-8be4-797df7b6917f" class="numbered-list" start="2"><li>From ADUC or PS, in the OU <em>IT_Groups</em> create the following <strong>Global </strong>Groups &amp; add the domain user as a member follows:<table id="2c22b2c0-8ad6-49f5-a446-8fc26c93e474" class="simple-table"><thead><tr id="a0bae29a-e912-4809-b14a-2747cb97213f"><th id="XVtL" class="simple-table-header">Security Group Name</th><th id=":PSs" class="simple-table-header">Group Scope</th><th id="wUis" class="simple-table-header">Domain Member</th></tr></thead><tbody><tr id="9b82ca44-369d-4efc-8c9c-a4125c5a827b"><td id="XVtL">IT_Managers_G</td><td id=":PSs">Global</td><td id="wUis">Bob Lo</td></tr><tr id="09ea757b-5384-44b0-92d4-32fe7e92d16c"><td id="XVtL">IT_ServiceDesk_G</td><td id=":PSs">Global</td><td id="wUis">Dan Wu</td></tr></tbody></table><figure id="9cff3621-bd23-487c-be64-1244f1af85ed" class="image"><a href="Capstone%2054e85/Untitled%20179.png"><img style="width:384px" src="Capstone%2054e85/Untitled%20179.png"/></a></figure><pre id="fadd0301-5c73-4545-89f7-113be7202aba" class="code"><code>#Create Security Group
Get-Command -Module ActiveDirectory
New-ADGroup &quot;IT_Managers_G&quot; `
-Path &quot;OU=IT_Groups,OU=Security_Groups,DC=cap,dc=int&quot; `
-GroupCategory Security `
-GroupScope Global `
-PassThru –Verbose

#Add Member to Group - Phil.Gibbins
Add-ADGroupMember -Identity &quot;IT_Managers_G&quot; -Members bob.lo

#View group members to verify Phil was added, can also refresh in AD
Get-ADGroupMember -Identity &quot;IT_Managers_G&quot;</code></pre></li></ol><ol type="1" id="282eb4b6-7f8a-4f02-8731-1f1d8dd349af" class="numbered-list" start="3"><li>From ADUC or PS, in the OU <em>FIN_Groups</em> create the following <strong>Global </strong>Groups &amp; add the domain user as a member follows:<table id="4ca7c423-b93e-4633-a40a-b9d2a19a8d54" class="simple-table"><thead><tr id="7545e5d9-9d8b-48ea-9e21-b7cc1676ee5b"><th id="XVtL" class="simple-table-header">Security Group Name</th><th id=":PSs" class="simple-table-header">Group Scope</th><th id="ZoEM" class="simple-table-header">Domain Member</th></tr></thead><tbody><tr id="44edc46a-4d26-4c03-89f3-1db0503263f4"><td id="XVtL">FIN_Accountants_G</td><td id=":PSs">Global</td><td id="ZoEM">Amy Li</td></tr><tr id="48a0ff21-31b9-45aa-904d-8cf9ee59d7f7"><td id="XVtL">FIN_Controllers_G</td><td id=":PSs">Global</td><td id="ZoEM">Sam Hu</td></tr></tbody></table></li></ol><ol type="1" id="deb03883-5ba4-4e14-93fc-3935353ea287" class="numbered-list" start="4"><li>In the OU <em>IT_Groups</em> create the following <strong>Domain Local </strong>Groups &amp; add global group as a member follows:<table id="67ac39c1-ed38-4dc1-b2b0-8f1058f67bfd" class="simple-table"><thead><tr id="d8943ff0-c02e-43c8-ab4e-7c926413049f"><th id="XVtL" class="simple-table-header">Security Group Name</th><th id=":PSs" class="simple-table-header">Group Scope</th><th id="wUis" class="simple-table-header">Member</th></tr></thead><tbody><tr id="7e061231-7594-4e3a-821f-33543d9518df"><td id="XVtL">IT_Management_RW_DL </td><td id=":PSs">Domain Local</td><td id="wUis">IT_Managers_G</td></tr><tr id="824b38ae-593a-4f30-bef9-1bf9e7b464d0"><td id="XVtL">IT_ServiceDesk_RW_DL</td><td id=":PSs">Domain Local</td><td id="wUis">IT_ServiceDesk_G</td></tr><tr id="1eb9838f-67f6-4c43-bb78-04d453a9e3b3"><td id="XVtL"></td><td id=":PSs"></td><td id="wUis"></td></tr></tbody></table><figure id="3f27946f-99e8-4768-bbd1-1111083f48e3" class="image"><a href="Capstone%2054e85/Untitled%20180.png"><img style="width:432px" src="Capstone%2054e85/Untitled%20180.png"/></a></figure></li></ol><ol type="1" id="5950097e-9780-4a44-80fb-35f015c85dd2" class="numbered-list" start="5"><li>In the OU <em>FIN_Groups</em> create the following <strong>Domain Local </strong>Groups &amp; add the global group as a member follows:<table id="cb65d111-16cc-44aa-bc0d-588eced20d21" class="simple-table"><thead><tr id="165ce7cb-859d-4367-a445-c65f9ad79cdb"><th id="XVtL" class="simple-table-header">Security Group Name</th><th id=":PSs" class="simple-table-header">Group Scope</th><th id="ZoEM" class="simple-table-header">Member</th></tr></thead><tbody><tr id="1f02bd42-3dbd-416b-b9d5-e12631db076a"><td id="XVtL">FIN_Accounting_RW_DL </td><td id=":PSs">Domain Local</td><td id="ZoEM">FIN_Accountants_G</td></tr><tr id="4dcfae0f-d1a7-4bfa-86ba-1e709acdde8b"><td id="XVtL">FIN_Accounting_RE_DL</td><td id=":PSs">Domain Local</td><td id="ZoEM">FIN_Accountants_G</td></tr><tr id="2c5733a0-4772-4a85-a878-29701c30ac90"><td id="XVtL">FIN_Controllers_RW_DL </td><td id=":PSs">Domain Local</td><td id="ZoEM">FIN_Controllers_G</td></tr></tbody></table><figure id="0f4d42f1-1fc7-42c0-b66b-115318fd57ad" class="image"><a href="Capstone%2054e85/Untitled%20181.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20181.png"/></a></figure></li></ol><ol type="1" id="c5a38116-182c-43fd-9ebf-732fc04a383c" class="numbered-list" start="6"><li>On <em>Thinkpad</em> open the file explorer and access the share <code>\\FS\Company_Data$</code></li></ol><ol type="1" id="dcffaba3-6eba-4bb8-acd3-baded6b7d669" class="numbered-list" start="7"><li>Create 4 directories in the share - “IT_ServiceDesk”, “IT_Management”, “FIN_Accounting”, and “FIN_Controllers”<figure id="303164c1-5bb6-441e-b93f-a10a1e4a07f0" class="image"><a href="Capstone%2054e85/Untitled%20182.png"><img style="width:336px" src="Capstone%2054e85/Untitled%20182.png"/></a></figure></li></ol><ol type="1" id="9fce88bd-0f06-4908-bea3-ce01d465ae7b" class="numbered-list" start="8"><li>Right-click the <strong>IT_Management</strong> directory &gt; select <strong>Properties</strong> </li></ol><ol type="1" id="096df7a2-bd69-4486-a478-5aa4d6efb965" class="numbered-list" start="9"><li>Open the tab <strong>Security &gt; </strong>Click <strong>Edit to change </strong>permissions &gt; add the group <em>IT_Management_RW_DL</em><figure id="ec2ea1cc-b4b7-4d78-9ada-833a79589b15" class="image"><a href="Capstone%2054e85/Untitled%20183.png"><img style="width:768px" src="Capstone%2054e85/Untitled%20183.png"/></a></figure></li></ol><ol type="1" id="54644365-4a9c-43f9-8552-ed4c2f4c5392" class="numbered-list" start="10"><li>Give the domain local group Read/Write permissions by checking <strong>Modify</strong> <ul id="a617b79f-b415-4e5b-a096-8c5296a38243" class="bulleted-list"><li style="list-style-type:disc">Groups with RW → Modify Permission</li></ul><ul id="3d8cf88d-d6a8-48e7-ab5e-047dfa545a19" class="bulleted-list"><li style="list-style-type:disc">Groups with RE → Read &amp; Execute Permission</li></ul><figure id="d89ffbef-f68e-44b8-a210-3f5bb30ead5a" class="image"><a href="Capstone%2054e85/Untitled%20184.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20184.png"/></a></figure></li></ol><ol type="1" id="1ad6197d-dd56-4dfe-9c67-266c2dcde020" class="numbered-list" start="11"><li>In ADUC add <em>FIN_Controllers_G</em> as a member of <em>FIN_Accounting_RW_DL</em> to give the controllers Read/Write access of the directory <em>FIN_Accounting</em> as well<figure id="b73fb3e4-a1c1-4227-8ea9-f2adc4200315" class="image"><a href="Capstone%2054e85/Untitled%20185.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20185.png"/></a></figure></li></ol><ol type="1" id="f6ffc261-9647-4ab2-872b-7cdad5da7816" class="numbered-list" start="12"><li>Test the NTFS permission by logging into users <em>amy.li</em> (accountant) and <em>sam.hu</em> (finance controller) and open the share <code>\\fs\company_data$</code><figure id="b96b8dd6-3bad-4711-920c-6785234e5305" class="image"><a href="Capstone%2054e85/Untitled%20186.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20186.png"/></a></figure></li></ol></div><h2 id="4ac0f169-6f7f-4de7-b1ab-a7508071ed8c" class=""><details open=""><summary>11.2 Create a Mapped Drive GPO</summary></details></h2><div class="indented"><ol type="1" id="144cf90c-6e2c-4e1c-8c10-afc9dc860105" class="numbered-list" start="1"><li>From Server Manager &gt; Tools &gt; <strong>Group Policy Management</strong></li></ol><ol type="1" id="4918eb1f-9a69-4e18-a73b-f09a8989ef2b" class="numbered-list" start="2"><li>In ‘Group Policy Objects’ &gt; Right click <strong>New</strong> &gt; Name the GPO “Mapped Drives”<figure id="8ae1158a-88f4-4070-821e-c60dec7130de" class="image"><a href="Capstone%2054e85/Untitled%20187.png"><img style="width:480px" src="Capstone%2054e85/Untitled%20187.png"/></a></figure></li></ol><ol type="1" id="4f4776c8-4840-40e8-ac28-606c73ecc9db" class="numbered-list" start="3"><li>Right-Click the GPO <strong>Mapped Drives </strong>&gt; <strong>Edit</strong></li></ol><ol type="1" id="9b0f85ca-7950-4a3d-aadd-9e4411e2323d" class="numbered-list" start="4"><li>In Group Policy Management Editor expand User Configuration &gt; Preferences &gt; Windows Settings &gt; click <strong>Drive Maps</strong></li></ol><ol type="1" id="462960b0-86ac-4514-9a41-441ceccfbb2f" class="numbered-list" start="5"><li>From Drive Maps, right-click <strong>New</strong> &gt; <strong>Mapped Drive</strong><figure id="f30f3fc6-4104-4edb-b956-8c25824b176a" class="image"><a href="Capstone%2054e85/Untitled%20188.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20188.png"/></a></figure></li></ol><ol type="1" id="dd85b536-db21-420e-b33a-f4ca069239d9" class="numbered-list" start="6"><li>Create a new drive with the following properties:<ul id="a5ed6bf4-7621-4a37-9a09-d504e706a272" class="bulleted-list"><li style="list-style-type:disc">Action: Create</li></ul><ul id="0f443c9b-9a17-4e3c-9957-39121b99f6e8" class="bulleted-list"><li style="list-style-type:disc">Location: <code>\\FS\Company_Data$</code></li></ul><ul id="7c8949f0-8c7c-4ab8-bae0-7e75dfac5a35" class="bulleted-list"><li style="list-style-type:disc">Reconnect: Check</li></ul><ul id="7f28401e-a3fd-40be-90c8-37636a5fd841" class="bulleted-list"><li style="list-style-type:disc">Label as: “Department Directories”</li></ul><ul id="9d3bba5f-16e5-4e82-8705-fabf0aa122d8" class="bulleted-list"><li style="list-style-type:disc">Drive Letter: Use “S” for ‘Shared Drive’</li></ul><ul id="1c9cdc7a-04d5-4251-9ed8-e97104a3c29b" class="bulleted-list"><li style="list-style-type:disc">Hide/Show this drive: Select <strong>Show this drive</strong></li></ul><figure id="c7ef67c9-b2d7-4bf2-a6dc-04efd61596f5" class="image"><a href="Capstone%2054e85/Untitled%20189.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20189.png"/></a></figure></li></ol><ol type="1" id="0e836aa9-01a1-4f5d-88c6-0e959dca9b65" class="numbered-list" start="7"><li>Apply the <em>Mapped Drives</em> GPO to the OU <em>Domain_Users</em><figure id="db5bc6be-535d-4524-9417-9ee34e72c892" class="image"><a href="Capstone%2054e85/Untitled%20190.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20190.png"/></a></figure></li></ol><ol type="1" id="2040469f-231c-418c-8551-6cb64cf73a31" class="numbered-list" start="8"><li>Test the drive mapping by logging as a domain user such as <em>amy.li</em> on <em>Thinkpad</em>&gt; Open PowerShell and run <code>gpupdate /force</code>  &gt; logout</li></ol><ol type="1" id="9e6c91f2-2224-45f5-8345-36ed852f05d2" class="numbered-list" start="9"><li>Login as <em>amy.li</em> and wait for the GPO to be applied (the logon process will take ~3 minutes) and view the mapped drive and view the applied GPO with <code>gpresult /r</code><figure id="cfb463ac-4af4-461f-8aa0-1fae43d3df34" class="image"><a href="Capstone%2054e85/09_mappeddrive.png"><img style="width:624px" src="Capstone%2054e85/09_mappeddrive.png"/></a></figure></li></ol></div><h2 id="17efd676-4945-4484-8b73-3968df023688" class=""><details open=""><summary>11.3 Create a Folder Redirection GPO</summary></details></h2><div class="indented"><ol type="1" id="64c357ec-3bcd-4653-9d5a-18afa3267136" class="numbered-list" start="1"><li>From Failover Cluster Manager for <a href="http://FS-Cluster.cap.int"><em>FS-Cluster.cap.int</em></a> &gt; Roles &gt; Select <strong>FS</strong> &gt; Click <strong>Add File Share</strong></li></ol><ol type="1" id="3280aabb-60c1-40e6-a71d-eca9e8de16eb" class="numbered-list" start="2"><li>Complete the first 4 steps in the New Share Wizard to with the following:<ul id="52f5e545-c521-44ff-9a1f-806376852e1d" class="bulleted-list"><li style="list-style-type:disc">Profile: SMB Share Quick</li></ul><ul id="9a988bd5-f29a-48d0-910e-a5d70a6aa93b" class="bulleted-list"><li style="list-style-type:disc">Location: <code>D:\HomeDir</code></li></ul><ul id="1f08f0f3-2fee-4b44-8ffd-e75e2dc3e9ae" class="bulleted-list"><li style="list-style-type:disc">Share Name: <code>HomeDir$</code> (remote path will be <code>\\fs\HomeDir$</code></li></ul></li></ol><ol type="1" id="15210bb2-ab80-48c3-9fa6-e025bae6a3eb" class="numbered-list" start="3"><li>On the step Permissions on the wizard set the following<ul id="439c43e2-e677-4e78-9002-21c32775fd48" class="bulleted-list"><li style="list-style-type:disc">Disable inheritance &gt; convert to objects</li></ul><ul id="087ad08f-b124-431d-9493-95ee6d06f2f8" class="bulleted-list"><li style="list-style-type:disc">Remove the principal <em>Users</em> with access = special</li></ul><ul id="6b9425d1-b140-49ef-80aa-f42fdff93646" class="bulleted-list"><li style="list-style-type:disc">Edit the principal <em>Users</em> &gt; set the permission Applies to <strong>This folder only</strong> and check the advanced permission <strong>Create folders /append data</strong></li></ul><figure id="95f07c38-aa26-4d9c-b554-ebe95fdd56b8" class="image"><a href="Capstone%2054e85/Untitled%20191.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20191.png"/></a></figure></li></ol><ol type="1" id="822602d2-4f3e-4289-8e73-2ee02dd35a9f" class="numbered-list" start="4"><li>Open Group Policy Management and create a GPO named “Folder Redirection” in the folder <em>Group Policy Objects</em><figure id="541d7d73-c736-4e0b-9389-31745acbb48d" class="image"><a href="Capstone%2054e85/Untitled%20192.png"><img style="width:528px" src="Capstone%2054e85/Untitled%20192.png"/></a></figure></li></ol><ol type="1" id="159ac489-f705-42fc-8983-1c901625a445" class="numbered-list" start="5"><li>Right-click the GPO &gt; and click <strong>Edit</strong></li></ol><ol type="1" id="e2d54880-a882-493e-a13e-c4c9a54b137c" class="numbered-list" start="6"><li>From the editor navigate to User Configuration &gt; Policies&gt; Windows Settings &gt; <strong>Folder Redirection</strong></li></ol><ol type="1" id="dab62f69-7d20-4a6a-91f8-57a6a1e75a50" class="numbered-list" start="7"><li>Right click the folder <strong>Desktop</strong> &gt; select <strong>Properties</strong> and set the following:<ul id="eebc9fb3-c309-4823-843a-6112345486c5" class="bulleted-list"><li style="list-style-type:disc">Right click <strong>Desktop &gt; Properties</strong> and edit as follows:<ul id="71dcb781-0175-4420-87eb-f693915d2782" class="bulleted-list"><li style="list-style-type:circle">Setting: <strong>Basic</strong> – Redirect everyone’s folder to the same location</li></ul><ul id="80f7af73-2afe-46ee-9e0a-2205cec245fd" class="bulleted-list"><li style="list-style-type:circle">Target Folder Location: <strong>Create a folder for each user under the root path</strong></li></ul><ul id="44efece7-6487-4249-9d47-8d99efce201b" class="bulleted-list"><li style="list-style-type:circle">Root Path: <code>\\FS\\HomeDir$</code></li></ul><ul id="390aa48c-614b-4fb9-af30-10c7fc783503" class="bulleted-list"><li style="list-style-type:circle">❗ Should this GPO ever be deleted/removed, set the Target Folder Location to <strong>Redirect to the local userprofile location</strong></li></ul></li></ul><figure id="d303d7cf-505b-462c-9d1a-7a53f19e7b59" class="image"><a href="Capstone%2054e85/Untitled%20193.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20193.png"/></a></figure></li></ol><ol type="1" id="cda5d465-37b2-4aab-adef-8808e55f0738" class="numbered-list" start="8"><li>Repeat on the Documents Folder</li></ol><ol type="1" id="0293c5ab-464b-448f-bc58-f5e5541af3fd" class="numbered-list" start="9"><li>Apply the GPO to the OU <em>Domain_Users</em></li></ol><ol type="1" id="21006e03-abd0-4a1f-bd4d-efc920506eaa" class="numbered-list" start="10"><li>Test the drive mapping by logging as a domain user such as <em>amy.li</em> on <em>Thinkpad</em>&gt; Open PowerShell and run <code>gpupdate /force</code>  &gt; logout</li></ol><ol type="1" id="1688e278-ae47-4cdc-8a53-a3ad89c3e27e" class="numbered-list" start="11"><li>Login as <em>amy.li</em> and wait for the GPO to be applied (the logon process will take ~3 minutes) and the Desktop and Document folder properties and view the applied GPO with <code>gpresult /r</code><figure id="4ee1bc79-7f6a-4966-9ca0-e848b4357a3a" class="image"><a href="Capstone%2054e85/10_thing.png"><img style="width:624px" src="Capstone%2054e85/10_thing.png"/></a></figure><figure id="cb8d7ac5-b71b-45a3-9a35-ec1586b0deb0" class="image"><a href="Capstone%2054e85/Untitled%20194.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20194.png"/></a></figure></li></ol></div><h1 id="6a3e2c83-3eb7-45b8-b136-c5133f8491a6" class="">12.0 Create a secondary DC</h1><p id="7c710d1f-9ef5-403f-b332-c6907bc7baef" class="">Create a secondary domain controller <em>DC2 </em>that stores the data on a separate disk.</p><h2 id="cee3158c-3b05-4a88-95e8-37ce140bff58" class=""><details open=""><summary>12.1 Create VM &amp; Complete Post-Install Tasks</summary></details></h2><div class="indented"><ol type="1" id="ee39d824-65e0-481e-8d83-baac9b880704" class="numbered-list" start="1"><li>⏲❗ Checkpoint <em>DC1</em> and name it “Before DC2”</li></ol><ol type="1" id="0fb5bb80-ea43-4422-b3ca-5d96c9ff8e89" class="numbered-list" start="2"><li>In Failover Cluster Manager for <em>HV-Cluster</em> create a new child differencing disk to <em>ParentServer2019-core.vhdx</em> parent</li></ol><ol type="1" id="754a3b5d-0c5b-4f83-803b-0ecf05e4cae7" class="numbered-list" start="3"><li>Create a new VM named “DC2” with 1024 MB</li></ol><ol type="1" id="9cffdf26-30fc-4e13-a743-5101c1ee3ac8" class="numbered-list" start="4"><li>Complete all post install tasks and run script Appendix F with the following:<ul id="b3835443-784d-4c53-8299-3916f7cb9e79" class="bulleted-list"><li style="list-style-type:disc">$IP: <code>192.168.3.2</code></li></ul><ul id="11ba1327-706c-4521-9956-9fe8d45e3d6c" class="bulleted-list"><li style="list-style-type:disc">$SrvName: <code>DC2</code></li></ul><ul id="f7d5e46f-4d62-4ada-85fd-b0cf7b8e4428" class="bulleted-list"><li style="list-style-type:disc">$SrvOUPath: <code>OU=Servers,DC=cap,DC=int</code></li></ul></li></ol><ol type="1" id="f5f43877-c387-49f9-9a05-15c1dd1062ee" class="numbered-list" start="5"><li>Verify all post-install tasks are complete and working as per Appendix G</li></ol><ol type="1" id="ea9da7cb-9437-4af3-8d69-473a7028b3e5" class="numbered-list" start="6"><li>In ADUC manually move DC2 into the <em>Domain Controllers</em> OU</li></ol><ol type="1" id="537de96a-eb33-467e-a7be-f3c8d8414151" class="numbered-list" start="7"><li>Create a 2nd vhdx named “DC2db” that is 10 GB and dynamically expanding</li></ol><ol type="1" id="7d486ff5-1101-415a-94ed-f629be180ae2" class="numbered-list" start="8"><li>Attach <em>DC2db.vhdx</em> to the virtual machine <em>DC2</em></li></ol><ol type="1" id="78ab0522-c9cb-494c-941e-7b7eb0adca53" class="numbered-list" start="9"><li>Add <em>DC2</em> to Server Manager</li></ol><ol type="1" id="2d693c28-6f8c-45b2-8b94-562abf7d9778" class="numbered-list" start="10"><li>From Server Manager, bring the disk online, initialize, and create a volume</li></ol><ol type="1" id="21f4cac0-744b-4846-a7b0-1455cac70b6c" class="numbered-list" start="11"><li>From PowerShell on <em>DC2</em> create the directories “NTDS” and “SYSVOL” on the secondary D:\ volume<figure id="cf4e0d3f-1069-4805-9a8d-7c26d3b9dfe5" class="image"><a href="Capstone%2054e85/Untitled%20195.png"><img style="width:720px" src="Capstone%2054e85/Untitled%20195.png"/></a></figure></li></ol></div><h2 id="e87a9934-b2e2-4ae7-b26b-fe201ad96f14" class=""><details open=""><summary>12.2 Promote DC2 to Domain Controller</summary></details></h2><div class="indented"><ol type="1" id="f525487d-10b5-4eb1-82e0-efea82f65628" class="numbered-list" start="1"><li>From <em>DC2’s </em>PowerShell install ADDS  then verify with the following:<ul id="e761ed6b-f40b-49c3-b61b-ffcf05783d66" class="bulleted-list"><li style="list-style-type:disc"><code>Install-windowsfeature -name AD-Domain-Services -IncludeManagementTools</code></li></ul><ul id="1f50536c-9388-455f-861e-00f2d61974db" class="bulleted-list"><li style="list-style-type:disc"><code>Get-Command -Module ADDSDeployment</code></li></ul><figure id="7da522ad-a5e2-43b0-822c-8517b584f525" class="image"><a href="Capstone%2054e85/Untitled%20196.png"><img style="width:576px" src="Capstone%2054e85/Untitled%20196.png"/></a></figure></li></ol><ol type="1" id="2e50e9df-c6d4-439c-b4be-d2f575c41908" class="numbered-list" start="2"><li>Enter the following script to promote to domain controller<pre id="140cc3eb-8dd7-4d3f-a233-eb4a400f95ad" class="code"><code>#
# Windows PowerShell script for AD DS Deployment
#

Import-Module ADDSDeployment
Install-ADDSDomainController `
-NoGlobalCatalog:$false `
-CreateDnsDelegation:$false `
-Credential (Get-Credential) `
-CriticalReplicationOnly:$false `
-DatabasePath &quot;D:\NTDS&quot; `
-DomainName &quot;cap.int&quot; `
-InstallDns:$true `
-LogPath &quot;D:\NTDS&quot; `
-NoRebootOnCompletion:$false `
-SiteName &quot;Default-First-Site-Name&quot; `
-SysvolPath &quot;D:\SYSVOL&quot; `
-Force:$true</code></pre><figure id="89121247-fe6a-448e-90b7-572b0b0513f2" class="image"><a href="Capstone%2054e85/Untitled%20197.png"><img style="width:672px" src="Capstone%2054e85/Untitled%20197.png"/></a></figure></li></ol><ol type="1" id="be126da0-0ff7-40b4-a2ed-14ed96fca94a" class="numbered-list" start="3"><li>From Server Manager, open Active Directory Sites an Services to view the replication<figure id="93b6a820-3e18-4b91-8828-1e82f059df8b" class="image"><a href="Capstone%2054e85/Untitled%20198.png"><img style="width:672px" src="Capstone%2054e85/Untitled%20198.png"/></a></figure></li></ol><ol type="1" id="4d6fbf69-5ec4-4b9f-90a1-b534ddc0b103" class="numbered-list" start="4"><li>Set <em>DC2’s</em> memory to 512 MB</li></ol></div><h1 id="3ae77f38-43a5-4814-bb45-f6b0e1ec885c" class="">Appendices</h1><h2 id="6fed7d96-c7fb-405a-8863-e40ef370b96d" class=""><details open=""><summary>Appendix A: Network &amp; IP Information</summary></details></h2><div class="indented"><div id="fcbfcae9-2a4b-464b-b1f0-1a5ec80359df" class="collection-content"><h4 class="collection-title">Networks</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M7.73943662,8.6971831 C7.77640845,8.7834507 7.81338028,8.8943662 7.81338028,9.00528169 C7.81338028,9.49823944 7.40669014,9.89260563 6.91373239,9.89260563 C6.53169014,9.89260563 6.19894366,9.64612676 6.08802817,9.30105634 L5.75528169,8.33978873 L2.05809859,8.33978873 L1.72535211,9.30105634 C1.61443662,9.64612676 1.2693662,9.89260563 0.887323944,9.89260563 C0.394366197,9.89260563 0,9.49823944 0,9.00528169 C0,8.8943662 0.0246478873,8.7834507 0.0616197183,8.6971831 L2.46478873,2.48591549 C2.68661972,1.90669014 3.24119718,1.5 3.90669014,1.5 C4.55985915,1.5 5.12676056,1.90669014 5.34859155,2.48591549 L7.73943662,8.6971831 Z M2.60035211,6.82394366 L5.21302817,6.82394366 L3.90669014,3.10211268 L2.60035211,6.82394366 Z M11.3996479,3.70598592 C12.7552817,3.70598592 14,4.24823944 14,5.96126761 L14,9.07922535 C14,9.52288732 13.6549296,9.89260563 13.2112676,9.89260563 C12.8169014,9.89260563 12.471831,9.59683099 12.4225352,9.19014085 C12.028169,9.6584507 11.3257042,9.95422535 10.5492958,9.95422535 C9.60035211,9.95422535 8.47887324,9.31338028 8.47887324,7.98239437 C8.47887324,6.58978873 9.60035211,6.08450704 10.5492958,6.08450704 C11.3380282,6.08450704 12.040493,6.33098592 12.4348592,6.81161972 L12.4348592,5.98591549 C12.4348592,5.38204225 11.9172535,4.98767606 11.1285211,4.98767606 C10.6602113,4.98767606 10.2411972,5.11091549 9.80985915,5.38204225 C9.72359155,5.43133803 9.61267606,5.46830986 9.50176056,5.46830986 C9.18133803,5.46830986 8.91021127,5.1971831 8.91021127,4.86443662 C8.91021127,4.64260563 9.0334507,4.44542254 9.19366197,4.34683099 C9.87147887,3.90316901 10.6232394,3.70598592 11.3996479,3.70598592 Z M11.1778169,8.8943662 C11.6830986,8.8943662 12.1760563,8.72183099 12.4348592,8.37676056 L12.4348592,7.63732394 C12.1760563,7.29225352 11.6830986,7.11971831 11.1778169,7.11971831 C10.5616197,7.11971831 10.056338,7.45246479 10.056338,8.0193662 C10.056338,8.57394366 10.5616197,8.8943662 11.1778169,8.8943662 Z M0.65625,11.125 L13.34375,11.125 C13.7061869,11.125 14,11.4188131 14,11.78125 C14,12.1436869 13.7061869,12.4375 13.34375,12.4375 L0.65625,12.4375 C0.293813133,12.4375 4.43857149e-17,12.1436869 0,11.78125 C-4.43857149e-17,11.4188131 0.293813133,11.125 0.65625,11.125 Z"></path></svg></span>Name</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Network</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>Details</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Subnet</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>Host IP Range</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Switch Type</th></tr></thead><tbody><tr id="812e66c5-7904-448a-b280-d89c498a70b7"><td class="cell-title"><a href="https://www.notion.so/WAN-812e66c57904448ab280d89c498a70b7">WAN</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-gray">192.168.1.0 /24</span></td><td class="cell-ENCD">Home Telus Network</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-gray">255.255.255.0 (/24)</span></td><td class="cell-Wf]E">192.168.1.1 - 192.168.3.253</td><td class="cell-u}e@"><span class="selected-value select-value-color-pink">External</span></td></tr><tr id="88d32459-b8e7-4502-baf6-e7c85736aa27"><td class="cell-title"><a href="https://www.notion.so/LAN-88d32459b8e74502baf6e7c85736aa27">LAN</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-blue">192.168.3.0 /28</span></td><td class="cell-ENCD">LAN</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-yellow">255.255.255.240 (/28)</span></td><td class="cell-Wf]E">192.168.3.1 - 192.168.3.14</td><td class="cell-u}e@"><span class="selected-value select-value-color-green">Internal</span></td></tr><tr id="d70a5105-d56d-4933-a41e-d1abd70908c9"><td class="cell-title"><a href="https://www.notion.so/iSCSI-d70a5105d56d4933a41ed1abd70908c9">iSCSI</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-yellow">192.168.10.0 /29</span></td><td class="cell-ENCD">iSCSI SAN</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-brown">255.255.255.248 (/29)</span></td><td class="cell-Wf]E">192.168.10.1 - 192.168.10.6</td><td class="cell-u}e@"><span class="selected-value select-value-color-gray">Private</span></td></tr><tr id="74ee9ea1-4c29-4266-a318-4469ba94e592"><td class="cell-title"><a href="https://www.notion.so/HB-74ee9ea14c294266a3184469ba94e592">HB</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-red">192.168.20.0 /29</span></td><td class="cell-ENCD">Heartbeat</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-brown">255.255.255.248 (/29)</span></td><td class="cell-Wf]E">192.168.20.1 - 192.168.20.6</td><td class="cell-u}e@"><span class="selected-value select-value-color-gray">Private</span></td></tr><tr id="a3243043-9125-4d5f-b1f5-607cf4bc09fc"><td class="cell-title"><a href="https://www.notion.so/LM-a324304391254d5fb1f5607cf4bc09fc">LM</a></td><td class="cell-hoF\"><span class="selected-value select-value-color-green">192.168.30.0 /30</span></td><td class="cell-ENCD">Live Migration</td><td class="cell-C&lt;~A"><span class="selected-value select-value-color-gray">255.255.255.252 (/30)</span></td><td class="cell-Wf]E">192.168.30.1 - 192.168.30.2</td><td class="cell-u}e@"><span class="selected-value select-value-color-gray">Private</span></td></tr></tbody></table></div><div id="ab8012a5-0ef4-423a-aa1e-b01a6ec58ec4" class="collection-content"><h4 class="collection-title">IP Addresses &amp; Info</h4><table class="collection-content"><thead><tr><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesTitle"><path d="M7.73943662,8.6971831 C7.77640845,8.7834507 7.81338028,8.8943662 7.81338028,9.00528169 C7.81338028,9.49823944 7.40669014,9.89260563 6.91373239,9.89260563 C6.53169014,9.89260563 6.19894366,9.64612676 6.08802817,9.30105634 L5.75528169,8.33978873 L2.05809859,8.33978873 L1.72535211,9.30105634 C1.61443662,9.64612676 1.2693662,9.89260563 0.887323944,9.89260563 C0.394366197,9.89260563 0,9.49823944 0,9.00528169 C0,8.8943662 0.0246478873,8.7834507 0.0616197183,8.6971831 L2.46478873,2.48591549 C2.68661972,1.90669014 3.24119718,1.5 3.90669014,1.5 C4.55985915,1.5 5.12676056,1.90669014 5.34859155,2.48591549 L7.73943662,8.6971831 Z M2.60035211,6.82394366 L5.21302817,6.82394366 L3.90669014,3.10211268 L2.60035211,6.82394366 Z M11.3996479,3.70598592 C12.7552817,3.70598592 14,4.24823944 14,5.96126761 L14,9.07922535 C14,9.52288732 13.6549296,9.89260563 13.2112676,9.89260563 C12.8169014,9.89260563 12.471831,9.59683099 12.4225352,9.19014085 C12.028169,9.6584507 11.3257042,9.95422535 10.5492958,9.95422535 C9.60035211,9.95422535 8.47887324,9.31338028 8.47887324,7.98239437 C8.47887324,6.58978873 9.60035211,6.08450704 10.5492958,6.08450704 C11.3380282,6.08450704 12.040493,6.33098592 12.4348592,6.81161972 L12.4348592,5.98591549 C12.4348592,5.38204225 11.9172535,4.98767606 11.1285211,4.98767606 C10.6602113,4.98767606 10.2411972,5.11091549 9.80985915,5.38204225 C9.72359155,5.43133803 9.61267606,5.46830986 9.50176056,5.46830986 C9.18133803,5.46830986 8.91021127,5.1971831 8.91021127,4.86443662 C8.91021127,4.64260563 9.0334507,4.44542254 9.19366197,4.34683099 C9.87147887,3.90316901 10.6232394,3.70598592 11.3996479,3.70598592 Z M11.1778169,8.8943662 C11.6830986,8.8943662 12.1760563,8.72183099 12.4348592,8.37676056 L12.4348592,7.63732394 C12.1760563,7.29225352 11.6830986,7.11971831 11.1778169,7.11971831 C10.5616197,7.11971831 10.056338,7.45246479 10.056338,8.0193662 C10.056338,8.57394366 10.5616197,8.8943662 11.1778169,8.8943662 Z M0.65625,11.125 L13.34375,11.125 C13.7061869,11.125 14,11.4188131 14,11.78125 C14,12.1436869 13.7061869,12.4375 13.34375,12.4375 L0.65625,12.4375 C0.293813133,12.4375 4.43857149e-17,12.1436869 0,11.78125 C-4.43857149e-17,11.4188131 0.293813133,11.125 0.65625,11.125 Z"></path></svg></span>Name</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesMultipleSelect"><path d="M4,3 C4,2.447715 4.447715,2 5,2 L12,2 C12.5523,2 13,2.447716 13,3 C13,3.55228 12.5523,4 12,4 L5,4 C4.447715,4 4,3.55228 4,3 Z M4,7 C4,6.447715 4.447715,6 5,6 L12,6 C12.5523,6 13,6.447716 13,7 C13,7.55228 12.5523,8 12,8 L5,8 C4.447715,8 4,7.55228 4,7 Z M4,11 C4,10.447715 4.447715,10 5,10 L12,10 C12.5523,10 13,10.447716 13,11 C13,11.55228 12.5523,12 12,12 L5,12 C4.447715,12 4,11.55228 4,11 Z M2,4 C1.44771525,4 1,3.55228475 1,3 C1,2.44771525 1.44771525,2 2,2 C2.55228475,2 3,2.44771525 3,3 C3,3.55228475 2.55228475,4 2,4 Z M2,8 C1.44771525,8 1,7.55228475 1,7 C1,6.44771525 1.44771525,6 2,6 C2.55228475,6 3,6.44771525 3,7 C3,7.55228475 2.55228475,8 2,8 Z M2,12 C1.44771525,12 1,11.5522847 1,11 C1,10.4477153 1.44771525,10 2,10 C2.55228475,10 3,10.4477153 3,11 C3,11.5522847 2.55228475,12 2,12 Z"></path></svg></span>IP</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>RAM</th><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesText"><path d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"></path></svg></span>Notes</th></tr></thead><tbody><tr id="00202809-60bb-454e-b833-bbd5df413d28"><td class="cell-title"><a href="https://www.notion.so/DC1-0020280960bb454eb833bbd5df413d28">DC1</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.1 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="e68410db-1956-44e3-9706-b5c465ed5a9c"><td class="cell-title"><a href="https://www.notion.so/DC2-e68410db195644e39706b5c465ed5a9c">DC2</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.2 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="358c8a91-dec3-4b9e-aaeb-783f50b509eb"><td class="cell-title"><a href="https://www.notion.so/LinDHCP-358c8a91dec34b9eaaeb783f50b509eb">LinDHCP</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.3 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="2aa5eb75-4c3a-40a8-b9f2-fa9b045332ab"><td class="cell-title"><a href="https://www.notion.so/SAN-2aa5eb754c3a40a8b9f2fa9b045332ab">SAN</a></td><td class="cell-@cry"><span class="selected-value select-value-color-yellow">192.168.10.3 /29</span><span class="selected-value select-value-color-blue">192.168.3.4 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="b51354a0-3f6b-4606-9ad1-e9dee44a6bea"><td class="cell-title"><a href="https://www.notion.so/HV1-b51354a03f6b46069ad1e9dee44a6bea">HV1</a></td><td class="cell-@cry"><span class="selected-value select-value-color-yellow">192.168.10.1 /29</span><span class="selected-value select-value-color-red">192.168.20.1</span><span class="selected-value select-value-color-blue">192.168.3.5 /28</span><span class="selected-value select-value-color-green">192.168.30.1</span></td><td class="cell-]@DA"><span class="selected-value select-value-color-orange">4096</span></td><td class="cell-Ere|"><code>\\192.168.3.5\d$</code> (before CSV)
<code>\\192.168.3.5\c$\ClusterStorage\Volume1\</code></td></tr><tr id="e6ce8aea-651e-4250-a7bc-9b289b276c2e"><td class="cell-title"><a href="https://www.notion.so/HV2-e6ce8aea651e4250a7bc9b289b276c2e">HV2</a></td><td class="cell-@cry"><span class="selected-value select-value-color-yellow">192.168.10.2 /29</span><span class="selected-value select-value-color-red">192.168.20.2</span><span class="selected-value select-value-color-blue">192.168.3.6 /28</span><span class="selected-value select-value-color-green">192.168.30.2</span></td><td class="cell-]@DA"><span class="selected-value select-value-color-orange">4096</span></td><td class="cell-Ere|"><code>\\192.168.3.6\d$</code> (before CSV)
<code>\\192.168.3.6\c$\ClusterStorage\Volume1\</code></td></tr><tr id="5b5eed77-42bd-4f94-b564-f23dbd93e45e"><td class="cell-title"><a href="https://www.notion.so/HV-Cluster-5b5eed7742bd4f94b564f23dbd93e45e">HV-Cluster</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.7 /28</span></td><td class="cell-]@DA"></td><td class="cell-Ere|"></td></tr><tr id="3859b2e5-a673-48bd-8719-0543b11d14cb"><td class="cell-title"><a href="https://www.notion.so/FILE1-3859b2e5a67348bd87190543b11d14cb">FILE1</a></td><td class="cell-@cry"><span class="selected-value select-value-color-red">192.168.20.3</span><span class="selected-value select-value-color-blue">192.168.3.8 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="a7e849ab-d666-405d-bc63-1ecb7dcb2a57"><td class="cell-title"><a href="https://www.notion.so/FILE2-a7e849abd666405dbc631ecb7dcb2a57">FILE2</a></td><td class="cell-@cry"><span class="selected-value select-value-color-red">192.168.20.4</span><span class="selected-value select-value-color-blue">192.168.3.9 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr><tr id="945125cb-8406-413b-a71b-6e1b4f100f14"><td class="cell-title"><a href="https://www.notion.so/FS-Cluster-945125cb8406413ba71b6e1b4f100f14">FS-Cluster</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.10 /28</span></td><td class="cell-]@DA"></td><td class="cell-Ere|"></td></tr><tr id="5fa76b04-b316-482d-b95f-5a21a8c88b14"><td class="cell-title"><a href="https://www.notion.so/FS-5fa76b04b316482db95f5a21a8c88b14">FS</a></td><td class="cell-@cry"><span class="selected-value select-value-color-blue">192.168.3.11 /28</span></td><td class="cell-]@DA"></td><td class="cell-Ere|"><code>\\fs\Company_Data$</code> <code>\\fs\HomeDir$</code> </td></tr><tr id="209e018c-0744-41cf-bcdf-3905a47036cd"><td class="cell-title"><a href="https://www.notion.so/Thinkpad-Host-209e018c074441cfbcdf3905a47036cd">Thinkpad (Host)</a></td><td class="cell-@cry"><span class="selected-value select-value-color-gray">192.168.1.74 /24</span><span class="selected-value select-value-color-blue">192.168.3.13 /28</span></td><td class="cell-]@DA"><span class="selected-value select-value-color-green">16 GB (Host)</span></td><td class="cell-Ere|"></td></tr><tr id="3f39e8cf-69fa-42a1-be6e-a85808cd1964"><td class="cell-title"><a href="https://www.notion.so/pfSense-3f39e8cf69fa42a1be6ea85808cd1964">pfSense</a></td><td class="cell-@cry"><span class="selected-value select-value-color-gray">192.168.1.10 /24</span><span class="selected-value select-value-color-blue">192.168.3.14 /28</span></td><td class="cell-]@DA"><span class="selected-value">512</span></td><td class="cell-Ere|"></td></tr></tbody></table></div></div><h2 id="1eec80e9-a5c9-4b02-8d08-fcee52824a21" class=""><details open=""><summary>Appendix B: Network Diagram</summary></details></h2><div class="indented"><figure id="b888aa7e-c950-4a13-9faa-b5b8e1ad77a9" class="image"><a href="Capstone%2054e85/Cap-NetworkDiagramHD%201.jpg"><img style="width:864px" src="Capstone%2054e85/Cap-NetworkDiagramHD%201.jpg"/></a></figure></div><h2 id="fc17bbaf-05d6-4fd9-bc60-ad770737ffc5" class=""><details open=""><summary>Appendix C: CAP.INT Domain ADDS Diagram</summary></details></h2><div class="indented"><figure id="85e9debc-9ab1-4a26-b5c6-b5c03b030ce4" class="image"><a href="Capstone%2054e85/Cap-ActiveDirectoryHD%201.jpg"><img style="width:1200px" src="Capstone%2054e85/Cap-ActiveDirectoryHD%201.jpg"/></a></figure></div><h2 id="d822551c-8960-4404-898f-f69adfa58c6f" class=""><details open=""><summary>Appendix D: Server File and Storage Diagram</summary></details></h2><div class="indented"><figure id="449cb2a3-5e5a-48fa-a005-fb5ca7897108" class="image"><a href="Capstone%2054e85/Cap-StorageHD%201.jpg"><img style="width:864px" src="Capstone%2054e85/Cap-StorageHD%201.jpg"/></a></figure></div><h2 id="66a5c7ad-b87f-4a24-a2dd-15e996bbc624" class=""><details open=""><summary>Appendix E: VM Server 2019 Core Creation with Child Differencing Disk</summary></details></h2><div class="indented"><ol type="1" id="ae0dd96f-b8dd-4eb9-892f-3475102049dc" class="numbered-list" start="1"><li>On the host <em>Thinkpad</em>  and open PowerShell as an administrator and run the following:<pre id="7c2eb2e9-2f2b-4152-aebe-3b05e929390f" class="code code-wrap"><code>#
# Create a VM with Windows Server 2019 (Core) with 2GB Static Memory on a Differencing Disk
# Connect to the LAN switch
# Disable automatic checkpoints &amp; enable VM Guest Services
#
$VMName = Read-Host -Prompt &#x27;Input the VM name&#x27;
$parentpath = &quot;V:\VMs\VHDX\ParentServer2019-Core.vhdx&quot;
$VHDPath = &quot;V:\VMs\VHDX\&quot; + $VMName + &quot;.vhdx&quot;

# Create VM with a differencing disk, update settings ,and start vm
New-VHD -ParentPath $parentpath -Path $VHDPath -Differencing
New-VM -Name $VMName -MemoryStartupBytes 2GB -VHDPath $VHDPath -Generation 2 -SwitchName LAN
Set-VM $VMName -AutomaticCheckpointsEnabled $false
Set-VMMemory $VMName -DynamicMemoryEnabled $false
Enable-VMIntegrationService -VMName $VMName -Name &quot;Guest Service Interface&quot;
Start-VM -Name $VMName
VMConnect.exe</code></pre></li></ol><ol type="1" id="117526fd-23f5-4332-87c3-11d0c455afc6" class="numbered-list" start="2"><li>From the new VM console, enter in the default admin password as <code>Pa$$w0rd</code></li></ol></div><h2 id="d57c4953-1ac4-46b2-b139-01201f33c469" class=""><details open=""><summary>Appendix F: Server Post-Install PS Script</summary></details></h2><div class="indented"><ol type="1" id="82959059-7a10-43ad-921e-e4c2e46fbb49" class="numbered-list" start="1"><li>Complete the post installation tasks from the new VM with <code>PowerShell</code> with the following script:<p id="2abab248-1ead-4654-b109-fc8f4a8ee3e1" class="">❗ This script is set up for <em>Proj.int </em><code><em>192.168.3.0/ 28</em></code> </p><pre id="7a4829d6-5b50-457d-adde-a55e37cba4ca" class="code code-wrap"><code>#
# Post-installation tasks
#
$IP = Read-Host -Prompt &#x27;Enter IP 192.168.3.x&#x27;
$SrvName = Read-Host -Prompt &#x27;EnterServerNAME&#x27;
$SrvOUPath = Read-Host -Prompt &#x27;AD Path OU=X,OU=Servers,DC=cap,DC=int&#x27;
$MaskBits = 28
$Gateway = &quot;192.168.3.14&quot;
$Dns = &quot;192.168.3.1&quot;
$IPType = &quot;IPv4&quot;


# Retrieve the network adapter that you want to configure
$adapter = Get-NetAdapter | ? {$_.Status -eq &quot;up&quot;}
# Remove any existing IP, gateway from our ipv4 adapter
If (($adapter | Get-NetIPConfiguration).IPv4Address.IPAddress) {
 $adapter | Remove-NetIPAddress -AddressFamily $IPType -Confirm:$false
}
If (($adapter | Get-NetIPConfiguration).Ipv4DefaultGateway) {
 $adapter | Remove-NetRoute -AddressFamily $IPType -Confirm:$false
}
 # Configure the IP address and default gateway
$adapter | New-NetIPAddress `
 -AddressFamily $IPType `
 -IPAddress $IP `
 -PrefixLength $MaskBits `
 -DefaultGateway $Gateway
# Configure the DNS client server IP addresses
$adapter | Set-DnsClientServerAddress -ServerAddresses $DNS
# Rename the Network Adapter
Rename-NetAdapter -Name &quot;Ethernet&quot; -NewName &quot;LAN&quot;

# Name Computer, add to Domain and OU placement
$cred = Get-Credential cap\aidan
Add-Computer -DomainName cap.int -Credential $cred -OUPath $SrvOUPath
$computer = Get-WmiObject win32_computersystem
$r = $computer.rename(&quot;$SrvName&quot;, $cred.GetNetworkCredential().Password, $cred.username)

#Rename the local admin account
Rename-LocalUser -Name &quot;Administrator&quot; -NewName &quot;_lsysadmin&quot;

# Restart-Computer -Force</code></pre></li></ol></div><h2 id="aa9e3cba-fdbf-4cc1-ae12-9ce787bf70ec" class=""><details open=""><summary>Appendix G: Server Post-Install Verification Checklist</summary></details></h2><div class="indented"><ol type="1" id="386455dc-deb6-4a9a-b443-baf3aa4d2427" class="numbered-list" start="1"><li>Login to the virtal machine using the domain admin account <em>cap\aidan</em></li></ol><ol type="1" id="7f0e5d6f-f7da-496e-9171-013f13bf5bbc" class="numbered-list" start="2"><li>Complete the following in PowerShell<ul id="f73b4a7f-c58a-4338-8d64-05d486bf3ca1" class="bulleted-list"><li style="list-style-type:disc"><code>whoami</code>: verify server is a domain member and that the admin <em>aidan@cap.int</em> is logged in</li></ul><ul id="8e4614a2-5858-4d7b-b380-c565a8cb2173" class="bulleted-list"><li style="list-style-type:disc"><code>ipconfig</code>: verify IPv4 address, subnet, default gateway</li></ul><ul id="39252982-9ad3-4f9d-980d-299fc6c8d268" class="bulleted-list"><li style="list-style-type:disc"><code>tracert google.ca</code>: verify internet connectivity and DNS</li></ul><ul id="a3aeea74-2e99-43eb-8112-19437292dacc" class="bulleted-list"><li style="list-style-type:disc"><code>ping LinDHCP</code>: test DNS to a domain server</li></ul><ul id="a94dc14a-1e02-4a39-b46e-9305f4f234a6" class="bulleted-list"><li style="list-style-type:disc"><code>Get-LocalUser</code>: verify the local admin account has been renamed to <em>_lsysadmin</em></li></ul><ul id="edeaf312-1f81-4203-8066-b6a8e4845c9a" class="bulleted-list"><li style="list-style-type:disc"><code>Get-NetAdapter</code>: verify the network adapter has been renamed</li></ul></li></ol><ol type="1" id="0ef8237d-66e8-4d57-8064-661039e629c6" class="numbered-list" start="3"><li>From <code>sconfig</code> (Server Configuration) complete the following options:<ul id="573b8ca5-5f38-4fdd-a0d0-9b5c6c77b7c2" class="bulleted-list"><li style="list-style-type:disc"><code>11</code> Windows Activation, verify Windows is activated and has the 180 day trial</li></ul><ul id="a5a5183b-20bc-48b2-9426-8307a8f7b12c" class="bulleted-list"><li style="list-style-type:disc"><code>6</code> Download and Install updates </li></ul></li></ol><ol type="1" id="fc79d1d7-08bd-49b8-9d6a-c548671b09e3" class="numbered-list" start="4"><li>From Server Manager view the new entry in <strong>DNS Manager</strong> and <strong>ADUC</strong></li></ol><ol type="1" id="e2286b4a-9fe7-4b4f-8a21-08be9f58cac3" class="numbered-list" start="5"><li>Add the new VM to Server Manager</li></ol><ol type="1" id="d1388111-0d22-4ac1-b2d6-9992adffa2ac" class="numbered-list" start="6"><li>⏲ Checkpoint (optional)</li></ol></div><h2 id="cd7c3e39-db8d-49b4-8504-fca29ffb300f" class=""><details open=""><summary>Appendix H: Final Setup Screenshots</summary></details></h2><div class="indented"><figure id="dcc82d77-b9fa-42d4-8d0a-c139d329ea2f" class="image"><a href="Capstone%2054e85/Untitled%20199.png"><img style="width:624px" src="Capstone%2054e85/Untitled%20199.png"/></a><figcaption>All of the virtual machines</figcaption></figure><figure id="64b68690-1989-41b4-a469-dc2ab1eb9cd2" class="image"><a href="Capstone%2054e85/Untitled%20200.png"><img style="width:816px" src="Capstone%2054e85/Untitled%20200.png"/></a><figcaption>Cluster Shared Volume that stores all FILE1, FILE2, DC2 data</figcaption></figure><figure id="ceaed9b1-a7d5-43c3-bc48-37053aee00f8" class="image"><a href="Capstone%2054e85/Untitled%20201.png"><img style="width:816px" src="Capstone%2054e85/Untitled%20201.png"/></a><figcaption>Server Manager</figcaption></figure><figure id="b8588372-e812-44e1-84e1-4e60ed0585da" class="image"><a href="Capstone%2054e85/Untitled%20202.png"><img style="width:816px" src="Capstone%2054e85/Untitled%20202.png"/></a><figcaption>Disk Summary</figcaption></figure><figure id="76e1d7fe-05ff-44b3-aee6-0bc9a734a6d9" class="image"><a href="Capstone%2054e85/Untitled%20203.png"><img style="width:816px" src="Capstone%2054e85/Untitled%20203.png"/></a><figcaption>Network Shares</figcaption></figure></div><h2 id="302ee6c2-73da-4c6f-9c53-56ee70ccc8c6" class=""><details open=""><summary>Appendix I: References</summary></details></h2><div class="indented"><p id="cb5750be-c58e-4bb9-adeb-bf02d4a983c0" class="">pfSense - NAT &amp; Firewall</p><ul id="efbf2cde-8ba1-411d-891f-c52871413490" class="bulleted-list"><li style="list-style-type:disc"><a href="https://docs.netgate.com/pfsense/en/latest/interfaces/groups.html">https://docs.netgate.com/pfsense/en/latest/interfaces/groups.html</a></li></ul><p id="24f03e1f-6476-45da-b779-d9cb4a3455e2" class="">Linux CentOS 8 DHCP </p><ul id="1cf0028f-4105-4bec-b09e-2bc3ba0f6eb0" class="bulleted-list"><li style="list-style-type:disc"><a href="https://linuxhint.com/dhcp_server_centos8/">https://linuxhint.com/dhcp_server_centos8/</a></li></ul><ul id="21fc70a5-804e-4921-9be3-60e195378f43" class="bulleted-list"><li style="list-style-type:disc"><a href="https://computingforgeeks.com/install-and-configure-dhcp-server-on-centos-rhel-linux/">https://computingforgeeks.com/install-and-configure-dhcp-server-on-centos-rhel-linux/</a></li></ul><p id="49e372ea-8cb9-4296-89b5-1b84b593630c" class="">Nested Hyper-V Failover Cluster, Jumbo Frames, Cluster Shared Volume</p><ul id="bf249c20-3760-4abe-906f-c5da53a18dfc" class="bulleted-list"><li style="list-style-type:disc"><a href="https://docs.microsoft.com/en-us/windows-server/failover-clustering/failover-cluster-csvs">https://docs.microsoft.com/en-us/windows-server/failover-clustering/failover-cluster-csvs</a></li></ul><ul id="1e91ccae-b651-4c04-b938-89b18d1e6b00" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.itwithsathish.com/2021/04/29/configure-jumbo-frames-using-powershell-in-hyper-v-server/">https://www.itwithsathish.com/2021/04/29/configure-jumbo-frames-using-powershell-in-hyper-v-server/</a></li></ul><ul id="f4853dfd-5f05-4661-a3bc-8d3c63a106d0" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.altaro.com/hyper-v/failover-cluster-manager/">https://www.altaro.com/hyper-v/failover-cluster-manager/</a></li></ul><ul id="188beaa3-c962-42b7-b64b-a87330479c08" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.youtube.com/watch?v=LttvxrWPopM">https://www.youtube.com/watch?v=LttvxrWPopM</a></li></ul><ul id="88f55d14-c933-459b-b40a-d8ea1e9d1d70" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.youtube.com/watch?v=QfGnLHPbpwk">https://www.youtube.com/watch?v=QfGnLHPbpwk</a></li></ul><p id="88a2d19b-1732-4e20-9a47-aaf505752458" class="">VHD Set</p><ul id="5b738844-b486-48bc-a3c8-75577e6effc0" class="bulleted-list"><li style="list-style-type:disc"><a href="https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/manage/create-vhdset-file">https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/manage/create-vhdset-file</a></li></ul><ul id="69d40ce8-d0cd-4b80-be05-b846ef4bc087" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.starwindsoftware.com/resource-library/vhd-set-feature-in-microsoft-windows-server-2016/">https://www.starwindsoftware.com/resource-library/vhd-set-feature-in-microsoft-windows-server-2016/</a></li></ul><ul id="a9167911-bb00-40f6-9049-deb627f8e1da" class="bulleted-list"><li style="list-style-type:disc"><a href="https://www.vembu.com/blog/create-hyper-v-guest-clusters-with-shared-vhdx-and-vhd-sets/">https://www.vembu.com/blog/create-hyper-v-guest-clusters-with-shared-vhdx-and-vhd-sets/</a></li></ul><ul id="7eb76009-33f7-404c-bb3b-080283dff8ad" class="bulleted-list"><li style="list-style-type:disc"><a href="https://petri.com/deploying-vhd-sets-windows-server-2016-hyper-v/">https://petri.com/deploying-vhd-sets-windows-server-2016-hyper-v/</a></li></ul></div><p id="d0e2f71f-064c-478a-b71c-2d9da0a4c753" class="">
</p></div></article></body></html>